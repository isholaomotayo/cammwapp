(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1742:function(e,t,n){e.exports=n.p+"files/fd69f7891f867c2aa14011da92b728ac.jpg"},1743:function(e,t,n){e.exports=n.p+"files/e9ee8de75ba7184661c37260884092fe.png"},1744:function(e,t,n){e.exports=n.p+"files/2aa264fb1956b8be41f2047d428a1a1e.jpg"},1745:function(e,t,n){e.exports=n.p+"files/d184fcdb23c1e24bfd7132950ceb4f68.jpg"},1746:function(e,t,n){"use strict";var a=n(10),o=n.n(a),r=n(5),i=n.n(r),s=n(851),c=n(1064),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var m=function(e){var t=e.to,n=e.exact,a=e.strict,r=e.location,i=e.activeClassName,m=e.className,p=e.activeStyle,d=e.style,f=e.isActive,h=e["aria-current"],g=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),b="object"===(void 0===t?"undefined":u(t))?t.pathname:t,y=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return o.a.createElement(s.a,{path:y,exact:n,strict:a,location:r,children:function(e){var n=e.location,a=e.match,r=!!(f?f(a,n):a);return o.a.createElement(c.a,l({to:t,className:r?[m,i].filter(function(e){return e}).join(" "):m,style:r?l({},d,p):d,"aria-current":r&&h||null},g))}})};m.propTypes={to:c.a.propTypes.to,exact:i.a.bool,strict:i.a.bool,location:i.a.object,activeClassName:i.a.string,className:i.a.string,activeStyle:i.a.object,style:i.a.object,isActive:i.a.func,"aria-current":i.a.oneOf(["page","step","location","date","time","true"])},m.defaultProps={activeClassName:"active","aria-current":"page"},t.a=m},1875:function(e,t,n){"use strict";n.r(t);n(73),n(72),n(24);var a=n(134),o=n(1902),r=n(538),i=n(232),s=n(47),c=n(236),l=n(12),u=(n(20),n(25),n(234),n(94),n(10)),m=n.n(u),p=n(5),d=n.n(p),f=n(851),h=n(1901),g=n(619),b=n(639),y=n(847),v=(n(92),n(536)),_=n(535),E=n(1742),O=n.n(E),k=n(1743),w=n.n(k),j=n(1744),S=n.n(j),C=n(1745),N=n.n(C),P=n(640),M=n(603),A=(n(238),n(1064));function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,I(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,m.a.Component),function(e,t,n){t&&T(e.prototype,t),n&&T(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.title,a=e.description,o=e.link;return m.a.createElement(A.a,{to:o,className:"integration-option"},m.a.createElement("img",{className:"integration-option__image",src:t}),m.a.createElement("div",{className:"integration-option__title"},n),m.a.createElement("div",{className:"integration-option__description"},a))}}],[{key:"propTypes",get:function(){return{image:d.a.string.isRequired,title:d.a.node.isRequired,description:d.a.node.isRequired,link:d.a.string.isRequired}}}]),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(F(F(n=function(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?F(e):t}(this,(e=W(t)).call.apply(e,[this].concat(o))))),"updateTitle",function(){var e=n.props.siteName||"";document.title=_.localizeMessage("admin.sidebar.integrations","Integrations")+" - "+n.props.team.display_name+" "+e}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,m.a.Component),function(e,t,n){t&&H(e.prototype,t),n&&H(e,n)}(t,[{key:"componentDidMount",value:function(){this.updateTitle()}},{key:"render",value:function(){var e=[];return this.props.enableIncomingWebhooks&&e.push(m.a.createElement(M.a,{teamId:this.props.team.id,permissions:[l.Permissions.MANAGE_WEBHOOKS],key:"incomingWebhookPermission"},m.a.createElement(D,{key:"incomingWebhook",image:O.a,title:m.a.createElement(v.c,{id:"integrations.incomingWebhook.title",defaultMessage:"Incoming Webhook"}),description:m.a.createElement(v.c,{id:"integrations.incomingWebhook.description",defaultMessage:"Incoming webhooks allow external integrations to send messages"}),link:"/"+this.props.team.name+"/integrations/incoming_webhooks"}))),this.props.enableOutgoingWebhooks&&e.push(m.a.createElement(M.a,{teamId:this.props.team.id,permissions:[l.Permissions.MANAGE_WEBHOOKS],key:"outgoingWebhookPermission"},m.a.createElement(D,{key:"outgoingWebhook",image:S.a,title:m.a.createElement(v.c,{id:"integrations.outgoingWebhook.title",defaultMessage:"Outgoing Webhook"}),description:m.a.createElement(v.c,{id:"integrations.outgoingWebhook.description",defaultMessage:"Outgoing webhooks allow external integrations to receive and respond to messages"}),link:"/"+this.props.team.name+"/integrations/outgoing_webhooks"}))),this.props.enableCommands&&e.push(m.a.createElement(M.a,{teamId:this.props.team.id,permissions:[l.Permissions.MANAGE_SLASH_COMMANDS],key:"commandPermission"},m.a.createElement(D,{key:"command",image:N.a,title:m.a.createElement(v.c,{id:"integrations.command.title",defaultMessage:"Slash Command"}),description:m.a.createElement(v.c,{id:"integrations.command.description",defaultMessage:"Slash commands send events to an external integration"}),link:"/"+this.props.team.name+"/integrations/commands"}))),this.props.enableOAuthServiceProvider&&e.push(m.a.createElement(P.a,{permissions:[l.Permissions.MANAGE_OAUTH],key:"oauth2AppsPermission"},m.a.createElement(D,{key:"oauth2Apps",image:w.a,title:m.a.createElement(v.c,{id:"integrations.oauthApps.title",defaultMessage:"OAuth 2.0 Applications"}),description:m.a.createElement(v.c,{id:"integrations.oauthApps.description",defaultMessage:"Auth 2.0 allows external applications to make authorized requests to the Mattermost API."}),link:"/"+this.props.team.name+"/integrations/oauth2-apps"}))),m.a.createElement("div",{className:"backstage-content row"},m.a.createElement("div",{className:"backstage-header"},m.a.createElement("h1",null,m.a.createElement(v.c,{id:"integrations.header",defaultMessage:"Integrations"}))),m.a.createElement("div",{className:"backstage-list__help"},m.a.createElement(v.c,{id:"integrations.help",defaultMessage:"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.",values:{appDirectory:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},m.a.createElement(v.c,{id:"integrations.help.appDirectory",defaultMessage:"App Directory"}))}})),m.a.createElement("div",null,e))}}],[{key:"propTypes",get:function(){return{team:d.a.object,user:d.a.object,siteName:d.a.string,enableIncomingWebhooks:d.a.bool,enableOutgoingWebhooks:d.a.bool,enableCommands:d.a.bool,enableOAuthServiceProvider:d.a.bool,enableOnlyAdminIntegrations:d.a.bool}}}]),t}();var G=Object(a.connect)(function(e){var t=Object(s.getConfig)(e);return{siteName:t.SiteName,enableIncomingWebhooks:"true"===t.EnableIncomingWebhooks,enableOutgoingWebhooks:"true"===t.EnableOutgoingWebhooks,enableCommands:"true"===t.EnableCommands,enableOAuthServiceProvider:"true"===t.EnableOAuthServiceProvider,enableOnlyAdminIntegrations:"true"===t.EnableOnlyAdminIntegrations}})(z),B=n(3),Y=n(621),K=n(2),J=n.n(K),V=n(655),X=n(620),Z=(n(97),n(99),n(96),n(74),n(136),n(93),n(555)),$=n(616),Q=n(95),ee=n(0),te=n(575);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(ie(ie(n=function(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ie(e):t}(this,oe(t).call(this,e)))),"handleOpenModal",function(e){e.preventDefault(),n.setState({showDeleteModal:!0})}),se(ie(ie(n)),"handleConfirm",function(){n.props.onDelete()}),se(ie(ie(n)),"handleCancel",function(){n.setState({showDeleteModal:!1})}),se(ie(ie(n)),"handleKeyDown",function(e){_.isKeyPressed(e,ee.D.KeyCodes.ENTER)&&n.handleConfirm(e)}),n.constructor===t)throw new TypeError("Can not construct abstract class.");return n.state={showDeleteModal:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&ae(e.prototype,t),n&&ae(e,n)}(t,[{key:"render",value:function(){return m.a.createElement("span",null,m.a.createElement("button",{className:"color--link style--none",onClick:this.handleOpenModal},this.triggerTitle),m.a.createElement(te.a,{show:this.state.showDeleteModal,title:this.modalTitle,message:this.modalMessage,confirmButtonText:this.modalConfirmButton,onConfirm:this.handleConfirm,onCancel:this.handleCancel,onKeyDown:this.handleKeyDown}))}}]),t}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function me(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}se(ce,"propTypes",{onDelete:d.a.func.isRequired});var fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,pe(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,ce),function(e,t,n){t&&ue(e.prototype,t),n&&ue(e,n)}(t,[{key:"triggerTitle",get:function(){return m.a.createElement(v.c,{id:"emoji_list.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return m.a.createElement(v.c,{id:"emoji_list.delete.confirm.title",defaultMessage:"Delete Custom Emoji"})}},{key:"modalMessage",get:function(){return m.a.createElement("div",{className:"alert alert-warning"},m.a.createElement("i",{className:"fa fa-warning fa-margin--right",title:Object(_.localizeMessage)("generic_icons.warning","Warning Icon")}),m.a.createElement(v.c,{id:"emoji_list.delete.confirm.msg",defaultMessage:"This action permanently deletes the custom emoji. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return m.a.createElement(v.c,{id:"emoji_list.delete.confirm.button",defaultMessage:"Delete"})}}]),t}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fe,"propTypes",{onDelete:d.a.func.isRequired});var Ee=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return _e(ve(ve(n=function(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?ve(e):t}(this,(e=be(t)).call.apply(e,[this].concat(o))))),"handleDelete",function(){n.props.onDelete&&n.props.onDelete(n.props.emoji.id),n.props.actions.deleteCustomEmoji(n.props.emoji.id)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,m.a.Component),function(e,t,n){t&&ge(e.prototype,t),n&&ge(e,n)}(t,[{key:"render",value:function(){var e=this.props.emoji,t=this.props.creatorUsername,n=this.props.creatorDisplayName;t&&t!==n&&(n+=" (@"+t+")");var a=null;return a=e.creator_id===this.props.currentUserId?m.a.createElement(M.a,{teamId:this.props.currentTeam.id,permissions:[J.a.MANAGE_EMOJIS]},m.a.createElement(fe,{onDelete:this.handleDelete})):m.a.createElement(M.a,{teamId:this.props.currentTeam.id,permissions:[J.a.MANAGE_EMOJIS]},m.a.createElement(M.a,{teamId:this.props.currentTeam.id,permissions:[J.a.MANAGE_OTHERS_EMOJIS]},m.a.createElement(fe,{onDelete:this.handleDelete}))),m.a.createElement("tr",{className:"backstage-list__item"},m.a.createElement("td",{className:"emoji-list__name"},":"+e.name+":"),m.a.createElement("td",{className:"emoji-list__image"},m.a.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+Q.Client4.getCustomEmojiImageUrl(e.id)+")"}})),m.a.createElement("td",{className:"emoji-list__creator"},n),m.a.createElement("td",{className:"emoji-list-item_actions"},a))}}]),t}();_e(Ee,"propTypes",{emoji:d.a.object.isRequired,currentUserId:d.a.string.isRequired,creatorDisplayName:d.a.string.isRequired,creatorUsername:d.a.string,currentTeam:d.a.object,onDelete:d.a.func,actions:d.a.shape({deleteCustomEmoji:d.a.func.isRequired}).isRequired}),_e(Ee,"defaultProps",{emoji:{},currentUserId:"",currentTeam:{},creatorDisplayName:""});var Oe=Object(a.connect)(function(e,t){var n=e.entities.emojis.customEmoji[t.emojiId],a=Object(r.getUser)(e,n.creator_id);return{emoji:n,creatorDisplayName:Object(_.getDisplayNameByUser)(a),creatorUsername:a?a.username:"",currentUserId:Object(r.getCurrentUserId)(e),currentTeam:Object(i.getCurrentTeam)(e)}},function(e){return{actions:Object(B.bindActionCreators)({deleteCustomEmoji:X.deleteCustomEmoji},e)}})(Ee);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function je(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function Se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=50,Re=200,Te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Me(Pe(Pe(n=function(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?Pe(e):t}(this,Ce(t).call(this,e)))),"nextPage",function(e){e&&e.preventDefault();var t=n.state.page+1;n.setState({nextLoading:!0}),n.props.actions.getCustomEmojis(t,Ae,l.Emoji.SORT_BY_NAME,!0).then(function(e){var a=e.data;n.setState({page:t,nextLoading:!1}),a&&a.length<Ae&&n.setState({missingPages:!1}),n.props.scrollToTop()})}),Me(Pe(Pe(n)),"previousPage",function(e){e&&e.preventDefault(),n.setState({page:n.state.page-1,nextLoading:!1}),n.props.scrollToTop()}),Me(Pe(Pe(n)),"onSearchChange",function(e){if(e&&e.target){var t=e.target.value||"";clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){je(r,a,o,i,s,"next",e)}function s(e){je(r,a,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.trim()){e.next=3;break}return n.setState({searchEmojis:null,page:0}),e.abrupt("return");case 3:return n.setState({loading:!0}),e.next=6,n.props.actions.searchCustomEmojis(t,{},!0);case 6:a=e.sent,(o=a.data)?n.setState({searchEmojis:o.map(function(e){return e.id}),loading:!1}):n.setState({searchEmojis:[],loading:!1});case 9:case"end":return e.stop()}},e,this)})),Re)}}),Me(Pe(Pe(n)),"deleteFromSearch",function(e){if(n.state.searchEmojis){var t=n.state.searchEmojis.indexOf(e);if(!(t<0)){var a=we(n.state.searchEmojis);a.splice(t,1),n.setState({searchEmojis:a})}}}),n.searchTimeout=null,n.state={loading:!0,page:0,nextLoading:!1,searchEmojis:null,missingPages:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,m.a.Component),function(e,t,n){t&&Se(e.prototype,t),n&&Se(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getCustomEmojis(0,Ae+1,l.Emoji.SORT_BY_NAME,!0).then(function(t){var n=t.data;e.setState({loading:!1}),n&&n.length<Ae&&e.setState({missingPages:!1})})}},{key:"render",value:function(){var e,t,n=this,a=this.state.searchEmojis,o=[];if(this.state.loading)o.push(m.a.createElement("tr",{key:"loading",className:"backstage-list__item backstage-list__empty"},m.a.createElement("td",{colSpan:"4"},m.a.createElement(Z.a,{key:"loading"}))));else if(0===this.props.emojiIds.length||a&&0===a.length)o.push(m.a.createElement("tr",{key:"empty",className:"backstage-list__item backstage-list__empty"},m.a.createElement("td",{colSpan:"4"},m.a.createElement(v.c,{id:"emoji_list.empty",defaultMessage:"No custom emoji found"}))));else if(a)a.forEach(function(e){o.push(m.a.createElement(Oe,{key:"emoji_search_item"+e,emojiId:e,onDelete:n.deleteFromSearch}))});else{var r=this.state.page*Ae,i=r+Ae;if(this.props.emojiIds.slice(r,i).forEach(function(e){o.push(m.a.createElement(Oe,{key:"emoji_list_item"+e,emojiId:e}))}),this.state.missingPages){var s=m.a.createElement("span",null,m.a.createElement(v.c,{id:"filtered_user_list.next",defaultMessage:"Next"}),m.a.createElement("i",{className:"fa fa-chevron-right margin-left",title:Object(_.localizeMessage)("generic_icons.next","Next Icon")}));e=m.a.createElement($.a,{btnClass:"btn-link",extraClasses:"pull-right",onClick:this.nextPage,saving:this.state.nextLoading,disabled:this.state.nextLoading,defaultMessage:s,savingMessage:s})}this.state.page>0&&(t=m.a.createElement("button",{className:"btn btn-link",onClick:this.previousPage},m.a.createElement("i",{className:"fa fa-chevron-left margin-right",title:Object(_.localizeMessage)("generic_icons.previous","Previous Icon")}),m.a.createElement(v.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"})))}return m.a.createElement("div",null,m.a.createElement("div",{className:"backstage-filters"},m.a.createElement("div",{className:"backstage-filter__search"},m.a.createElement("i",{className:"fa fa-search",title:Object(_.localizeMessage)("generic_icons.search","Search Icon")}),m.a.createElement("input",{type:"search",className:"form-control",placeholder:Object(_.localizeMessage)("emoji_list.search","Search Custom Emoji"),onChange:this.onSearchChange,style:xe.search}))),m.a.createElement("span",{className:"backstage-list__help"},m.a.createElement("p",null,m.a.createElement(v.c,{id:"emoji_list.help",defaultMessage:"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu."})),m.a.createElement("p",null,m.a.createElement(v.c,{id:"emoji_list.help2",defaultMessage:"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'."}))),m.a.createElement("div",{className:"backstage-list"},m.a.createElement("table",{className:"emoji-list__table"},m.a.createElement("thead",null,m.a.createElement("tr",{className:"backstage-list__item emoji-list__table-header"},m.a.createElement("th",{className:"emoji-list__name"},m.a.createElement(v.c,{id:"emoji_list.name",defaultMessage:"Name"})),m.a.createElement("th",{className:"emoji-list__image"},m.a.createElement(v.c,{id:"emoji_list.image",defaultMessage:"Image"})),m.a.createElement("th",{className:"emoji-list__creator"},m.a.createElement(v.c,{id:"emoji_list.creator",defaultMessage:"Creator"})),m.a.createElement("th",{className:"emoji-list_actions"},m.a.createElement(v.c,{id:"emoji_list.actions",defaultMessage:"Actions"})))),m.a.createElement("tbody",null,o))),m.a.createElement("div",{className:"filter-controls padding-top x2"},t,e))}}]),t}();Me(Te,"propTypes",{emojiIds:d.a.arrayOf(d.a.string).isRequired,scrollToTop:d.a.func.isRequired,actions:d.a.shape({getCustomEmojis:d.a.func.isRequired,searchCustomEmojis:d.a.func.isRequired}).isRequired});var xe={search:{flexGrow:0,flexShrink:0}};var Ie=Object(a.connect)(function(e){return{emojiIds:Object(V.getCustomEmojiIdsSortedByName)(e)||[]}},function(e){return{actions:Object(B.bindActionCreators)({getCustomEmojis:X.getCustomEmojis,searchCustomEmojis:X.searchCustomEmojis},e)}})(Te);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return Le(We(We(n=function(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?We(e):t}(this,(e=Ue(t)).call.apply(e,[this].concat(o))))),"updateTitle",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;document.title=_.localizeMessage("custom_emoji.header","Custom Emoji")+" - "+e.teamDisplayName+" "+e.siteName}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,m.a.Component),function(e,t,n){t&&De(e.prototype,t),n&&De(e,n)}(t,[{key:"componentDidMount",value:function(){this.updateTitle(),this.props.actions.loadRolesIfNeeded(["system_admin","team_admin","system_user","team_user"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.siteName!==e.siteName&&this.updateTitle(e)}},{key:"render",value:function(){return m.a.createElement("div",{className:"backstage-content emoji-list"},m.a.createElement("div",{className:"backstage-header"},m.a.createElement("h1",null,m.a.createElement(v.c,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),m.a.createElement(M.a,{teamId:this.props.teamId,permissions:[J.a.MANAGE_EMOJIS]},m.a.createElement(A.a,{className:"add-link",to:"/"+this.props.teamName+"/emoji/add"},m.a.createElement("button",{type:"button",className:"btn btn-primary"},m.a.createElement(v.c,{id:"emoji_list.add",defaultMessage:"Add Custom Emoji"})))),m.a.createElement(Ie,{scrollToTop:this.props.scrollToTop})))}}]),t}();Le(Fe,"propTypes",{teamId:d.a.string.isRequired,teamName:d.a.string.isRequired,teamDisplayName:d.a.string.isRequired,siteName:d.a.string,scrollToTop:d.a.func.isRequired,actions:d.a.shape({loadRolesIfNeeded:d.a.func.isRequired}).isRequired}),Le(Fe,"defaultProps",{teamName:"",teamDisplayName:"",siteName:""});var ze=Object(a.connect)(function(e){var t=Object(i.getCurrentTeam)(e)||{};return{teamId:t.id,teamName:t.name,teamDisplayName:t.display_name,siteName:e.entities.general.config.SiteName}},function(e){return{actions:Object(B.bindActionCreators)({loadRolesIfNeeded:Y.loadRolesIfNeeded},e)}})(Fe),Ge=n(646),Be=(n(244),n(139),n(716));function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Je(this,Ve(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,m.a.Component),function(e,t,n){t&&Ke(e.prototype,t),n&&Ke(e,n)}(t,[{key:"render",value:function(){var e=[];return m.a.Children.forEach(this.props.children,function(t,n){0!==n&&e.push(m.a.createElement("span",{key:"divider"+n,className:"backstage-header__divider"},m.a.createElement("i",{className:"fa fa-angle-right",title:Object(_.localizeMessage)("generic_icons.breadcrumb","Breadcrumb Icon")}))),e.push(t)}),m.a.createElement("div",{className:"backstage-header"},m.a.createElement("h1",null,e))}}],[{key:"propTypes",get:function(){return{children:d.a.node}}}]),t}(),$e=n(579),Qe=n(634),et=n.n(Qe);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function at(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ot(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ot(this,rt(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,u["PureComponent"]),function(e,t,n){t&&at(e.prototype,t),n&&at(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.spinning,n=e.children,a=nt(e,["spinning","children"]);return t?m.a.createElement("img",{className:"spinner-button__gif",src:et.a}):m.a.createElement("button",Object.assign({className:"btn btn-primary"},a),n)}}]),t}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}st(ct,"defaultProps",{spinning:!1}),st(ct,"propTypes",{children:d.a.node,spinning:d.a.bool.isRequired,onClick:d.a.func});var ht=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ft(dt(dt(n=function(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?dt(e):t}(this,mt(t).call(this,e)))),"handleSubmit",function(e){if(e.preventDefault(),!n.state.saving){n.setState({saving:!0,error:null});var t={creator_id:n.props.user.id,name:n.state.name.trim().toLowerCase()};t.name.startsWith(":")&&t.name.endsWith(":")&&(t.name=t.name.substring(1,t.name.length-1)),t.name?/[^a-z0-9_-]/.test(t.name)?n.setState({saving:!1,error:m.a.createElement(v.c,{id:"add_emoji.nameInvalid",defaultMessage:"An emoji's name can only contain lowercase letters, numbers, and the symbols '-' and '_'."})}):n.props.emojiMap.hasSystemEmoji(t.name)?n.setState({saving:!1,error:m.a.createElement(v.c,{id:"add_emoji.nameTaken",defaultMessage:"This name is already in use by a system emoji. Please choose another name."})}):n.state.image?Be.a(t,n.state.image,function(){n.props.history.push("/"+n.props.team.name+"/emoji")},function(e){n.setState({saving:!1,error:e.message})}):n.setState({saving:!1,error:m.a.createElement(v.c,{id:"add_emoji.imageRequired",defaultMessage:"An image is required for the emoji"})}):n.setState({saving:!1,error:m.a.createElement(v.c,{id:"add_emoji.nameRequired",defaultMessage:"A name is required for the emoji"})})}}),ft(dt(dt(n)),"updateName",function(e){n.setState({name:e.target.value})}),ft(dt(dt(n)),"updateImage",function(e){if(0!==e.target.files.length){var t=e.target.files[0],a=new FileReader;a.onload=function(){n.setState({image:t,imageUrl:a.result})},a.readAsDataURL(t)}else n.setState({image:null,imageUrl:""})}),n.state={name:"",image:null,imageUrl:"",saving:!1,error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,m.a.Component),function(e,t,n){t&&ut(e.prototype,t),n&&ut(e,n)}(t,[{key:"render",value:function(){var e=null;this.state.image&&(e=m.a.createElement("span",{className:"add-emoji__filename"},this.state.image.name));var t=null;return this.state.imageUrl&&(t=m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"preview"},m.a.createElement(v.c,{id:"add_emoji.preview",defaultMessage:"Preview"})),m.a.createElement("div",{className:"col-md-5 col-sm-8 add-emoji__preview"},m.a.createElement(v.c,{id:"add_emoji.preview.sentence",defaultMessage:"This is a sentence with {image} in it.",values:{image:m.a.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+this.state.imageUrl+")"}})}})))),m.a.createElement("div",{className:"backstage-content row"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/"+this.props.team.name+"/emoji"},m.a.createElement(v.c,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),m.a.createElement(v.c,{id:"add_emoji.header",defaultMessage:"Add"})),m.a.createElement("div",{className:"backstage-form"},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"name"},m.a.createElement(v.c,{id:"add_emoji.name",defaultMessage:"Name"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"name",type:"text",maxLength:"64",className:"form-control",value:this.state.name,onChange:this.updateName}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_emoji.name.help",defaultMessage:"Choose a name for your emoji made of up to 64 characters consisting of lowercase letters, numbers, and the symbols '-' and '_'."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"image"},m.a.createElement(v.c,{id:"add_emoji.image",defaultMessage:"Image"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("div",null,m.a.createElement("div",{className:"add-emoji__upload"},m.a.createElement("button",{className:"btn btn-primary"},m.a.createElement(v.c,{id:"add_emoji.image.button",defaultMessage:"Select"})),m.a.createElement("input",{type:"file",accept:".jpg,.png,.gif",multiple:!1,onChange:this.updateImage})),e,m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_emoji.image.help",defaultMessage:"Choose the image for your emoji. The image can be a gif, png, or jpeg file with a max size of 64 KB and dimensions up to 128 by 128 pixels."}))))),t,m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement($e.a,{type:"backstage",error:this.state.error}),m.a.createElement(A.a,{className:"btn btn-sm",to:"/"+this.props.team.name+"/emoji"},m.a.createElement(v.c,{id:"add_emoji.cancel",defaultMessage:"Cancel"})),m.a.createElement(ct,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},m.a.createElement(v.c,{id:"add_emoji.save",defaultMessage:"Save"}))))))}}]),t}();ft(ht,"propTypes",{team:d.a.object,user:d.a.object,emojiMap:d.a.object.isRequired}),ft(ht,"contextTypes",{router:d.a.object.isRequired});var gt=Object(a.connect)(function(e){return{emojiMap:Object(Ge.a)(e)}})(ht),bt=n(588),yt=n(547),vt=n(674);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var St=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?wt(e):t}(this,Ot(t).call(this,e))).updateFilter=n.updateFilter.bind(wt(wt(n))),n.state={filter:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,m.a.Component),function(e,t,n){t&&Et(e.prototype,t),n&&Et(e,n)}(t,[{key:"updateFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e,t=this.state.filter.toLowerCase();this.props.loading?e=m.a.createElement(Z.a,null):0===(e=m.a.Children.map(this.props.children,function(e){return m.a.cloneElement(e,{filter:t})})).length&&this.props.emptyText&&(e=m.a.createElement("span",{className:"backstage-list__item backstage-list__empty"},this.props.emptyText));var n=null;return this.props.addLink&&this.props.addText&&(n=m.a.createElement(A.a,{className:"add-link",to:this.props.addLink},m.a.createElement("button",{type:"button",className:"btn btn-primary"},m.a.createElement("span",null,this.props.addText)))),m.a.createElement("div",{className:"backstage-content"},m.a.createElement("div",{className:"backstage-header"},m.a.createElement("h1",null,this.props.header),n),m.a.createElement("div",{className:"backstage-filters"},m.a.createElement("div",{className:"backstage-filter__search"},m.a.createElement("i",{className:"fa fa-search",title:_.localizeMessage("generic_icons.search","Search Icon")}),m.a.createElement("input",{type:"search",className:"form-control",placeholder:this.props.searchPlaceholder,value:this.state.filter,onChange:this.updateFilter,style:Ct.search}))),m.a.createElement("span",{className:"backstage-list__help"},this.props.helpText),m.a.createElement("div",{className:"backstage-list"},e))}}]),t}();jt(St,"propTypes",{children:d.a.node,header:d.a.node.isRequired,addLink:d.a.string,addText:d.a.node,emptyText:d.a.node,helpText:d.a.node,loading:d.a.bool.isRequired,searchPlaceholder:d.a.string}),jt(St,"defaultProps",{searchPlaceholder:_.localizeMessage("backstage_list.search","Search")});var Ct={search:{flexGrow:0,flexShrink:0}},Nt=n(557),Pt=n(19),Mt=n(1052),At=n(1048);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ut=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return Dt(qt(qt(n=function(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?qt(e):t}(this,(e=xt(t)).call.apply(e,[this].concat(o))))),"copyText",function(e){e.preventDefault(),Object(_.copyToClipboard)(n.props.value)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Tt(e.prototype,t),n&&Tt(e,n)}(t,[{key:"render",value:function(){if(!document.queryCommandSupported("copy"))return null;var e=m.a.createElement(Mt.a,{id:"copy"},m.a.createElement(v.c,{id:this.props.idMessage,defaultMessage:this.props.defaultMessage}));return m.a.createElement(At.a,{trigger:["hover","focus"],delayShow:ee.D.OVERLAY_TIME_DELAY,placement:"top",overlay:e},m.a.createElement("a",{href:"#",className:"fa fa-copy margin-left",onClick:this.copyText}))}}],[{key:"defaultProps",get:function(){return{idMessage:"integrations.copy",defaultMessage:"Copy"}}}]),t}();function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dt(Ut,"propTypes",{value:d.a.string.isRequired,defaultMessage:d.a.string,idMessage:d.a.string});var Gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lt(this,Ft(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,ce),function(e,t,n){t&&Wt(e.prototype,t),n&&Wt(e,n)}(t,[{key:"triggerTitle",get:function(){return m.a.createElement(v.c,{id:"installed_integrations.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return m.a.createElement(v.c,{id:"integrations.delete.confirm.title",defaultMessage:"Delete Integration"})}},{key:"modalMessage",get:function(){return m.a.createElement("div",{className:"alert alert-warning"},m.a.createElement("i",{className:"fa fa-warning fa-margin--right",title:Object(_.localizeMessage)("generic_icons.warning","Warning Icon")}),m.a.createElement(v.c,{id:this.props.messageId,defaultMessage:"This action permanently deletes the integration and breaks any integrations using it. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return m.a.createElement(v.c,{id:"integrations.delete.confirm.button",defaultMessage:"Delete"})}}]),t}();function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Gt.propTypes={messageId:d.a.string.isRequired,onDelete:d.a.func.isRequired};var Xt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Vt(e):t}(this,Kt(t).call(this,e))).handleDelete=n.handleDelete.bind(Vt(Vt(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Yt(e.prototype,t),n&&Yt(e,n)}(t,[{key:"handleDelete",value:function(){this.props.onDelete(this.props.incomingWebhook)}},{key:"render",value:function(){var e,n=this.props.incomingWebhook,a=this.props.channel,o=this.props.filter?this.props.filter.toLowerCase():"";if(!t.matchesFilter(n,a,o))return null;e=n.display_name?n.display_name:a?a.display_name:m.a.createElement(v.c,{id:"installed_incoming_webhooks.unknown_channel",defaultMessage:"A Private Webhook"});var r=null;n.description&&(r=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__description"},n.description)));var i=null;this.props.canChange&&(i=m.a.createElement("div",{className:"item-actions"},m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/incoming_webhooks/edit?id=").concat(n.id)},m.a.createElement(v.c,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",m.a.createElement(Gt,{messageId:Object(Pt.b)("installed_incoming_webhooks.delete.confirm"),onDelete:this.handleDelete})));var s=Object(Nt.e)()+"/hooks/"+n.id;return m.a.createElement("div",{className:"backstage-list__item"},m.a.createElement("div",{className:"item-details"},m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__name"},e)),r,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(v.c,{id:"installed_integrations.url",defaultMessage:"URL: {url}",values:{url:s}}),m.a.createElement("span",null,m.a.createElement(Ut,{value:s})))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__creation"},m.a.createElement(v.c,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:n.create_at}})))),i)}}],[{key:"matchesFilter",value:function(e,t,n){return!n||(-1!==e.display_name.toLowerCase().indexOf(n)||-1!==e.description.toLowerCase().indexOf(n)||!(!e.channel_id||!t||-1===t.name.toLowerCase().indexOf(n)))}}]),t}();function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Xt,"propTypes",{incomingWebhook:d.a.object.isRequired,onDelete:d.a.func.isRequired,filter:d.a.string,creator:d.a.object.isRequired,canChange:d.a.bool.isRequired,team:d.a.object.isRequired,channel:d.a.object});var an=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nn(tn(tn(n=function(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?tn(e):t}(this,Qt(t).call(this,e)))),"deleteIncomingWebhook",function(e){n.props.actions.removeIncomingHook(e.id)}),n.deleteIncomingWebhook=n.deleteIncomingWebhook.bind(tn(tn(n))),n.incomingWebhookCompare=n.incomingWebhookCompare.bind(tn(tn(n))),n.state={loading:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&$t(e.prototype,t),n&&$t(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableIncomingWebhooks&&this.props.actions.getIncomingHooks(this.props.teamId,ee.D.Integrations.START_PAGE_NUM,ee.D.Integrations.PAGE_SIZE).then(function(){return e.setState({loading:!1})})}},{key:"incomingWebhookCompare",value:function(e,t){var n=e.display_name;if(!n){var a=this.props.channels[e.channel_id];n=a?a.display_name:_.localizeMessage("installed_incoming_webhooks.unknown_channel","A Private Webhook")}var o=t.display_name;return n.localeCompare(o)}},{key:"render",value:function(){var e=this,t=this.props.incomingWebhooks.sort(this.incomingWebhookCompare).map(function(t){var n=e.props.canManageOthersWebhooks||e.props.user.id===t.user_id,a=e.props.channels[t.channel_id];return m.a.createElement(Xt,{key:t.id,incomingWebhook:t,onDelete:e.deleteIncomingWebhook,creator:e.props.users[t.user_id]||{},canChange:n,team:e.props.team,channel:a})});return m.a.createElement(St,{header:m.a.createElement(v.c,{id:"installed_incoming_webhooks.header",defaultMessage:"Installed Incoming Webhooks"}),addText:m.a.createElement(v.c,{id:"installed_incoming_webhooks.add",defaultMessage:"Add Incoming Webhook"}),addLink:"/"+this.props.team.name+"/integrations/incoming_webhooks/add",emptyText:m.a.createElement(v.c,{id:"installed_incoming_webhooks.empty",defaultMessage:"No incoming webhooks found"}),helpText:m.a.createElement(v.c,{id:"installed_incoming_webhooks.help",defaultMessage:"Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-incoming.html"},m.a.createElement(v.c,{id:"installed_incoming_webhooks.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},m.a.createElement(v.c,{id:"installed_incoming_webhooks.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:_.localizeMessage("installed_incoming_webhooks.search","Search Incoming Webhooks"),loading:this.state.loading},t)}}]),t}();nn(an,"propTypes",{team:d.a.object,user:d.a.object,canManageOthersWebhooks:d.a.bool,incomingWebhooks:d.a.array,channels:d.a.object,users:d.a.object,teamId:d.a.string,actions:d.a.shape({removeIncomingHook:d.a.func,getIncomingHooks:d.a.func}),enableIncomingWebhooks:d.a.bool});var on=Object(a.connect)(function(e){var t=Object(s.getConfig)(e),n=Object(i.getCurrentTeamId)(e),a=Object(c.haveITeamPermission)(e,{team:n,permission:l.Permissions.MANAGE_OTHERS_WEBHOOKS}),o=Object(vt.getIncomingHooks)(e),u=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return e.team_id===n}),m="true"===t.EnableIncomingWebhooks;return{incomingWebhooks:u,channels:Object(yt.getAllChannels)(e),users:Object(r.getUsers)(e),teamId:n,canManageOthersWebhooks:a,enableIncomingWebhooks:m}},function(e){return{actions:Object(B.bindActionCreators)({getIncomingHooks:bt.getIncomingHooks,removeIncomingHook:bt.removeIncomingHook},e)}})(an),rn=n(137),sn=n(67),cn=n(780),ln=n(581);function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pn(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pn(this,dn(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&mn(e.prototype,t),n&&mn(e,n)}(t,[{key:"render",value:function(){var e=this,t=[m.a.createElement("option",{key:"",value:""},_.localizeMessage("channel_select.placeholder","--- Select a channel ---"))];return this.props.channels.forEach(function(n){var a=n.display_name||n.name;n.type===ee.D.OPEN_CHANNEL&&e.props.selectOpen?t.push(m.a.createElement("option",{key:n.id,value:n.id},a)):n.type===ee.D.PRIVATE_CHANNEL&&e.props.selectPrivate?t.push(m.a.createElement("option",{key:n.id,value:n.id},a)):n.type===ee.D.DM_CHANNEL&&e.props.selectDm&&t.push(m.a.createElement("option",{key:n.id,value:n.id},a))}),m.a.createElement("select",{className:"form-control",value:this.props.value,onChange:this.props.onChange},t)}}],[{key:"propTypes",get:function(){return{channels:d.a.array.isRequired,onChange:d.a.func,value:d.a.string,selectOpen:d.a.bool.isRequired,selectPrivate:d.a.bool.isRequired,selectDm:d.a.bool.isRequired}}},{key:"defaultProps",get:function(){return{selectOpen:!1,selectPrivate:!1,selectDm:!1}}}]),t}();function gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var bn=Object(sn.createSelector)(yt.getMyChannels,cn.getCurrentUserLocale,function(e,t){return gn(e).sort(ln.sortChannelsByTypeAndDisplayName.bind(null,t))});var yn=Object(a.connect)(function(e){return{channels:bn(e)}})(hn);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wn(kn(kn(n=function(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?kn(e):t}(this,En(t).call(this,e)))),"getStateFromHook",function(e){return{displayName:e.display_name||"",description:e.description||"",channelId:e.channel_id||"",channelLocked:e.channel_locked||!1,username:e.username||"",iconURL:e.icon_url||"",saving:!1,serverError:"",clientError:null}}),wn(kn(kn(n)),"handleSubmit",function(e){if(e.preventDefault(),!n.state.saving)if(n.setState({saving:!0,serverError:"",clientError:""}),n.state.channelId){var t={channel_id:n.state.channelId,channel_locked:n.state.channelLocked,display_name:n.state.displayName,description:n.state.description,username:n.state.username,icon_url:n.state.iconURL};n.props.action(t).then(function(){return n.setState({saving:!1})})}else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_incoming_webhook.channelRequired",defaultMessage:"A valid channel is required"})})}),wn(kn(kn(n)),"updateDisplayName",function(e){n.setState({displayName:e.target.value})}),wn(kn(kn(n)),"updateDescription",function(e){n.setState({description:e.target.value})}),wn(kn(kn(n)),"updateChannelId",function(e){n.setState({channelId:e.target.value})}),wn(kn(kn(n)),"updateChannelLocked",function(e){n.setState({channelLocked:e.target.checked})}),wn(kn(kn(n)),"updateUsername",function(e){n.setState({username:e.target.value})}),wn(kn(kn(n)),"updateIconURL",function(e){n.setState({iconURL:e.target.value})}),n.state=n.getStateFromHook(n.props.initialHook||{}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,m.a.Component),function(e,t,n){t&&_n(e.prototype,t),n&&_n(e,n)}(t,[{key:"render",value:function(){var e=this.props.header,t=this.props.footer;return m.a.createElement("div",{className:"backstage-content"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/incoming_webhooks")},m.a.createElement(v.c,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"})),m.a.createElement(v.c,{id:e.id,defaultMessage:e.defaultMessage})),m.a.createElement("div",{className:"backstage-form"},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},m.a.createElement(v.c,{id:"add_incoming_webhook.displayName",defaultMessage:"Title"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.displayName.help",defaultMessage:"Choose a title to be displayed on the webhook settings page. Maximum 64 characters."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},m.a.createElement(v.c,{id:"add_incoming_webhook.description",defaultMessage:"Description"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"description",type:"text",maxLength:"500",className:"form-control",value:this.state.description,onChange:this.updateDescription}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},m.a.createElement(v.c,{id:"add_incoming_webhook.channel",defaultMessage:"Channel"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement(yn,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0,selectPrivate:!0}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.channel.help",defaultMessage:"The default public or private channel that receives the webhook payloads. You must belong to the private channel when setting up the webhook."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelLocked"},m.a.createElement(v.c,{id:"add_incoming_webhook.channelLocked",defaultMessage:"Lock to this channel"})),m.a.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},m.a.createElement("input",{id:"channelLocked",type:"checkbox",checked:this.state.channelLocked,onChange:this.updateChannelLocked}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.channelLocked.help",defaultMessage:"If set, the incoming webhook can only post to the channel selected above."})))),this.props.enablePostUsernameOverride&&m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},m.a.createElement(v.c,{id:"add_incoming_webhook.username",defaultMessage:"Username"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"username",type:"text",maxLength:"22",className:"form-control",value:this.state.username,onChange:this.updateUsername}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.username.help",defaultMessage:'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and ".".'})))),this.props.enablePostIconOverride&&m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconURL"},m.a.createElement(v.c,{id:"add_incoming_webhook.icon_url",defaultMessage:"Profile Picture"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"iconURL",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconURL,onChange:this.updateIconURL}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_incoming_webhook.icon_url.help",defaultMessage:"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement($e.a,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),m.a.createElement(A.a,{className:"btn btn-sm",to:"/".concat(this.props.team.name,"/integrations/incoming_webhooks")},m.a.createElement(v.c,{id:"add_incoming_webhook.cancel",defaultMessage:"Cancel"})),m.a.createElement(ct,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},m.a.createElement(v.c,{id:t.id,defaultMessage:t.defaultMessage}))))))}}]),t}();function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function Nn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wn(jn,"propTypes",{team:d.a.object.isRequired,header:d.a.object.isRequired,footer:d.a.object.isRequired,serverError:d.a.string.isRequired,initialHook:d.a.object,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired,action:d.a.func.isRequired});var Tn={id:Object(Pt.b)("integrations.add"),defaultMessage:"Add"},xn={id:Object(Pt.b)("add_incoming_webhook.save"),defaultMessage:"Save"},In=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rn(An(An(n=function(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?An(e):t}(this,Pn(t).call(this,e)))),"addIncomingHook",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){Cn(r,a,o,i,s,"next",e)}function s(e){Cn(r,a,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.createIncomingHook(t);case 3:if(a=e.sent,!(o=a.data)){e.next=8;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/confirm?type=incoming_webhooks&id=").concat(o.id)),e.abrupt("return");case 8:n.props.createIncomingHookRequest.error&&n.setState({serverError:n.props.createIncomingHookRequest.error.message});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.state={serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Nn(e.prototype,t),n&&Nn(e,n)}(t,[{key:"render",value:function(){return m.a.createElement(jn,{team:this.props.team,header:Tn,footer:xn,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride,action:this.addIncomingHook,serverError:this.state.serverError})}}]),t}();Rn(In,"propTypes",{team:d.a.object.isRequired,createIncomingHookRequest:d.a.object.isRequired,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired,actions:d.a.shape({createIncomingHook:d.a.func.isRequired}).isRequired});var qn=Object(a.connect)(function(e){var t=Object(s.getConfig)(e),n="true"===t.EnablePostUsernameOverride,a="true"===t.EnablePostIconOverride;return{createIncomingHookRequest:e.requests.integrations.createIncomingHook,enablePostUsernameOverride:n,enablePostIconOverride:a}},function(e){return{actions:Object(B.bindActionCreators)({createIncomingHook:bt.createIncomingHook},e)}})(In);function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function Hn(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){Un(r,a,o,i,s,"next",e)}function s(e){Un(r,a,o,i,s,"throw",e)}i(void 0)})}}function Wn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn={id:Object(Pt.b)("integrations.edit"),defaultMessage:"Edit"},Yn={id:Object(Pt.b)("update_incoming_webhook.update"),defaultMessage:"Update"},Kn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gn(zn(zn(n=function(e,t){return!t||"object"!==Dn(t)&&"function"!=typeof t?zn(e):t}(this,Ln(t).call(this,e)))),"editIncomingHook",function(){var e=Hn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.newHook=t,n.props.hook.id&&(t.id=n.props.hook.id),n.props.hook.token&&(t.token=n.props.hook.token),e.next=5,n.submitHook();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Gn(zn(zn(n)),"submitHook",Hn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.updateIncomingHook(n.newHook);case 3:if(t=e.sent,!t.data){e.next=8;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/incoming_webhooks")),e.abrupt("return");case 8:n.props.updateIncomingHookRequest.error&&n.setState({serverError:n.props.updateIncomingHookRequest.error.message});case 9:case"end":return e.stop()}},e,this)}))),n.state={showConfirmModal:!1,serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Wn(e.prototype,t),n&&Wn(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.enableIncomingWebhooks&&this.props.actions.getIncomingHook(this.props.hookId)}},{key:"render",value:function(){return this.props.hook?m.a.createElement(jn,{team:this.props.team,header:Bn,footer:Yn,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride,action:this.editIncomingHook,serverError:this.state.serverError,initialHook:this.props.hook}):m.a.createElement(Z.a,null)}}]),t}();Gn(Kn,"propTypes",{team:d.a.object.isRequired,hook:d.a.object,hookId:d.a.string.isRequired,updateIncomingHookRequest:d.a.object.isRequired,enableIncomingWebhooks:d.a.bool.isRequired,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired,actions:d.a.shape({updateIncomingHook:d.a.func.isRequired,getIncomingHook:d.a.func.isRequired}).isRequired});var Jn=Object(a.connect)(function(e,t){var n=Object(s.getConfig)(e),a="true"===n.EnableIncomingWebhooks,o="true"===n.EnablePostUsernameOverride,r="true"===n.EnablePostIconOverride,i=new URLSearchParams(t.location.search).get("id");return{hookId:i,hook:e.entities.integrations.incomingHooks[i],updateIncomingHookRequest:e.requests.integrations.updateIncomingHook,enableIncomingWebhooks:a,enablePostUsernameOverride:o,enablePostIconOverride:r}},function(e){return{actions:Object(B.bindActionCreators)({updateIncomingHook:bt.updateIncomingHook,getIncomingHook:bt.getIncomingHook},e)}})(Kn);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ea=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?Qn(e):t}(this,Zn(t).call(this,e))).handleRegenToken=n.handleRegenToken.bind(Qn(Qn(n))),n.handleDelete=n.handleDelete.bind(Qn(Qn(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Xn(e.prototype,t),n&&Xn(e,n)}(t,[{key:"handleRegenToken",value:function(e){e.preventDefault(),this.props.onRegenToken(this.props.outgoingWebhook)}},{key:"handleDelete",value:function(){this.props.onDelete(this.props.outgoingWebhook)}},{key:"makeDisplayName",value:function(e,t){return e.display_name?e.display_name:t?t.display_name:m.a.createElement(v.c,{id:"installed_outgoing_webhooks.unknown_channel",defaultMessage:"A Private Webhook"})}},{key:"matchesFilter",value:function(e,t,n){if(!n)return!0;var a=e.display_name,o=e.description,r=e.trigger_words;if(a&&-1!==a.toLowerCase().indexOf(n)||o&&-1!==o.toLowerCase().indexOf(n))return!0;if(r){var i=!0,s=!1,c=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){if(-1!==l.value.toLowerCase().indexOf(n))return!0}}catch(e){s=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}}return!(!t||!t.name||-1===t.name.toLowerCase().indexOf(n))}},{key:"render",value:function(){var e=this.props.outgoingWebhook,t=this.props.channel,n=this.props.filter?this.props.filter.toLowerCase():"";if(e&&!this.matchesFilter(e,t,n))return null;var a=this.makeDisplayName(e,t),o=null;e.description&&(o=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__description"},e.description)));var r=null;e.trigger_words&&e.trigger_words.length>0&&(r=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__trigger-words"},m.a.createElement(v.c,{id:"installed_integrations.triggerWords",defaultMessage:"Trigger Words: {triggerWords}",values:{triggerWords:e.trigger_words.join(", ")}}))));var i,s=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(v.c,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}})));0===e.trigger_when?i=m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWordsTriggerWhenFullWord",defaultMessage:"First word matches a trigger word exactly"}):1===e.trigger_when&&(i=m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWordsTriggerWhenStartsWith",defaultMessage:"First word starts with a trigger word"}));var c=null;return this.props.canChange&&(c=m.a.createElement("div",{className:"item-actions"},m.a.createElement("button",{className:"style--none color--link",onClick:this.handleRegenToken},m.a.createElement(v.c,{id:"installed_integrations.regenToken",defaultMessage:"Regen Token"}))," - ",m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/outgoing_webhooks/edit?id=").concat(e.id)},m.a.createElement(v.c,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",m.a.createElement(Gt,{messageId:Object(Pt.b)("installed_outgoing_webhooks.delete.confirm"),onDelete:this.handleDelete}))),m.a.createElement("div",{className:"backstage-list__item"},m.a.createElement("div",{className:"item-details"},m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__name"},a)),o,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__content_type"},m.a.createElement(v.c,{id:"installed_integrations.content_type",defaultMessage:"Content-Type: {contentType}",values:{contentType:e.content_type||"application/x-www-form-urlencoded"}}))),r,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__trigger-when"},m.a.createElement(v.c,{id:"installed_integrations.triggerWhen",defaultMessage:"Trigger When: {triggerWhen}",values:{triggerWhen:i}}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__token"},m.a.createElement(v.c,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:e.token}}),m.a.createElement(Ut,{value:e.token}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__creation"},m.a.createElement(v.c,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}}))),s),c)}}]),t}();function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ea,"propTypes",{outgoingWebhook:d.a.object.isRequired,onRegenToken:d.a.func.isRequired,onDelete:d.a.func.isRequired,filter:d.a.string,creator:d.a.object.isRequired,canChange:d.a.bool.isRequired,team:d.a.object.isRequired,channel:d.a.object});var sa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ia(ra(ra(n=function(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?ra(e):t}(this,aa(t).call(this,e)))),"regenOutgoingWebhookToken",function(e){n.props.actions.regenOutgoingHookToken(e.id)}),ia(ra(ra(n)),"removeOutgoingHook",function(e){n.props.actions.removeOutgoingHook(e.id)}),n.outgoingWebhookCompare=n.outgoingWebhookCompare.bind(ra(ra(n))),n.state={loading:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&na(e.prototype,t),n&&na(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableOutgoingWebhooks&&this.props.actions.getOutgoingHooks("",this.props.teamId,ee.D.Integrations.START_PAGE_NUM,ee.D.Integrations.PAGE_SIZE).then(function(){return e.setState({loading:!1})})}},{key:"outgoingWebhookCompare",value:function(e,t){var n=e.display_name;if(!n){var a=this.props.channels[e.channel_id];n=a?a.display_name:_.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}var o=t.display_name;if(!o){var r=this.props.channels[t.channel_id];o=r?r.display_name:_.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}return n.localeCompare(o)}},{key:"render",value:function(){var e=this,t=this.props.outgoingWebhooks.sort(this.outgoingWebhookCompare).map(function(t){var n=e.props.canManageOthersWebhooks||e.props.user.id===t.creator_id,a=e.props.channels[t.channel_id];return m.a.createElement(ea,{key:t.id,outgoingWebhook:t,onRegenToken:e.regenOutgoingWebhookToken,onDelete:e.removeOutgoingHook,creator:e.props.users[t.creator_id]||{},canChange:n,team:e.props.team,channel:a})});return m.a.createElement(St,{header:m.a.createElement(v.c,{id:"installed_outgoing_webhooks.header",defaultMessage:"Installed Outgoing Webhooks"}),addText:m.a.createElement(v.c,{id:"installed_outgoing_webhooks.add",defaultMessage:"Add Outgoing Webhook"}),addLink:"/"+this.props.team.name+"/integrations/outgoing_webhooks/add",emptyText:m.a.createElement(v.c,{id:"installed_outgoing_webhooks.empty",defaultMessage:"No outgoing webhooks found"}),helpText:m.a.createElement(v.c,{id:"installed_outgoing_webhooks.help",defaultMessage:"Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-outgoing.html"},m.a.createElement(v.c,{id:"installed_outgoing_webhooks.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},m.a.createElement(v.c,{id:"installed_outgoing_webhooks.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:_.localizeMessage("installed_outgoing_webhooks.search","Search Outgoing Webhooks"),loading:this.state.loading},t)}}]),t}();ia(sa,"propTypes",{team:d.a.object,user:d.a.object,canManageOthersWebhooks:d.a.bool,outgoingWebhooks:d.a.array,channels:d.a.object,users:d.a.object,teamId:d.a.string,actions:d.a.shape({removeOutgoingHook:d.a.func,getOutgoingHooks:d.a.func,regenOutgoingHookToken:d.a.func}),enableOutgoingWebhooks:d.a.bool});var ca=Object(a.connect)(function(e){var t=Object(s.getConfig)(e),n=Object(i.getCurrentTeamId)(e),a=Object(c.haveITeamPermission)(e,{team:n,permission:l.Permissions.MANAGE_OTHERS_WEBHOOKS}),o=Object(vt.getOutgoingHooks)(e),u=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return e.team_id===n}),m="true"===t.EnableOutgoingWebhooks;return{outgoingWebhooks:u,channels:Object(yt.getAllChannels)(e),users:Object(r.getUsers)(e),teamId:n,canManageOthersWebhooks:a,enableOutgoingWebhooks:m}},function(e){return{actions:Object(B.bindActionCreators)({getOutgoingHooks:bt.getOutgoingHooks,removeOutgoingHook:bt.removeOutgoingHook,regenOutgoingHookToken:bt.regenOutgoingHookToken},e)}})(sa),la=(n(235),n(595));function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ga=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ha(fa(fa(n=function(e,t){return!t||"object"!==ua(t)&&"function"!=typeof t?fa(e):t}(this,pa(t).call(this,e)))),"getStateFromHook",function(e){var t="";if(e.trigger_words){var n=0;for(n=0;n<e.trigger_words.length;n++)t+=e.trigger_words[n]+"\n"}var a="";if(e.callback_urls){var o=0;for(o=0;o<e.callback_urls.length;o++)a+=e.callback_urls[o]+"\n"}return{displayName:e.display_name||"",description:e.description||"",contentType:e.content_type||"application/x-www-form-urlencoded",channelId:e.channel_id||"",triggerWords:t,triggerWhen:e.trigger_when||0,callbackUrls:a,saving:!1,clientError:null,username:e.username||"",iconURL:e.icon_url||""}}),ha(fa(fa(n)),"handleSubmit",function(e){if(e.preventDefault(),!n.state.saving){n.setState({saving:!0,clientError:""});var t=[];if(n.state.triggerWords){var a=!0,o=!1,r=void 0;try{for(var i,s=n.state.triggerWords.split("\n")[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;(c=c.trim()).length>0&&t.push(c)}}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}}if(n.state.channelId||0!==t.length){var l=[],u=!0,p=!1,d=void 0;try{for(var f,h=n.state.callbackUrls.split("\n")[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var g=f.value;(g=g.trim()).length>0&&l.push(g)}}catch(e){p=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(p)throw d}}if(0!==l.length){var b={team_id:la.a.getCurrentId(),channel_id:n.state.channelId,trigger_words:t,trigger_when:parseInt(n.state.triggerWhen,10),callback_urls:l,display_name:n.state.displayName,content_type:n.state.contentType,description:n.state.description,username:n.state.username,icon_url:n.state.iconURL};n.props.action(b).then(function(){return n.setState({saving:!1})})}else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_outgoing_webhook.callbackUrlsRequired",defaultMessage:"One or more callback URLs are required"})})}else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWordsOrChannelRequired",defaultMessage:"A valid channel or a list of trigger words is required"})})}}),ha(fa(fa(n)),"updateDisplayName",function(e){n.setState({displayName:e.target.value})}),ha(fa(fa(n)),"updateDescription",function(e){n.setState({description:e.target.value})}),ha(fa(fa(n)),"updateContentType",function(e){n.setState({contentType:e.target.value})}),ha(fa(fa(n)),"updateChannelId",function(e){n.setState({channelId:e.target.value})}),ha(fa(fa(n)),"updateTriggerWords",function(e){n.setState({triggerWords:e.target.value})}),ha(fa(fa(n)),"updateTriggerWhen",function(e){n.setState({triggerWhen:e.target.value})}),ha(fa(fa(n)),"updateCallbackUrls",function(e){n.setState({callbackUrls:e.target.value})}),ha(fa(fa(n)),"updateUsername",function(e){n.setState({username:e.target.value})}),ha(fa(fa(n)),"updateIconURL",function(e){n.setState({iconURL:e.target.value})}),n.state=n.getStateFromHook(n.props.initialHook||{}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(t,m.a.Component),function(e,t,n){t&&ma(e.prototype,t),n&&ma(e,n)}(t,[{key:"render",value:function(){var e=this.props.header,t=this.props.footer,n=this.props.renderExtra;return m.a.createElement("div",{className:"backstage-content"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/outgoing_webhooks")},m.a.createElement(v.c,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"})),m.a.createElement(v.c,{id:e.id,defaultMessage:e.defaultMessage})),m.a.createElement("div",{className:"backstage-form"},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},m.a.createElement(v.c,{id:"add_outgoing_webhook.displayName",defaultMessage:"Title"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.displayName.help",defaultMessage:"Choose a title to be displayed on the webhook settings page. Maximum 64 characters."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},m.a.createElement(v.c,{id:"add_outgoing_webhook.description",defaultMessage:"Description"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"description",type:"text",maxLength:"500",className:"form-control",value:this.state.description,onChange:this.updateDescription}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"contentType"},m.a.createElement(v.c,{id:"add_outgoing_webhook.content_Type",defaultMessage:"Content Type"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("select",{className:"form-control",value:this.state.contentType,onChange:this.updateContentType},m.a.createElement("option",{value:"application/x-www-form-urlencoded"},"application/x-www-form-urlencoded"),m.a.createElement("option",{value:"application/json"},"application/json")),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.contentType.help1",defaultMessage:"Choose the content type by which the request will be sent."})),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.contentType.help2",defaultMessage:"If application/x-www-form-urlencoded is chosen, the server will encode the parameters in a URL format in the request body."})),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.contentType.help3",defaultMessage:"If application/json is chosen, the server will format the request body as JSON."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},m.a.createElement(v.c,{id:"add_outgoing_webhook.channel",defaultMessage:"Channel"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement(yn,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.channel.help",defaultMessage:"Public channel that delivers payload to webhook. Optional if at least one Trigger Word is specified."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWords",defaultMessage:"Trigger Words (One Per Line)"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("textarea",{id:"triggerWords",rows:"3",maxLength:"1000",className:"form-control",value:this.state.triggerWords,onChange:this.updateTriggerWords}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWords.help",defaultMessage:"Messages that start with one of the specified words will trigger the outgoing webhook. Optional if Channel is selected."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWordsTriggerWhen",defaultMessage:"Trigger When"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("select",{className:"form-control",value:this.state.triggerWhen,onChange:this.updateTriggerWhen},m.a.createElement("option",{value:"0"},Object(_.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenFullWord","First word matches a trigger word exactly")),m.a.createElement("option",{value:"1"},Object(_.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenStartsWith","First word starts with a trigger word"))),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.triggerWordsTriggerWhen.help",defaultMessage:"Choose when to trigger the outgoing webhook; if the first word of a message matches a Trigger Word exactly, or if it starts with a Trigger Word."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"callbackUrls"},m.a.createElement(v.c,{id:"add_outgoing_webhook.callbackUrls",defaultMessage:"Callback URLs (One Per Line)"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("textarea",{id:"callbackUrls",rows:"3",maxLength:"1000",className:"form-control",value:this.state.callbackUrls,onChange:this.updateCallbackUrls}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.callbackUrls.help",defaultMessage:"The URL that messages will be sent to. If the URL is private, add it as a {link}.",values:{link:m.a.createElement("a",{href:"https://about.mattermost.com/default-allow-internal-connections-settings-documentation/",target:"_blank",rel:"noopener noreferrer"},m.a.createElement(v.c,{id:"add_outgoing_webhook.callbackUrls.helpLinkText",defaultMessage:"trusted internal connection"}))}})))),this.props.enablePostUsernameOverride&&m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},m.a.createElement(v.c,{id:"add_outgoing_webhook.username",defaultMessage:"Username"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"username",type:"text",maxLength:"22",className:"form-control",value:this.state.username,onChange:this.updateUsername}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.username.help",defaultMessage:'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and ".".'})))),this.props.enablePostIconOverride&&m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconURL"},m.a.createElement(v.c,{id:"add_outgoing_webhook.icon_url",defaultMessage:"Profile Picture"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"iconURL",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconURL,onChange:this.updateIconURL}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_outgoing_webhook.icon_url.help",defaultMessage:"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement($e.a,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),m.a.createElement(A.a,{className:"btn btn-sm",to:"/".concat(this.props.team.name,"/integrations/outgoing_webhooks")},m.a.createElement(v.c,{id:"add_outgoing_webhook.cancel",defaultMessage:"Cancel"})),m.a.createElement(ct,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},m.a.createElement(v.c,{id:t.id,defaultMessage:t.defaultMessage})),n))))}}]),t}();function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function va(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ea(e,t){return(Ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ha(ga,"propTypes",{team:d.a.object.isRequired,header:d.a.object.isRequired,footer:d.a.object.isRequired,renderExtra:d.a.node.isRequired,serverError:d.a.string.isRequired,initialHook:d.a.object,action:d.a.func.isRequired,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired});var wa={id:Object(Pt.b)("integrations.add"),defaultMessage:"Add"},ja={id:Object(Pt.b)("add_outgoing_webhook.save"),defaultMessage:"Save"},Sa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ka(Oa(Oa(n=function(e,t){return!t||"object"!==ba(t)&&"function"!=typeof t?Oa(e):t}(this,_a(t).call(this,e)))),"addOutgoingHook",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){ya(r,a,o,i,s,"next",e)}function s(e){ya(r,a,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.createOutgoingHook(t);case 3:if(a=e.sent,!(o=a.data)){e.next=8;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/confirm?type=outgoing_webhooks&id=").concat(o.id)),e.abrupt("return");case 8:n.props.createOutgoingHookRequest.error&&n.setState({serverError:n.props.createOutgoingHookRequest.error.message});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.state={serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ea(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&va(e.prototype,t),n&&va(e,n)}(t,[{key:"render",value:function(){return m.a.createElement(ga,{team:this.props.team,header:wa,footer:ja,renderExtra:"",action:this.addOutgoingHook,serverError:this.state.serverError,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride})}}]),t}();ka(Sa,"propTypes",{team:d.a.object.isRequired,createOutgoingHookRequest:d.a.object.isRequired,actions:d.a.shape({createOutgoingHook:d.a.func.isRequired}).isRequired,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired});var Ca=Object(a.connect)(function(e){var t=Object(s.getConfig)(e),n="true"===t.EnablePostUsernameOverride,a="true"===t.EnablePostIconOverride;return{createOutgoingHookRequest:e.requests.integrations.createOutgoingHook,enablePostUsernameOverride:n,enablePostIconOverride:a}},function(e){return{actions:Object(B.bindActionCreators)({createOutgoingHook:bt.createOutgoingHook},e)}})(Sa);function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function Ma(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){Pa(r,a,o,i,s,"next",e)}function s(e){Pa(r,a,o,i,s,"throw",e)}i(void 0)})}}function Aa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qa={id:"integrations.edit",defaultMessage:"Edit"},Da={id:"update_outgoing_webhook.update",defaultMessage:"Update"},Ua=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ia(xa(xa(n=function(e,t){return!t||"object"!==Na(t)&&"function"!=typeof t?xa(e):t}(this,Ra(t).call(this,e)))),"editOutgoingHook",function(){var e=Ma(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newHook=t,n.props.hook.id&&(t.id=n.props.hook.id),n.props.hook.token&&(t.token=n.props.hook.token),a=n.props.hook.trigger_words.length===t.trigger_words.length&&n.props.hook.trigger_words.every(function(e,n){return e===t.trigger_words[n]}),o=n.props.hook.callback_urls.length===t.callback_urls.length&&n.props.hook.callback_urls.every(function(e,n){return e===t.callback_urls[n]}),n.props.hook.content_type===t.content_type&&a&&o){e.next=9;break}n.handleConfirmModal(),e.next=11;break;case 9:return e.next=11,n.submitHook();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Ia(xa(xa(n)),"handleConfirmModal",function(){n.setState({showConfirmModal:!0})}),Ia(xa(xa(n)),"confirmModalDismissed",function(){n.setState({showConfirmModal:!1})}),Ia(xa(xa(n)),"submitHook",Ma(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.updateOutgoingHook(n.newHook);case 3:if(t=e.sent,!t.data){e.next=8;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/outgoing_webhooks")),e.abrupt("return");case 8:n.setState({showConfirmModal:!1}),n.props.updateOutgoingHookRequest.error&&n.setState({serverError:n.props.updateOutgoingHookRequest.error.message});case 10:case"end":return e.stop()}},e,this)}))),Ia(xa(xa(n)),"renderExtra",function(){var e=m.a.createElement(v.c,{id:"update_outgoing_webhook.update",defaultMessage:"Update"}),t=m.a.createElement(v.c,{id:"update_outgoing_webhook.confirm",defaultMessage:"Edit Outgoing Webhook"}),a=m.a.createElement(v.c,{id:"update_outgoing_webhook.question",defaultMessage:"Your changes may break the existing outgoing webhook. Are you sure you would like to update it?"});return m.a.createElement(te.a,{title:t,message:a,confirmButtonText:e,show:n.state.showConfirmModal,onConfirm:n.submitHook,onCancel:n.confirmModalDismissed})}),n.state={showConfirmModal:!1,serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Aa(e.prototype,t),n&&Aa(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.enableOutgoingWebhooks&&this.props.actions.getOutgoingHook(this.props.hookId)}},{key:"render",value:function(){return this.props.hook?m.a.createElement(ga,{team:this.props.team,header:qa,footer:Da,renderExtra:this.renderExtra(),action:this.editOutgoingHook,serverError:this.state.serverError,initialHook:this.props.hook,enablePostUsernameOverride:this.props.enablePostUsernameOverride,enablePostIconOverride:this.props.enablePostIconOverride}):m.a.createElement(Z.a,null)}}]),t}();Ia(Ua,"propTypes",{team:d.a.object.isRequired,hook:d.a.object,hookId:d.a.string.isRequired,updateOutgoingHookRequest:d.a.object.isRequired,actions:d.a.shape({updateOutgoingHook:d.a.func.isRequired,getOutgoingHook:d.a.func.isRequired}).isRequired,enableOutgoingWebhooks:d.a.bool,enablePostUsernameOverride:d.a.bool.isRequired,enablePostIconOverride:d.a.bool.isRequired});var Ha=Object(a.connect)(function(e,t){var n=Object(s.getConfig)(e),a=new URLSearchParams(t.location.search).get("id"),o="true"===n.EnableOutgoingWebhooks,r="true"===n.EnablePostUsernameOverride,i="true"===n.EnablePostIconOverride;return{hookId:a,hook:e.entities.integrations.outgoingHooks[a],updateOutgoingHookRequest:e.requests.integrations.createOutgoingHook,enableOutgoingWebhooks:o,enablePostUsernameOverride:r,enablePostIconOverride:i}},function(e){return{actions:Object(B.bindActionCreators)({updateOutgoingHook:bt.updateOutgoingHook,getOutgoingHook:bt.getOutgoingHook},e)}})(Ua),Wa=(n(237),n(550));function La(e){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ga(e,t){return(Ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ka="***************",Ja=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ya(Ba(Ba(n=function(e,t){return!t||"object"!==La(t)&&"function"!=typeof t?Ba(e):t}(this,za(t).call(this,e)))),"handleShowClientSecret",function(e){e&&e.preventDefault&&e.preventDefault(),n.setState({clientSecret:n.props.oauthApp.client_secret})}),Ya(Ba(Ba(n)),"handleHideClientSecret",function(e){e.preventDefault(),n.setState({clientSecret:Ka})}),Ya(Ba(Ba(n)),"handleRegenerate",function(e){e.preventDefault(),n.props.onRegenerateSecret(n.props.oauthApp.id).then(function(){var e=n.props.regenOAuthAppSecretRequest.error;e?n.setState({error:e.message}):(n.setState({error:null}),n.handleShowClientSecret())})}),Ya(Ba(Ba(n)),"handleDelete",function(){n.props.onDelete(n.props.oauthApp)}),Ya(Ba(Ba(n)),"matchesFilter",function(e,t){return!t||-1!==e.name.toLowerCase().indexOf(t)}),n.state={clientSecret:Ka},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ga(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Fa(e.prototype,t),n&&Fa(e,n)}(t,[{key:"render",value:function(){var e,t,n,a=this.props.oauthApp;if(this.state.error&&(e=m.a.createElement($e.a,{error:this.state.error})),!this.matchesFilter(a,this.props.filter))return null;t=a.name?a.name:m.a.createElement(v.c,{id:"installed_integrations.unnamed_oauth_app",defaultMessage:"Unnamed OAuth 2.0 Application"}),a.description&&(n=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__description"},a.description)));var o,r,i,s=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(v.c,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:a.callback_urls.join(", ")}})));o=a.is_trusted?_.localizeMessage("installed_oauth_apps.trusted.yes","Yes"):_.localizeMessage("installed_oauth_apps.trusted.no","No"),this.state.clientSecret===Ka?(r=m.a.createElement("button",{id:"showSecretButton",className:"style--none color--link",onClick:this.handleShowClientSecret},m.a.createElement(v.c,{id:"installed_integrations.showSecret",defaultMessage:"Show Secret"})),i=m.a.createElement("span",{className:"item-details__token"},m.a.createElement(v.c,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: **{clientSecret}**",values:{clientSecret:this.state.clientSecret}}))):(r=m.a.createElement("button",{id:"hideSecretButton",className:"style--none color--link",onClick:this.handleHideClientSecret},m.a.createElement(v.c,{id:"installed_integrations.hideSecret",defaultMessage:"Hide Secret"})),i=m.a.createElement("span",{className:"item-details__token"},m.a.createElement(Wa.a,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: **{clientSecret}**",values:{clientSecret:this.state.clientSecret}}),m.a.createElement(Ut,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:this.state.clientSecret})));var c,l=m.a.createElement("button",{id:"regenerateSecretButton",className:"style--none color--link",onClick:this.handleRegenerate},m.a.createElement(v.c,{id:"installed_integrations.regenSecret",defaultMessage:"Regenerate Secret"}));return a.icon_url&&(c=m.a.createElement("div",{className:"integration__icon integration-list__icon"},m.a.createElement("img",{src:a.icon_url}))),m.a.createElement("div",{className:"backstage-list__item"},c,m.a.createElement("div",{className:"item-details"},m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__name"},t)),e,n,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(Wa.a,{id:"installed_oauth_apps.is_trusted",defaultMessage:"Is Trusted: **{isTrusted}**",values:{isTrusted:o}}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__token"},m.a.createElement(Wa.a,{id:"installed_integrations.client_id",defaultMessage:"Client ID: **{clientId}**",values:{clientId:a.id}}),m.a.createElement(Ut,{idMessage:"integrations.copy_client_id",defaultMessage:"Copy Client Id",value:a.id}))),m.a.createElement("div",{className:"item-details__row"},i),s,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__creation"},m.a.createElement(v.c,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:_.getDisplayNameByUserId(a.creator_id),createAt:a.create_at}})))),m.a.createElement("div",{className:"item-actions"},r," - ",l," - ",m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/oauth2-apps/edit?id=").concat(a.id)},m.a.createElement(v.c,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",m.a.createElement(Gt,{messageId:Object(Pt.b)("installed_oauth_apps.delete.confirm"),onDelete:this.handleDelete})))}}]),t}();function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ya(Ja,"propTypes",{team:d.a.object,oauthApp:d.a.object.isRequired,regenOAuthAppSecretRequest:d.a.object.isRequired,onRegenerateSecret:d.a.func.isRequired,onDelete:d.a.func.isRequired,filter:d.a.string});var to=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eo(Qa(Qa(n=function(e,t){return!t||"object"!==Va(t)&&"function"!=typeof t?Qa(e):t}(this,Za(t).call(this,e)))),"deleteOAuthApp",function(e){e&&e.id&&n.props.actions.deleteOAuthApp(e.id)}),n.state={loading:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Xa(e.prototype,t),n&&Xa(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableOAuthServiceProvider&&this.props.actions.getOAuthApps().then(function(){return e.setState({loading:!1})})}},{key:"oauthAppCompare",value:function(e,t){var n=e.name;n||(n=Object(_.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application"));var a=t.name;return a||(a=Object(_.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application")),n.localeCompare(a)}},{key:"render",value:function(){var e,t=this,n=Object.values(this.props.oauthApps).sort(this.oauthAppCompare).map(function(e){return m.a.createElement(Ja,{key:e.id,team:t.props.team,oauthApp:e,regenOAuthAppSecretRequest:t.props.regenOAuthAppSecretRequest,onRegenerateSecret:t.props.actions.regenOAuthAppSecret,onDelete:t.deleteOAuthApp})});return this.props.enableOAuthServiceProvider&&this.props.canManageOauth&&(e={addLink:"/"+this.props.team.name+"/integrations/oauth2-apps/add",addText:Object(_.localizeMessage)("installed_oauth_apps.add","Add OAuth 2.0 Application")}),m.a.createElement(St,Object.assign({header:m.a.createElement(v.c,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),helpText:m.a.createElement(v.c,{id:"installed_oauth_apps.help",defaultMessage:"Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.",values:{oauthApplications:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.mattermost.com/developer/oauth-2-0-applications.html"},m.a.createElement(v.c,{id:"installed_oauth_apps.help.oauthApplications",defaultMessage:"OAuth 2.0 applications"})),appDirectory:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},m.a.createElement(v.c,{id:"installed_oauth_apps.help.appDirectory",defaultMessage:"App Directory"}))}}),emptyText:m.a.createElement(v.c,{id:"installed_oauth_apps.empty",defaultMessage:"No OAuth 2.0 Applications found"}),searchPlaceholder:Object(_.localizeMessage)("installed_oauth_apps.search","Search OAuth 2.0 Applications"),loading:this.state.loading},e),n)}}]),t}();eo(to,"propTypes",{team:d.a.object,oauthApps:d.a.object,canManageOauth:d.a.bool,regenOAuthAppSecretRequest:d.a.object.isRequired,actions:d.a.shape({getOAuthApps:d.a.func.isRequired,regenOAuthAppSecret:d.a.func.isRequired,deleteOAuthApp:d.a.func.isRequired}).isRequired,enableOAuthServiceProvider:d.a.bool,enableOnlyAdminIntegrations:d.a.bool});var no=Object(a.connect)(function(e){var t=Object(s.getConfig)(e),n="true"===t.EnableOAuthServiceProvider,a="true"===t.EnableOnlyAdminIntegrations;return{canManageOauth:Object(c.haveISystemPermission)(e,{permission:l.Permissions.MANAGE_OAUTH}),oauthApps:Object(vt.getOAuthApps)(e),regenOAuthAppSecretRequest:e.requests.integrations.updateOAuthApp,enableOAuthServiceProvider:n,enableOnlyAdminIntegrations:a}},function(e){return{actions:Object(B.bindActionCreators)({getOAuthApps:bt.getOAuthApps,regenOAuthAppSecret:bt.regenOAuthAppSecret,deleteOAuthApp:bt.deleteOAuthApp},e)}})(to);function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),co(so(so(n=function(e,t){return!t||"object"!==ao(t)&&"function"!=typeof t?so(e):t}(this,ro(t).call(this,e)))),"getStateFromApp",function(e){return{name:e.name||"",description:e.description||"",homepage:e.homepage||"",icon_url:e.icon_url||"",callbackUrls:e.callback_urls?e.callback_urls.join("\n"):"",is_trusted:e.is_trusted||!1,has_icon:Boolean(e.icon_url),saving:!1,clientError:null}}),co(so(so(n)),"imageLoaded",function(){n.setState({has_icon:!0,icon_url:n.refs.icon_url.value})}),co(so(so(n)),"handleSubmit",function(e){if(e.preventDefault(),!n.state.saving)if(n.setState({saving:!0,clientError:""}),n.state.name)if(n.state.description)if(n.state.homepage){var t=[],a=!0,o=!1,r=void 0;try{for(var i,s=n.state.callbackUrls.split("\n")[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;(c=c.trim()).length>0&&t.push(c)}}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}if(0!==t.length){var l={name:n.state.name,callback_urls:t,homepage:n.state.homepage,description:n.state.description,is_trusted:n.state.is_trusted,icon_url:n.state.icon_url};n.props.action(l).then(function(){return n.setState({saving:!1})})}else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_oauth_app.callbackUrlsRequired",defaultMessage:"One or more callback URLs are required."})})}else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_oauth_app.homepageRequired",defaultMessage:"Homepage for the OAuth 2.0 application is required."})});else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_oauth_app.descriptionRequired",defaultMessage:"Description for the OAuth 2.0 application is required."})});else n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_oauth_app.nameRequired",defaultMessage:"Name for the OAuth 2.0 application is required."})})}),co(so(so(n)),"updateName",function(e){n.setState({name:e.target.value})}),co(so(so(n)),"updateTrusted",function(e){n.setState({is_trusted:"true"===e.target.value})}),co(so(so(n)),"updateDescription",function(e){n.setState({description:e.target.value})}),co(so(so(n)),"updateHomepage",function(e){n.setState({homepage:e.target.value})}),co(so(so(n)),"updateIconUrl",function(e){n.setState({has_icon:!1,icon_url:e.target.value}),n.image.src=e.target.value}),co(so(so(n)),"updateCallbackUrls",function(e){n.setState({callbackUrls:e.target.value})}),n.image=new Image,n.image.onload=n.imageLoaded,n.state=n.getStateFromApp(n.props.initialApp||{}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&oo(e.prototype,t),n&&oo(e,n)}(t,[{key:"render",value:function(){var e,t=this.props.header,n=this.props.footer,a=this.props.renderExtra;this.state.has_icon&&(e=m.a.createElement("div",{className:"integration__icon"},m.a.createElement("img",{src:this.state.icon_url})));var o=m.a.createElement(P.a,{permissions:[l.Permissions.MANAGE_SYSTEM]},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"is_trusted"},m.a.createElement(v.c,{id:"installed_oauth_apps.trusted",defaultMessage:"Is Trusted"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("label",{className:"radio-inline"},m.a.createElement("input",{type:"radio",value:"true",name:"is_trusted",checked:this.state.is_trusted,onChange:this.updateTrusted}),m.a.createElement(v.c,{id:"installed_oauth_apps.trusted.yes",defaultMessage:"Yes"})),m.a.createElement("label",{className:"radio-inline"},m.a.createElement("input",{type:"radio",value:"false",name:"is_trusted",checked:!this.state.is_trusted,onChange:this.updateTrusted}),m.a.createElement(v.c,{id:"installed_oauth_apps.trusted.no",defaultMessage:"No"})),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.trusted.help",defaultMessage:"When true, the OAuth 2.0 application is considered trusted by the Mattermost server and doesn't require the user to accept authorization. When false, an additional window will appear, asking the user to accept or deny the authorization."})))));return m.a.createElement("div",{className:"backstage-content"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/oauth2-apps")},m.a.createElement(v.c,{id:"installed_oauth_apps.header",defaultMessage:"Installed OAuth2 Apps"})),m.a.createElement(v.c,{id:t.id,defaultMessage:t.defaultMessage})),m.a.createElement("div",{className:"backstage-form"},e,m.a.createElement("form",{className:"form-horizontal"},o,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"name"},m.a.createElement(v.c,{id:"installed_oauth_apps.name",defaultMessage:"Display Name"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"name",type:"text",maxLength:"64",className:"form-control",value:this.state.name,onChange:this.updateName}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.name.help",defaultMessage:"Display name for your OAuth 2.0 application made of up to 64 characters."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},m.a.createElement(v.c,{id:"installed_oauth_apps.description",defaultMessage:"Description"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"description",type:"text",maxLength:"512",className:"form-control",value:this.state.description,onChange:this.updateDescription}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.description.help",defaultMessage:"Description for your OAuth 2.0 application."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"homepage"},m.a.createElement(v.c,{id:"installed_oauth_apps.homepage",defaultMessage:"Homepage"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"homepage",type:"url",maxLength:"256",className:"form-control",value:this.state.homepage,onChange:this.updateHomepage}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.homepage.help",defaultMessage:"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"icon_url"},m.a.createElement(v.c,{id:"installed_oauth_apps.iconUrl",defaultMessage:"Icon URL"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"icon_url",ref:"icon_url",type:"url",maxLength:"512",className:"form-control",value:this.state.icon_url,onChange:this.updateIconUrl}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.icon.help",defaultMessage:"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"callbackUrls"},m.a.createElement(v.c,{id:"installed_oauth_apps.callbackUrls",defaultMessage:"Callback URLs (One Per Line)"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("textarea",{id:"callbackUrls",rows:"3",maxLength:"1024",className:"form-control",value:this.state.callbackUrls,onChange:this.updateCallbackUrls}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_oauth_app.callbackUrls.help",defaultMessage:"The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://."})))),m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement($e.a,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),m.a.createElement(A.a,{className:"btn btn-sm",to:"/".concat(this.props.team.name,"/integrations/oauth2-apps")},m.a.createElement(v.c,{id:"installed_oauth_apps.cancel",defaultMessage:"Cancel"})),m.a.createElement(ct,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},m.a.createElement(v.c,{id:n.id,defaultMessage:n.defaultMessage})),a))))}}]),t}();function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function po(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ho(e,t){return(ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}co(lo,"propTypes",{team:d.a.object.isRequired,header:d.a.object.isRequired,footer:d.a.object.isRequired,renderExtra:d.a.node.isRequired,serverError:d.a.string.isRequired,initialApp:d.a.object,action:d.a.func.isRequired});var yo={id:Object(Pt.b)("add_oauth_app.header"),defaultMessage:"Add"},vo={id:Object(Pt.b)("installed_oauth_apps.save"),defaultMessage:"Save"},_o=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bo(go(go(n=function(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?go(e):t}(this,fo(t).call(this,e)))),"addOAuthApp",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){mo(r,a,o,i,s,"next",e)}function s(e){mo(r,a,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.addOAuthApp(t);case 3:if(a=e.sent,!(o=a.data)){e.next=8;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/confirm?type=oauth2-apps&id=").concat(o.id)),e.abrupt("return");case 8:n.props.addOAuthAppRequest.error&&n.setState({serverError:n.props.addOAuthAppRequest.error.message});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.state={serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ho(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&po(e.prototype,t),n&&po(e,n)}(t,[{key:"render",value:function(){return m.a.createElement(lo,{team:this.props.team,header:yo,footer:vo,renderExtra:"",action:this.addOAuthApp,serverError:this.state.serverError})}}]),t}();bo(_o,"propTypes",{team:d.a.object,addOAuthAppRequest:d.a.object.isRequired,actions:d.a.shape({addOAuthApp:d.a.func.isRequired}).isRequired});var Eo=Object(a.connect)(function(e){return{addOAuthAppRequest:e.requests.integrations.addOAuthApp}},function(e){return{actions:Object(B.bindActionCreators)({addOAuthApp:bt.addOAuthApp},e)}})(_o);function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ko(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function wo(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){ko(r,a,o,i,s,"next",e)}function s(e){ko(r,a,o,i,s,"throw",e)}i(void 0)})}}function jo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function No(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mo={id:"integrations.edit",defaultMessage:"Edit"},Ao={id:"update_incoming_webhook.update",defaultMessage:"Update"},Ro=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Po(No(No(n=function(e,t){return!t||"object"!==Oo(t)&&"function"!=typeof t?No(e):t}(this,So(t).call(this,e)))),"editOAuthApp",function(){var e=wo(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newApp=t,n.props.oauthApp.id&&(t.id=n.props.oauthApp.id),n.props.oauthApp.token&&(t.token=n.props.oauthApp.token),!1!==(n.props.oauthApp.callback_urls.length===t.callback_urls.length&&n.props.oauthApp.callback_urls.every(function(e,n){return e===t.callback_urls[n]}))){e.next=8;break}n.handleConfirmModal(),e.next=10;break;case 8:return e.next=10,n.submitOAuthApp();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Po(No(No(n)),"handleConfirmModal",function(){n.setState({showConfirmModal:!0})}),Po(No(No(n)),"confirmModalDismissed",function(){n.setState({showConfirmModal:!1})}),Po(No(No(n)),"submitOAuthApp",wo(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.editOAuthApp(n.newApp);case 3:if(t=e.sent,a=t.data,o=t.error,!a){e.next=9;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/oauth2-apps")),e.abrupt("return");case 9:n.setState({showConfirmModal:!1}),o&&n.setState({serverError:o.message});case 11:case"end":return e.stop()}},e,this)}))),Po(No(No(n)),"renderExtra",function(){var e=m.a.createElement(v.c,{id:"update_command.update",defaultMessage:"Update"}),t=m.a.createElement(v.c,{id:"update_oauth_app.confirm",defaultMessage:"Edit OAuth 2.0 application"}),a=m.a.createElement(v.c,{id:"update_oauth_app.question",defaultMessage:"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?"});return m.a.createElement(te.a,{title:t,message:a,confirmButtonText:e,show:n.state.showConfirmModal,onConfirm:n.submitOAuthApp,onCancel:n.confirmModalDismissed})}),n.state={showConfirmModal:!1,serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&jo(e.prototype,t),n&&jo(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.enableOAuthServiceProvider&&this.props.actions.getOAuthApp(this.props.oauthAppId)}},{key:"render",value:function(){return this.props.oauthApp?m.a.createElement(lo,{team:this.props.team,header:Mo,footer:Ao,renderExtra:this.renderExtra(),action:this.editOAuthApp,serverError:this.state.serverError,initialApp:this.props.oauthApp}):m.a.createElement(Z.a,null)}}]),t}();Po(Ro,"propTypes",{team:d.a.object.isRequired,oauthAppId:d.a.string.isRequired,oauthApp:d.a.object,actions:d.a.shape({getOAuthApp:d.a.func.isRequired,editOAuthApp:d.a.func.isRequired}).isRequired,enableOAuthServiceProvider:d.a.bool});var To=Object(a.connect)(function(e,t){var n=Object(s.getConfig)(e),a=new URLSearchParams(t.location.search).get("id"),o="true"===n.EnableOAuthServiceProvider;return{oauthAppId:a,oauthApp:e.entities.integrations.oauthApps[a],enableOAuthServiceProvider:o}},function(e){return{actions:Object(B.bindActionCreators)({getOAuthApp:bt.getOAuthApp,editOAuthApp:bt.editOAuthApp},e)}})(Ro),xo=n(1899);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uo(e,t){return(Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lo=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return Wo(Ho(Ho(n=function(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?Ho(e):t}(this,(e=Do(t)).call.apply(e,[this].concat(o))))),"handleRegenToken",function(e){e.preventDefault(),n.props.onRegenToken(n.props.command)}),Wo(Ho(Ho(n)),"handleDelete",function(){n.props.onDelete(n.props.command)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&qo(e.prototype,t),n&&qo(e,n)}(t,[{key:"matchesFilter",value:function(e,t){return!t||(-1!==e.display_name.toLowerCase().indexOf(t)||-1!==e.description.toLowerCase().indexOf(t)||-1!==e.trigger.toLowerCase().indexOf(t))}},{key:"render",value:function(){var e,t=this.props.command,n=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(t,n))return null;e=t.display_name?t.display_name:m.a.createElement(v.c,{id:"installed_commands.unnamed_command",defaultMessage:"Unnamed Slash Command"});var a=null;t.description&&(a=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__description"},t.description)));var o="- /"+t.trigger;t.auto_complete&&t.auto_complete_hint&&(o+=" "+t.auto_complete_hint);var r=null;this.props.canChange&&(r=m.a.createElement("div",{className:"item-actions"},m.a.createElement("button",{className:"style--none color--link",onClick:this.handleRegenToken},m.a.createElement(v.c,{id:"installed_integrations.regenToken",defaultMessage:"Regenerate Token"}))," - ",m.a.createElement(A.a,{to:"/".concat(this.props.team.name,"/integrations/commands/edit?id=").concat(t.id)},m.a.createElement(v.c,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",m.a.createElement(Gt,{messageId:Object(Pt.b)("installed_commands.delete.confirm"),onDelete:this.handleDelete})));var i=t.token;return m.a.createElement("div",{className:"backstage-list__item"},m.a.createElement("div",{className:"item-details"},m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__name"},e),m.a.createElement("span",{className:"item-details__trigger"},o)),a,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__token"},m.a.createElement(v.c,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:i}}),m.a.createElement(Ut,{value:i}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__creation"},m.a.createElement(v.c,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:t.create_at}})))),r)}}]),t}();function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Wo(Lo,"propTypes",{team:d.a.object.isRequired,command:d.a.object.isRequired,onRegenToken:d.a.func.isRequired,onDelete:d.a.func.isRequired,filter:d.a.string,creator:d.a.object.isRequired,canChange:d.a.bool.isRequired});var Jo=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return Ko(Yo(Yo(n=function(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?Yo(e):t}(this,(e=Go(t)).call.apply(e,[this].concat(o))))),"regenCommandToken",function(e){n.props.actions.regenCommandToken(e.id)}),Ko(Yo(Yo(n)),"deleteCommand",function(e){n.props.actions.deleteCommand(e.id)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&zo(e.prototype,t),n&&zo(e,n)}(t,[{key:"commandCompare",value:function(e,t){var n=e.display_name;n||(n=_.localizeMessage("installed_commands.unnamed_command","Unnamed Slash Command"));var a=t.display_name;return a||(a=_.localizeMessage("installed_commands.unnamed_command","Unnamed Slash Command")),n.localeCompare(a)}},{key:"render",value:function(){var e=this,t=this.props.commands.filter(function(t){return t.team_id===e.props.team.id}).sort(this.commandCompare).map(function(t){var n=e.props.canManageOthersSlashCommands||e.props.user.id===t.creator_id;return m.a.createElement(Lo,{key:t.id,team:e.props.team,command:t,onRegenToken:e.regenCommandToken,onDelete:e.deleteCommand,creator:e.props.users[t.creator_id]||{},canChange:n})});return m.a.createElement(St,{header:m.a.createElement(v.c,{id:"installed_commands.header",defaultMessage:"Installed Slash Commands"}),addText:m.a.createElement(v.c,{id:"installed_commands.add",defaultMessage:"Add Slash Command"}),addLink:"/"+this.props.team.name+"/integrations/commands/add",emptyText:m.a.createElement(v.c,{id:"installed_commands.empty",defaultMessage:"No slash commands found"}),helpText:m.a.createElement(v.c,{id:"installed_commands.help",defaultMessage:"Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/slash-commands.html"},m.a.createElement(v.c,{id:"installed_commands.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},m.a.createElement(v.c,{id:"installed_commands.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:_.localizeMessage("installed_commands.search","Search Slash Commands"),loading:this.props.loading},t)}}]),t}();Ko(Jo,"propTypes",{team:d.a.object,user:d.a.object,users:d.a.object,commands:d.a.array,loading:d.a.bool,canManageOthersSlashCommands:d.a.bool,actions:d.a.shape({regenCommandToken:d.a.func.isRequired,deleteCommand:d.a.func.isRequired}).isRequired});var Vo=Object(a.connect)(function(e,t){return{canManageOthersSlashCommands:Object(c.haveITeamPermission)(e,{team:t.team.id,permission:l.Permissions.MANAGE_OTHERS_SLASH_COMMANDS})}},function(e){return{actions:Object(B.bindActionCreators)({regenCommandToken:bt.regenCommandToken,deleteCommand:bt.deleteCommand},e)}})(Jo);function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qo(e,t){return(Qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nr="P",ar=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(er(er(n=function(e,t){return!t||"object"!==Xo(t)&&"function"!=typeof t?er(e):t}(this,$o(t).call(this,e)))),"getStateFromCommand",function(e){return{displayName:e.display_name||"",description:e.description||"",trigger:e.trigger||"",url:e.url||"",method:e.method||nr,username:e.username||"",iconUrl:e.icon_url||"",autocomplete:e.auto_complete||!1,autocompleteHint:e.auto_complete_hint||"",autocompleteDescription:e.auto_complete_desc||"",saving:!1,clientError:null}}),tr(er(er(n)),"handleSubmit",function(e){if(e.preventDefault(),!n.state.saving){n.setState({saving:!0,clientError:""});var t=n.state.trigger.trim().toLowerCase();0===t.indexOf("/")&&(t=t.substr(1));var a={display_name:n.state.displayName,description:n.state.description,trigger:t,url:n.state.url.trim(),method:n.state.method,username:n.state.username,icon_url:n.state.iconUrl,auto_complete:n.state.autocomplete,team_id:n.props.team.id};a.auto_complete&&(a.auto_complete_desc=n.state.autocompleteDescription,a.auto_complete_hint=n.state.autocompleteHint),a.trigger?0!==a.trigger.indexOf("/")?-1===a.trigger.indexOf(" ")?a.trigger.length<ee.D.MIN_TRIGGER_LENGTH||a.trigger.length>ee.D.MAX_TRIGGER_LENGTH?n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_command.triggerInvalidLength",defaultMessage:"A trigger word must contain between {min} and {max} characters",values:{min:ee.D.MIN_TRIGGER_LENGTH,max:ee.D.MAX_TRIGGER_LENGTH}})}):a.url?n.props.action(a).then(function(){return n.setState({saving:!1})}):n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_command.urlRequired",defaultMessage:"A request URL is required"})}):n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_command.triggerInvalidSpace",defaultMessage:"A trigger word must not contain spaces"})}):n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_command.triggerInvalidSlash",defaultMessage:"A trigger word cannot begin with a /"})}):n.setState({saving:!1,clientError:m.a.createElement(v.c,{id:"add_command.triggerRequired",defaultMessage:"A trigger word is required"})})}}),tr(er(er(n)),"updateDisplayName",function(e){n.setState({displayName:e.target.value})}),tr(er(er(n)),"updateDescription",function(e){n.setState({description:e.target.value})}),tr(er(er(n)),"updateTrigger",function(e){n.setState({trigger:e.target.value})}),tr(er(er(n)),"updateUrl",function(e){n.setState({url:e.target.value})}),tr(er(er(n)),"updateMethod",function(e){n.setState({method:e.target.value})}),tr(er(er(n)),"updateUsername",function(e){n.setState({username:e.target.value})}),tr(er(er(n)),"updateIconUrl",function(e){n.setState({iconUrl:e.target.value})}),tr(er(er(n)),"updateAutocomplete",function(e){n.setState({autocomplete:e.target.checked})}),tr(er(er(n)),"updateAutocompleteHint",function(e){n.setState({autocompleteHint:e.target.value})}),tr(er(er(n)),"updateAutocompleteDescription",function(e){n.setState({autocompleteDescription:e.target.value})}),n.state=n.getStateFromCommand(n.props.initialCommand||{}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qo(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&Zo(e.prototype,t),n&&Zo(e,n)}(t,[{key:"render",value:function(){var e=null,t=null;return this.state.autocomplete&&(e=m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteHint"},m.a.createElement(v.c,{id:"add_command.autocompleteHint",defaultMessage:"Autocomplete Hint"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"autocompleteHint",type:"text",maxLength:"1024",className:"form-control",value:this.state.autocompleteHint,onChange:this.updateAutocompleteHint,placeholder:_.localizeMessage("add_command.autocompleteHint.placeholder","Example: [Patient Name]")}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.autocompleteHint.help",defaultMessage:"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list."})))),t=m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteDescription"},m.a.createElement(v.c,{id:"add_command.autocompleteDescription",defaultMessage:"Autocomplete Description"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.autocompleteDescription,onChange:this.updateAutocompleteDescription,placeholder:_.localizeMessage("add_command.autocompleteDescription.placeholder",'Example: "Returns search results for patient records"')}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.autocompleteDescription.help",defaultMessage:"(Optional) Short description of slash command for the autocomplete list."}))))),m.a.createElement("div",{className:"backstage-content row"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/"+this.props.team.name+"/integrations/commands"},m.a.createElement(v.c,{id:"installed_command.header",defaultMessage:"Slash Commands"})),m.a.createElement(v.c,{id:this.props.header.id,defaultMessage:this.props.header.defaultMessage})),m.a.createElement("div",{className:"backstage-form"},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},m.a.createElement(v.c,{id:"add_command.displayName",defaultMessage:"Title"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.displayName.help",defaultMessage:"Choose a title to be displayed on the slash command settings page. Maximum 64 characters."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},m.a.createElement(v.c,{id:"add_command.description",defaultMessage:"Description"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.description.help",defaultMessage:"Description for your incoming webhook."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"trigger"},m.a.createElement(v.c,{id:"add_command.trigger",defaultMessage:"Command Trigger Word"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"trigger",type:"text",maxLength:ee.D.MAX_TRIGGER_LENGTH,className:"form-control",value:this.state.trigger,onChange:this.updateTrigger,placeholder:_.localizeMessage("add_command.trigger.placeholder",'Command trigger e.g. "hello" not including the slash')}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.trigger.help",defaultMessage:"Trigger word must be unique, and cannot begin with a slash or contain any spaces."})),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.trigger.helpExamples",defaultMessage:"Examples: client, employee, patient, weather"})),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.trigger.helpReserved",defaultMessage:"Reserved: {link}",values:{link:m.a.createElement("a",{href:"https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands",target:"_blank",rel:"noopener noreferrer"},m.a.createElement(v.c,{id:"add_command.trigger.helpReservedLinkText",defaultMessage:"see list of built-in slash commands"}))}})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"url"},m.a.createElement(v.c,{id:"add_command.url",defaultMessage:"Request URL"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"url",type:"text",maxLength:"1024",className:"form-control",value:this.state.url,onChange:this.updateUrl,placeholder:_.localizeMessage("add_command.url.placeholder","Must start with http:// or https://")}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.url.help",defaultMessage:"The callback URL to receive the HTTP POST or GET event request when the slash command is run."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"method"},m.a.createElement(v.c,{id:"add_command.method",defaultMessage:"Request Method"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("select",{id:"method",className:"form-control",value:this.state.method,onChange:this.updateMethod},m.a.createElement("option",{value:nr},_.localizeMessage("add_command.method.post","POST")),m.a.createElement("option",{value:"G"},_.localizeMessage("add_command.method.get","GET"))),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.method.help",defaultMessage:"The type of command request issued to the Request URL."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},m.a.createElement(v.c,{id:"add_command.username",defaultMessage:"Response Username"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"username",type:"text",maxLength:"64",className:"form-control",value:this.state.username,onChange:this.updateUsername,placeholder:_.localizeMessage("add_command.username.placeholder","Username")}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.username.help",defaultMessage:'(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols "-", "_", and "." .'})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconUrl"},m.a.createElement(v.c,{id:"add_command.iconUrl",defaultMessage:"Response Icon"})),m.a.createElement("div",{className:"col-md-5 col-sm-8"},m.a.createElement("input",{id:"iconUrl",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconUrl,onChange:this.updateIconUrl,placeholder:_.localizeMessage("add_command.iconUrl.placeholder","https://www.example.com/myicon.png")}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.iconUrl.help",defaultMessage:"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocomplete"},m.a.createElement(v.c,{id:"add_command.autocomplete",defaultMessage:"Autocomplete"})),m.a.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},m.a.createElement("input",{id:"autocomplete",type:"checkbox",checked:this.state.autocomplete,onChange:this.updateAutocomplete}),m.a.createElement("div",{className:"form__help"},m.a.createElement(v.c,{id:"add_command.autocomplete.help",defaultMessage:"(Optional) Show slash command in autocomplete list."})))),e,t,m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement($e.a,{type:"backstage",errors:[this.props.serverError,this.state.clientError]}),m.a.createElement(A.a,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/commands"},m.a.createElement(v.c,{id:"add_command.cancel",defaultMessage:"Cancel"})),m.a.createElement(ct,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},m.a.createElement(v.c,{id:this.props.footer.id,defaultMessage:this.props.footer.defaultMessage})),this.props.renderExtra))))}}]),t}();function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function ir(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tr(ar,"propTypes",{team:d.a.object.isRequired,header:d.a.object.isRequired,footer:d.a.object.isRequired,renderExtra:d.a.node.isRequired,serverError:d.a.string.isRequired,initialCommand:d.a.object,action:d.a.func.isRequired});var mr={id:Object(Pt.b)("integrations.add"),defaultMessage:"Add"},pr={id:Object(Pt.b)("add_command.save"),defaultMessage:"Save"},dr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ur(lr(lr(n=function(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?lr(e):t}(this,sr(t).call(this,e)))),"addCommand",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){rr(r,a,o,i,s,"next",e)}function s(e){rr(r,a,o,i,s,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t){var a,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.addCommand(t);case 3:if(a=e.sent,o=a.data,r=a.error,!o){e.next=9;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/commands/confirm?type=commands&id=").concat(o.id)),e.abrupt("return");case 9:r&&n.setState({serverError:r.message});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.state={serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&ir(e.prototype,t),n&&ir(e,n)}(t,[{key:"render",value:function(){return m.a.createElement(ar,{team:this.props.team,header:mr,footer:pr,renderExtra:"",action:this.addCommand,serverError:this.state.serverError})}}]),t}();ur(dr,"propTypes",{team:d.a.object,actions:d.a.shape({addCommand:d.a.func.isRequired}).isRequired});var fr=Object(a.connect)(null,function(e){return{actions:Object(B.bindActionCreators)({addCommand:bt.addCommand},e)}})(dr);function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function br(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){gr(r,a,o,i,s,"next",e)}function s(e){gr(r,a,o,i,s,"throw",e)}i(void 0)})}}function yr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr={id:Object(Pt.b)("integrations.edit"),defaultMessage:"Edit"},wr={id:Object(Pt.b)("edit_command.save"),defaultMessage:"Update"},jr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Or(Er(Er(n=function(e,t){return!t||"object"!==hr(t)&&"function"!=typeof t?Er(e):t}(this,vr(t).call(this,e)))),"editCommand",function(){var e=br(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newCommand=t,n.state.originalCommand.id&&(t.id=n.state.originalCommand.id),n.state.originalCommand.url===n.newCommand.url&&n.state.originalCommand.trigger===n.newCommand.trigger&&n.state.originalCommand.method===n.newCommand.method){e.next=6;break}n.handleConfirmModal(),e.next=8;break;case 6:return e.next=8,n.submitCommand();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Or(Er(Er(n)),"handleConfirmModal",function(){n.setState({showConfirmModal:!0})}),Or(Er(Er(n)),"confirmModalDismissed",function(){n.setState({showConfirmModal:!1})}),Or(Er(Er(n)),"submitCommand",br(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.editCommand(n.newCommand);case 3:if(t=e.sent,a=t.data,o=t.error,!a){e.next=9;break}return rn.a.push("/".concat(n.props.team.name,"/integrations/commands")),e.abrupt("return");case 9:n.setState({showConfirmModal:!1}),o&&n.setState({serverError:o.message});case 11:case"end":return e.stop()}},e,this)}))),Or(Er(Er(n)),"renderExtra",function(){var e=m.a.createElement(v.c,{id:"update_command.update",defaultMessage:"Update"}),t=m.a.createElement(v.c,{id:"update_command.confirm",defaultMessage:"Edit Slash Command"}),a=m.a.createElement(v.c,{id:"update_command.question",defaultMessage:"Your changes may break the existing slash command. Are you sure you would like to update it?"});return m.a.createElement(te.a,{title:t,message:a,confirmButtonText:e,show:n.state.showConfirmModal,onConfirm:n.submitCommand,onCancel:n.confirmModalDismissed})}),n.state={originalCommand:null,showConfirmModal:!1,serverError:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&yr(e.prototype,t),n&&yr(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableCommands&&this.props.actions.getCustomTeamCommands(this.props.team.id).then(function(){e.setState({originalCommand:Object.values(e.props.commands).filter(function(t){return t.id===e.props.commandId})[0]})})}},{key:"render",value:function(){return this.state.originalCommand?m.a.createElement(ar,{team:this.props.team,header:kr,footer:wr,renderExtra:this.renderExtra(),action:this.editCommand,serverError:this.state.serverError,initialCommand:this.state.originalCommand}):m.a.createElement(Z.a,null)}}]),t}();Or(jr,"propTypes",{team:d.a.object.isRequired,commandId:d.a.string.isRequired,commands:d.a.object,actions:d.a.shape({getCustomTeamCommands:d.a.func.isRequired,editCommand:d.a.func.isRequired}).isRequired,enableCommands:d.a.bool});var Sr=Object(a.connect)(function(e,t){var n=Object(s.getConfig)(e),a=new URLSearchParams(t.location.search).get("id"),o="true"===n.EnableCommands;return{commandId:a,commands:Object(vt.getCommands)(e),enableCommands:o}},function(e){return{actions:Object(B.bindActionCreators)({getCustomTeamCommands:bt.getCustomTeamCommands,editCommand:bt.editCommand},e)}})(jr);n(233);function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mr(e,t,n){return t&&Pr(e.prototype,t),n&&Pr(e,n),e}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Tr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rr(Rr(n=function(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?Rr(e):t}(this,Nr(t).call(this,e)))),"handleKeyPress",function(e){"Enter"===e.key&&rn.a.push("/"+n.props.team.name+"/integrations/"+n.state.type)}),n.state={type:new URLSearchParams(n.props.location.search).get("type"),id:new URLSearchParams(n.props.location.search).get("id")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,m.a.Component),Mr(t,null,[{key:"propTypes",get:function(){return{team:d.a.object,location:d.a.object,commands:d.a.object,oauthApps:d.a.object,incomingHooks:d.a.object,outgoingHooks:d.a.object}}}]),Mr(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){var e=null,t=null,n=null,a=this.props.commands[this.state.id],o=this.props.incomingHooks[this.state.id],r=this.props.outgoingHooks[this.state.id],i=this.props.oauthApps[this.state.id];if(this.state.type===ee.e.Integrations.COMMAND&&a){var s=a.token;e=m.a.createElement(v.c,{id:"installed_commands.header",defaultMessage:"Slash Commands"}),t=m.a.createElement("p",null,m.a.createElement(Wa.a,{id:"add_command.doneHelp",defaultMessage:"Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/slash-commands.html) for further details)."})),n=m.a.createElement("p",{className:"word-break--all"},m.a.createElement(Wa.a,{id:"add_command.token",defaultMessage:"**Token**: {token}",values:{token:s}}),m.a.createElement(Ut,{value:s}))}else if(this.state.type===ee.e.Integrations.INCOMING_WEBHOOK&&o){var c=Object(Nt.e)()+"/hooks/"+o.id;e=m.a.createElement(v.c,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"}),t=m.a.createElement("p",null,m.a.createElement(Wa.a,{id:"add_incoming_webhook.doneHelp",defaultMessage:"Your incoming webhook has been set up. Please send data to the following URL (see [documentation](!https://docs.mattermost.com/developer/webhooks-incoming.html) for further details)."})),n=m.a.createElement("p",{className:"word-break--all"},m.a.createElement(Wa.a,{id:"add_incoming_webhook.url",defaultMessage:"**URL**: {url}",values:{url:c}}),m.a.createElement(Ut,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:c}))}else if(this.state.type===ee.e.Integrations.OUTGOING_WEBHOOK&&r){var l=r.token;e=m.a.createElement(v.c,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"}),t=m.a.createElement("p",null,m.a.createElement(Wa.a,{id:"add_outgoing_webhook.doneHelp",defaultMessage:"Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/webhooks-outgoing.html) for further details)."})),n=m.a.createElement("p",{className:"word-break--all"},m.a.createElement(Wa.a,{id:"add_outgoing_webhook.token",defaultMessage:"**Token**: {token}",values:{token:l}}),m.a.createElement(Ut,{value:l}))}else{if(this.state.type!==ee.e.Integrations.OAUTH_APP||!i)return rn.a.replace("/error?type=".concat(ee.g.PAGE_NOT_FOUND)),"";var u=i.id,p=i.client_secret;e=m.a.createElement(v.c,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),(t=[]).push(m.a.createElement("p",{key:"add_oauth_app.doneHelp"},m.a.createElement(Wa.a,{id:"add_oauth_app.doneHelp",defaultMessage:"Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application (see [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) for further details)."}))),t.push(m.a.createElement("p",{key:"add_oauth_app.clientId"},m.a.createElement(Wa.a,{id:"add_oauth_app.clientId",defaultMessage:"**Client ID**: {id}",values:{id:u}}),m.a.createElement(Ut,{idMessage:"integrations.copy_client_id",defaultMessage:"Copy Client Id",value:u}),m.a.createElement("br",null),m.a.createElement(Wa.a,{id:"add_oauth_app.clientSecret",defaultMessage:"**Client Secret**: {secret}",values:{secret:p}}),m.a.createElement(Ut,{idMessage:"integrations.copy_client_secret",defaultMessage:"Copy Client Secret",value:p}))),t.push(m.a.createElement("p",{key:"add_oauth_app.doneUrlHelp"},m.a.createElement(v.c,{id:"add_oauth_app.doneUrlHelp",defaultMessage:"The following are your authorized redirect URL(s)."}))),n=m.a.createElement("p",{className:"word-break--all"},m.a.createElement(Wa.a,{id:"add_oauth_app.url",defaultMessage:"**URL(s)**: {url}",values:{url:i.callback_urls}}))}return m.a.createElement("div",{className:"backstage-content row"},m.a.createElement(Ze,null,m.a.createElement(A.a,{to:"/"+this.props.team.name+"/integrations/"+this.state.type},e),m.a.createElement(v.c,{id:"integrations.add",defaultMessage:"Add"})),m.a.createElement("div",{className:"backstage-form backstage-form__confirmation"},m.a.createElement("h4",{className:"backstage-form__title"},m.a.createElement(v.c,{id:"integrations.successful",defaultMessage:"Setup Successful"})),t,n,m.a.createElement("div",{className:"backstage-form__footer"},m.a.createElement(A.a,{className:"btn btn-primary",type:"submit",to:"/"+this.props.team.name+"/integrations/"+this.state.type},m.a.createElement(v.c,{id:"integrations.done",defaultMessage:"Done"})))))}}]),t}();var xr=Object(a.connect)(function(e){return{commands:Object(vt.getCommands)(e),oauthApps:Object(vt.getOAuthApps)(e),incomingHooks:Object(vt.getIncomingHooks)(e),outgoingHooks:Object(vt.getOutgoingHooks)(e)}})(Tr);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Dr(e,t){return!t||"object"!==Ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t){return(Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wr(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Lr=function(e){var t=e.component,n=e.extraProps,a=Wr(e,["component","extraProps"]);return m.a.createElement(f.a,Object.assign({},a,{render:function(e){return m.a.createElement(t,Object.assign({},n,e))}}))},Fr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Dr(this,Ur(t).call(this,e))).state={loading:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(t,m.a.PureComponent),function(e,t,n){t&&qr(e.prototype,t),n&&qr(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.enableCommands&&this.props.actions.getCustomTeamCommands(this.props.team.id).then(function(){return e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t={loading:this.state.loading,commands:this.props.commands||[],users:this.props.users,team:this.props.team,user:this.props.user};return m.a.createElement("div",null,m.a.createElement(h.a,null,m.a.createElement(f.a,{exact:!0,path:"".concat(this.props.match.url,"/"),render:function(){return m.a.createElement(xo.a,{to:"".concat(e.props.match.url,"/installed")})}}),m.a.createElement(Lr,{extraProps:t,path:"".concat(this.props.match.url,"/installed"),component:Vo}),m.a.createElement(Lr,{extraProps:t,path:"".concat(this.props.match.url,"/add"),component:fr}),m.a.createElement(Lr,{extraProps:t,path:"".concat(this.props.match.url,"/edit"),component:Sr}),m.a.createElement(Lr,{extraProps:t,path:"".concat(this.props.match.url,"/confirm"),component:xr})))}}]),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fr,"propTypes",{team:d.a.object,user:d.a.object,users:d.a.object,commands:d.a.array,match:d.a.shape({url:d.a.string.isRequired}).isRequired,actions:d.a.shape({getCustomTeamCommands:d.a.func.isRequired}).isRequired,enableCommands:d.a.bool});var zr=Object(a.connect)(function(e){var t="true"===Object(s.getConfig)(e).EnableCommands;return{commands:Object.values(Object(vt.getCommands)(e)),users:Object(r.getUsers)(e),enableCommands:t}},function(e){return{actions:Object(B.bindActionCreators)({getCustomTeamCommands:bt.getCustomTeamCommands},e)}})(Fr),Gr=n(1746);function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Kr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kr(this,Jr(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(t,m.a.Component),function(e,t,n){t&&Yr(e.prototype,t),n&&Yr(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.title,a=e.icon,o=e.parentLink,r=e.children,i=o+"/"+t;return m.a.createElement("li",{className:"backstage-sidebar__category"},m.a.createElement(Gr.a,{to:i,className:"category-title",activeClassName:"category-title--active"},m.a.createElement("i",{className:"fa "+a}),m.a.createElement("span",{className:"category-title__text"},n)),m.a.createElement(f.a,{path:i,render:function(){return m.a.createElement("ul",{className:"sections"},m.a.Children.map(r,function(e){return e?m.a.cloneElement(e,{parentLink:i}):e}))}}))}}],[{key:"propTypes",get:function(){return{name:d.a.string.isRequired,title:d.a.node.isRequired,icon:d.a.string.isRequired,parentLink:d.a.string,children:d.a.arrayOf(d.a.element)}}},{key:"defaultProps",get:function(){return{parentLink:"",children:[]}}},{key:"contextTypes",get:function(){return{router:d.a.object.isRequired}}}]),t}();function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qr(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ti(e,t){return(ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ni=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qr(this,ei(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ti(e,t)}(t,m.a.Component),function(e,t,n){t&&$r(e.prototype,t),n&&$r(e,n)}(t,[{key:"getLink",value:function(){return this.props.parentLink+"/"+this.props.name}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.subsection,a=e.children,o=this.getLink(),r=null;a.length>0&&(r=m.a.createElement("ul",{className:"subsections"},m.a.Children.map(a,function(e){return m.a.cloneElement(e,{parentLink:o,subsection:!0})})));var i="section";return n&&(i="subsection"),m.a.createElement("li",{className:i},m.a.createElement(Gr.a,{className:"".concat(i,"-title"),activeClassName:"".concat(i,"-title--active"),to:o},m.a.createElement("span",{className:"".concat(i,"-title__text")},t)),r)}}],[{key:"propTypes",get:function(){return{name:d.a.string.isRequired,title:d.a.node.isRequired,parentLink:d.a.string,subsection:d.a.bool,children:d.a.arrayOf(d.a.element)}}},{key:"defaultProps",get:function(){return{parentLink:"",subsection:!1,children:[]}}},{key:"contextTypes",get:function(){return{router:d.a.object.isRequired}}}]),t}();function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ri(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ci=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ri(this,ii(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,m.a.Component),function(e,t,n){t&&oi(e.prototype,t),n&&oi(e,n)}(t,[{key:"renderCustomEmoji",value:function(){return this.props.enableCustomEmoji&&this.props.canCreateCustomEmoji?m.a.createElement(Xr,{name:"emoji",parentLink:"/"+this.props.team.name,icon:"fa-smile-o",title:m.a.createElement(v.c,{id:"backstage_sidebar.emoji",defaultMessage:"Custom Emoji"})}):null}},{key:"renderIntegrations",value:function(){if(!(this.props.enableIncomingWebhooks||this.props.enableOutgoingWebhooks||this.props.enableCommands||this.props.enableOAuthServiceProvider))return null;var e=null;this.props.enableIncomingWebhooks&&(e=m.a.createElement(M.a,{permissions:[l.Permissions.MANAGE_WEBHOOKS],teamId:this.props.team.id},m.a.createElement(ni,{name:"incoming_webhooks",parentLink:"/"+this.props.team.name+"/integrations",title:m.a.createElement(v.c,{id:"backstage_sidebar.integrations.incoming_webhooks",defaultMessage:"Incoming Webhooks"})})));var t=null;this.props.enableOutgoingWebhooks&&(t=m.a.createElement(M.a,{permissions:[l.Permissions.MANAGE_WEBHOOKS],teamId:this.props.team.id},m.a.createElement(ni,{name:"outgoing_webhooks",parentLink:"/"+this.props.team.name+"/integrations",title:m.a.createElement(v.c,{id:"backstage_sidebar.integrations.outgoing_webhooks",defaultMessage:"Outgoing Webhooks"})})));var n=null;this.props.enableCommands&&(n=m.a.createElement(M.a,{permissions:[l.Permissions.MANAGE_SLASH_COMMANDS],teamId:this.props.team.id},m.a.createElement(ni,{name:"commands",parentLink:"/"+this.props.team.name+"/integrations",title:m.a.createElement(v.c,{id:"backstage_sidebar.integrations.commands",defaultMessage:"Slash Commands"})})));var a=null;return this.props.enableOAuthServiceProvider&&(a=m.a.createElement(P.a,{permissions:[l.Permissions.MANAGE_OAUTH]},m.a.createElement(ni,{name:"oauth2-apps",parentLink:"/"+this.props.team.name+"/integrations",title:m.a.createElement(v.c,{id:"backstage_sidebar.integrations.oauthApps",defaultMessage:"OAuth 2.0 Applications"})}))),m.a.createElement(M.a,{permissions:[l.Permissions.MANAGE_WEBHOOKS,l.Permissions.MANAGE_SLASH_COMMANDS,l.Permissions.MANAGE_OAUTH],teamId:this.props.team.id},m.a.createElement(Xr,{name:"integrations",icon:"fa-link",parentLink:"/"+this.props.team.name,title:m.a.createElement(v.c,{id:"backstage_sidebar.integrations",defaultMessage:"Integrations"})},e,t,n,a))}},{key:"render",value:function(){return m.a.createElement("div",{className:"backstage-sidebar"},m.a.createElement("ul",null,this.renderCustomEmoji(),this.renderIntegrations()))}}],[{key:"propTypes",get:function(){return{team:d.a.object.isRequired,user:d.a.object.isRequired,enableCustomEmoji:d.a.bool.isRequired,enableIncomingWebhooks:d.a.bool.isRequired,enableOutgoingWebhooks:d.a.bool.isRequired,enableCommands:d.a.bool.isRequired,enableOAuthServiceProvider:d.a.bool.isRequired,canCreateCustomEmoji:d.a.bool.isRequired}}}]),t}();function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mi(this,pi(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(t,m.a.Component),function(e,t,n){t&&ui(e.prototype,t),n&&ui(e,n)}(t,[{key:"render",value:function(){return this.props.team?m.a.createElement("div",{className:"backstage-navbar"},m.a.createElement(A.a,{className:"backstage-navbar__back",to:"/".concat(this.props.team.name,"/channels/").concat(ee.e.DEFAULT_CHANNEL)},m.a.createElement("i",{className:"fa fa-angle-left",title:Object(_.localizeMessage)("generic_icons.back","Back Icon")}),m.a.createElement("span",null,m.a.createElement(v.c,{id:"backstage_navbar.backToMattermost",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}})))):null}}],[{key:"propTypes",get:function(){return{team:d.a.object.isRequired,siteName:d.a.string}}}]),t}();function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Oi=function(e){var t=e.component,n=e.extraProps,a=Ei(e,["component","extraProps"]);return m.a.createElement(f.a,Object.assign({},a,{render:function(e){return m.a.createElement(t,Object.assign({},n,e))}}))},ki=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return _i(vi(vi(n=function(e,t){return!t||"object"!==hi(t)&&"function"!=typeof t?vi(e):t}(this,(e=bi(t)).call.apply(e,[this].concat(o))))),"scrollToTop",function(){n.listRef&&(n.listRef.scrollTop=0)}),_i(vi(vi(n)),"setListRef",function(e){n.listRef=e}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(t,m.a.Component),function(e,t,n){t&&gi(e.prototype,t),n&&gi(e,n)}(t,[{key:"render",value:function(){if(null==this.props.team||null==this.props.user)return m.a.createElement("div",null);var e={team:this.props.team,user:this.props.user,scrollToTop:this.scrollToTop};return m.a.createElement("div",{className:"backstage"},m.a.createElement(b.a,null),m.a.createElement(y.a,null),m.a.createElement(fi,{team:this.props.team,siteName:this.props.siteName}),m.a.createElement(g.a,{pluggableName:"Root"}),m.a.createElement("div",{className:"backstage-body",ref:this.setListRef},m.a.createElement(ci,{team:this.props.team,user:this.props.user,enableCustomEmoji:this.props.enableCustomEmoji,enableIncomingWebhooks:this.props.enableIncomingWebhooks,enableOutgoingWebhooks:this.props.enableOutgoingWebhooks,enableCommands:this.props.enableCommands,enableOAuthServiceProvider:this.props.enableOAuthServiceProvider,canCreateCustomEmoji:this.props.canCreateCustomEmoji}),m.a.createElement(h.a,null,m.a.createElement(Oi,{extraProps:e,exact:!0,path:"/:team/integrations",component:G}),m.a.createElement(Oi,{extraProps:e,exact:!0,path:"".concat(this.props.match.url,"/incoming_webhooks"),component:on}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/incoming_webhooks/add"),component:qn}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/incoming_webhooks/edit"),component:Jn}),m.a.createElement(Oi,{extraProps:e,exact:!0,path:"".concat(this.props.match.url,"/outgoing_webhooks"),component:ca}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/outgoing_webhooks/add"),component:Ca}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/outgoing_webhooks/edit"),component:Ha}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/commands"),component:zr}),m.a.createElement(Oi,{extraProps:e,exact:!0,path:"".concat(this.props.match.url,"/oauth2-apps"),component:no}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/oauth2-apps/add"),component:Eo}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/oauth2-apps/edit"),component:To}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/confirm"),component:xr}),m.a.createElement(Oi,{extraProps:e,exact:!0,path:"/:team/emoji",component:ze}),m.a.createElement(Oi,{extraProps:e,path:"".concat(this.props.match.url,"/add"),component:gt}))))}}]),t}();_i(ki,"propTypes",{user:d.a.object,team:d.a.object,match:d.a.shape({url:d.a.string.isRequired}).isRequired,siteName:d.a.string,enableCustomEmoji:d.a.bool.isRequired,enableIncomingWebhooks:d.a.bool.isRequired,enableOutgoingWebhooks:d.a.bool.isRequired,enableCommands:d.a.bool.isRequired,enableOAuthServiceProvider:d.a.bool.isRequired,canCreateCustomEmoji:d.a.bool.isRequired});t.default=Object(o.a)(Object(a.connect)(function(e){var t=Object(r.getCurrentUser)(e),n=Object(i.getCurrentTeam)(e),a=Object(s.getConfig)(e),o=a.SiteName,u="true"===a.EnableCustomEmoji,m="true"===a.EnableIncomingWebhooks,p="true"===a.EnableOutgoingWebhooks,d="true"===a.EnableCommands,f="true"===a.EnableOAuthServiceProvider,h=Object(c.haveISystemPermission)(e,{permission:l.Permissions.MANAGE_EMOJIS});if(!h){var g=!0,b=!1,y=void 0;try{for(var v,_=Object(i.getMyTeams)(e)[Symbol.iterator]();!(g=(v=_.next()).done);g=!0){var E=v.value;if(Object(c.haveITeamPermission)(e,{team:E.id,permission:l.Permissions.MANAGE_EMOJIS})){h=!0;break}}}catch(e){b=!0,y=e}finally{try{g||null==_.return||_.return()}finally{if(b)throw y}}}return{user:t,team:n,siteName:o,enableCustomEmoji:u,enableIncomingWebhooks:m,enableOutgoingWebhooks:p,enableCommands:d,enableOAuthServiceProvider:f,canCreateCustomEmoji:h}})(ki))},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutocompleteCommandsList=t.getAllCommands=t.getOutgoingHooksInCurrentTeam=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.getIncomingHooks=function(e){return e.entities.integrations.incomingHooks},t.getOutgoingHooks=i,t.getCommands=s,t.getOAuthApps=function(e){return e.entities.integrations.oauthApps},t.getSystemCommands=c;var o=n(67),r=n(232);function i(e){return e.entities.integrations.outgoingHooks}function s(e){return e.entities.integrations.commands}function c(e){return e.entities.integrations.systemCommands}t.getOutgoingHooksInCurrentTeam=(0,o.createSelector)(r.getCurrentTeamId,i,function(e,t){return Object.values(t).filter(function(t){return t.teamId===e})});var l=t.getAllCommands=(0,o.createSelector)(s,c,function(e,t){return a({},e,t)});t.getAutocompleteCommandsList=(0,o.createSelector)(l,r.getCurrentTeamId,function(e,t){return Object.values(e).filter(function(e){return e&&(!e.team_id||e.team_id===t)&&e.auto_complete}).sort(function(e,t){return e.display_name.localeCompare(t.display_name)})})}}]);
//# sourceMappingURL=9.99e01aa94037ab004d12.js.map