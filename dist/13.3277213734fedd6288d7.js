(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1145:function(e,t){},1148:function(e,t){},1818:function(e,t,a){e.exports=a.p+"files/8ad185cd28385436713d3c7e17df5d67.png"},1819:function(e,t,a){e.exports=a.p+"files/580f84fc81f240daf5b9635341fe4fa0.png"},1874:function(e,t,a){"use strict";a.r(t);var n=a(134),i=a(3),r=a(615),s=a(621),o=a(704),l=a(1902),c=a(47),u=a(236),m=a(538),d=a(562),p=a(740),f=(a(73),a(72),a(234),a(24),a(20),a(25),a(94),a(1076),a(5)),b=a.n(f),h=a(10),g=a.n(h),y=a(851),v=a(1899),E=a(1901),_=a(639),S=a(847),T=a(549),O=a(536),w=a(95),P=a(535),j=a(550),x=(a(235),a(803)),M=a(1052),k=a(616),C=a(579),A=a(0);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var B=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(I(I(a=function(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?I(e):t}(this,D(t).call(this,e)))),"closeTooltip",function(){a.setState({errorTooltip:!1})}),U(I(I(a)),"openTooltip",function(e){var t=e.currentTarget.querySelector(".control-label"),n=t.offsetWidth<t.scrollWidth;a.setState({errorTooltip:n})}),U(I(I(a)),"handleChange",function(e,t){a.setState(U({saveNeeded:!0},e,t)),a.props.setNavigationBlocked(!0)}),U(I(I(a)),"handleSubmit",function(e){e.preventDefault(),a.doSubmit()}),U(I(I(a)),"doSubmit",function(e){a.setState({saving:!0,serverError:null});var t=JSON.parse(JSON.stringify(a.props.config));t=a.getConfigFromState(t),Object(d.A)(t,function(n){a.setState(a.getStateFromConfig(n)),a.setState({saveNeeded:!1,saving:!1}),a.props.setNavigationBlocked(!1),e&&e(),a.handleSaved&&a.handleSaved(t)},function(n){a.setState({saving:!1,serverError:n.message,serverErrorId:n.id}),e&&e(),a.handleSaved&&a.handleSaved(t)})}),U(I(I(a)),"parseInt",function(e,t){var a=parseInt(e,10);return isNaN(a)?t||0:a}),U(I(I(a)),"parseIntNonNegative",function(e,t){var a=parseInt(e,10);return isNaN(a)||a<0?t||0:a}),U(I(I(a)),"parseIntNonZero",function(e,t){var a=parseInt(e,10);return isNaN(a)||a<1?t||1:a}),U(I(I(a)),"isSetByEnv",function(e){return Boolean(a.getConfigValue(a.props.environmentConfig,e))}),a.state=Object.assign(a.getStateFromConfig(e.config),{saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,g.a.Component),function(e,t,a){t&&R(e.prototype,t),a&&R(e,a)}(t,[{key:"getConfigValue",value:function(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)}},{key:"setConfigValue",value:function(e,t,a){!function e(t,n){var i=n[0];1===n.length?t[i]=a:(null==t[i]&&(t[i]={}),e(t[i],n.slice(1)))}(e,t.split("."))}},{key:"render",value:function(){return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},this.renderTitle()),g.a.createElement("form",{className:"form-horizontal",role:"form",onSubmit:this.handleSubmit},this.renderSettings(),g.a.createElement("div",{className:"admin-console-save"},g.a.createElement(k.a,{saving:this.state.saving,disabled:!this.state.saveNeeded||this.canSave&&!this.canSave(),onClick:this.handleSubmit,savingMessage:Object(P.localizeMessage)("admin.saving","Saving Config...")}),g.a.createElement("div",{className:"error-message",ref:"errorMessage",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},g.a.createElement(C.a,{error:this.state.serverError})),g.a.createElement(x.a,{show:this.state.errorTooltip,delayShow:A.D.OVERLAY_TIME_DELAY,placement:"top",target:this.refs.errorMessage},g.a.createElement(M.a,{id:"error-tooltip"},this.state.serverError)))))}}]),t}();U(B,"propTypes",{config:b.a.object,environmentConfig:b.a.object,setNavigationBlocked:b.a.func});var F=function(){return g.a.createElement("div",{className:"alert alert-warning"},g.a.createElement(O.c,{id:"admin.set_by_env",defaultMessage:"This setting has been set through an environment variable. It cannot be changed through the System Console."}))};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,Y(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,h["PureComponent"]),function(e,t,a){t&&z(e.prototype,t),a&&z(e,a)}(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.setByEnv,n=e.helpText,i=e.inputId,r=e.label;return g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:i},r),g.a.createElement("div",{className:"col-sm-8"},t,g.a.createElement("div",{className:"help-text"},n),a?g.a.createElement(F,null):null))}}]),t}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(H,"propTypes",{inputId:b.a.string,label:b.a.node.isRequired,children:b.a.node.isRequired,helpText:b.a.node,setByEnv:b.a.bool});var $=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Q(e):t}(this,J(t).call(this,e))).handleChange=a.handleChange.bind(Q(Q(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,g.a.Component),function(e,t,a){t&&X(e.prototype,t),a&&X(e,a)}(t,[{key:"handleChange",value:function(e){this.props.onChange(this.props.id,"true"===e.target.value)}},{key:"render",value:function(){var e;return e=this.props.disabled&&this.props.disabledText?g.a.createElement("div",null,g.a.createElement("span",{className:"admin-console__disabled-text"},this.props.disabledText),this.props.helpText):this.props.helpText,g.a.createElement(H,{label:this.props.label,helpText:e,setByEnv:this.props.setByEnv},g.a.createElement("a",{name:this.props.id}),g.a.createElement("label",{className:"radio-inline"},g.a.createElement("input",{type:"radio",value:"true",id:P.createSafeId(this.props.id)+"true",name:this.props.id,checked:this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),this.props.trueText),g.a.createElement("label",{className:"radio-inline"},g.a.createElement("input",{type:"radio",value:"false",id:P.createSafeId(this.props.id)+"false",name:this.props.id,checked:!this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),this.props.falseText))}}]),t}();Z($,"propTypes",{id:b.a.string.isRequired,label:b.a.node.isRequired,value:b.a.bool.isRequired,onChange:b.a.func.isRequired,trueText:b.a.node,falseText:b.a.node,disabled:b.a.bool.isRequired,setByEnv:b.a.bool.isRequired,disabledText:b.a.node,helpText:b.a.node.isRequired}),Z($,"defaultProps",{trueText:g.a.createElement(O.c,{id:"admin.true",defaultMessage:"true"}),falseText:g.a.createElement(O.c,{id:"admin.false",defaultMessage:"false"}),disabled:!1});var ee=a(555),te=a(1818),ae=a.n(te),ne=a(1819),ie=a.n(ne);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,le(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,g.a.Component),function(e,t,a){t&&se(e.prototype,t),a&&se(e,a)}(t,[{key:"render",value:function(){var e=g.a.createElement("img",{className:"cluster-status",src:ae.a}),t=g.a.createElement("img",{className:"cluster-status",src:ae.a}),a="",n="",i=!1;this.props.clusterInfos.length&&(a=this.props.clusterInfos[0].version,n=this.props.clusterInfos[0].config_hash,i=1===this.props.clusterInfos.length),this.props.clusterInfos.map(function(i){return i.version!==a&&(e=g.a.createElement("img",{className:"cluster-status",src:ie.a})),i.config_hash!==n&&(t=g.a.createElement("img",{className:"cluster-status",src:ie.a})),null});var r=this.props.clusterInfos.map(function(a){var n=null;return""===a.hostname&&(a.hostname=P.localizeMessage("admin.cluster.unknown","unknown")),""===a.version&&(a.version=P.localizeMessage("admin.cluster.unknown","unknown")),""===a.config_hash&&(a.config_hash=P.localizeMessage("admin.cluster.unknown","unknown")),n=i?g.a.createElement("img",{className:"cluster-status",src:ie.a}):g.a.createElement("img",{className:"cluster-status",src:ae.a}),g.a.createElement("tr",{key:a.ipaddress},g.a.createElement("td",{style:me.clusterCell},n),g.a.createElement("td",{style:me.clusterCell},a.hostname),g.a.createElement("td",{style:me.clusterCell},e," ",a.version),g.a.createElement("td",{style:me.clusterCell},g.a.createElement("div",{className:"config-hash"},t," ",a.config_hash)),g.a.createElement("td",{style:me.clusterCell},a.ipaddress))});return g.a.createElement("div",{className:"cluster-panel__table",style:me.clusterTable},g.a.createElement("div",{className:"text-right"},g.a.createElement("button",{type:"submit",className:"btn btn-link",onClick:this.props.reload},g.a.createElement("i",{className:"fa fa-refresh",title:P.localizeMessage("generic_icons.reload","Reload Icon")}),g.a.createElement(O.c,{id:"admin.cluster.status_table.reload",defaultMessage:" Reload Cluster Status"}))),g.a.createElement("table",{className:"table"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.cluster.status_table.status",defaultMessage:"Status"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.cluster.status_table.hostname",defaultMessage:"Hostname"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.cluster.status_table.version",defaultMessage:"Version"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.cluster.status_table.config_hash",defaultMessage:"Config File MD5"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.cluster.status_table.url",defaultMessage:"Gossip Address"})))),g.a.createElement("tbody",null,r)))}}]),t}();!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ue,"propTypes",{clusterInfos:b.a.array.isRequired,reload:b.a.func.isRequired});var me={clusterTable:{margin:10,marginBottom:30},clusterCell:{whiteSpace:"nowrap"}};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ge=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?he(e):t}(this,fe(t).call(this,e))).load=a.load.bind(he(he(a))),a.reload=a.reload.bind(he(he(a))),a.interval=null,a.state={clusterInfos:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,g.a.Component),function(e,t,a){t&&pe(e.prototype,t),a&&pe(e,a)}(t,[{key:"load",value:function(){var e=this;Object(d.m)(function(t){e.setState({clusterInfos:t})},null)}},{key:"UNSAFE_componentWillMount",value:function(){this.load(),this.interval=setInterval(this.load,15e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"reload",value:function(e){e&&e.preventDefault(),this.setState({clusterInfos:null}),this.load()}},{key:"render",value:function(){return null==this.state.clusterInfos?g.a.createElement(ee.a,null):g.a.createElement(ue,{clusterInfos:this.state.clusterInfos,reload:this.reload})}}]),t}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,_e(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,g.a.Component),function(e,t,a){t&&ve(e.prototype,t),a&&ve(e,a)}(t,[{key:"render",value:function(){if(!this.props.show)return null;var e=null;return this.props.header&&(e=g.a.createElement("h4",null,this.props.header)),g.a.createElement("div",{className:"admin-settings__group"},e,this.props.children)}}],[{key:"propTypes",get:function(){return{show:b.a.bool.isRequired,header:b.a.node,children:b.a.node}}},{key:"defaultProps",get:function(){return{show:!0}}}]),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Me=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(xe(xe(a=function(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?xe(e):t}(this,(e=Pe(t)).call.apply(e,[this].concat(i))))),"handleChange",function(e){"number"===a.props.type?a.props.onChange(a.props.id,parseInt(e.target.value,10)):a.props.onChange(a.props.id,e.target.value)}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,g.a.Component),function(e,t,a){t&&we(e.prototype,t),a&&we(e,a)}(t,[{key:"render",value:function(){var e=null;return"input"===this.props.type?e=g.a.createElement("input",{id:this.props.id,className:"form-control",type:"text",placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}):"number"===this.props.type?e=g.a.createElement("input",{id:this.props.id,className:"form-control",type:"number",placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}):"textarea"===this.props.type&&(e=g.a.createElement("textarea",{id:this.props.id,className:"form-control",rows:"5",placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv})),g.a.createElement(H,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id,setByEnv:this.props.setByEnv},e)}}],[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,label:b.a.node.isRequired,placeholder:b.a.string,helpText:b.a.node,value:b.a.oneOfType([b.a.string,b.a.number]).isRequired,maxLength:b.a.number,onChange:b.a.func,disabled:b.a.bool,setByEnv:b.a.bool.isRequired,type:b.a.oneOf(["number","input","textarea"])}}},{key:"defaultProps",get:function(){return{type:"input",maxLength:null}}}]),t}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var De=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?Re(e):t}(this,Ae(t).call(this,e))).getConfigFromState=a.getConfigFromState.bind(Re(Re(a))),a.renderSettings=a.renderSettings.bind(Re(Re(a))),a.overrideHandleChange=a.overrideHandleChange.bind(Re(Re(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,B),function(e,t,a){t&&Ce(e.prototype,t),a&&Ce(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.ClusterSettings.Enable=this.state.Enable,e.ClusterSettings.ClusterName=this.state.ClusterName,e.ClusterSettings.OverrideHostname=this.state.OverrideHostname,e.ClusterSettings.UseIpAddress=this.state.UseIpAddress,e.ClusterSettings.UseExperimentalGossip=this.state.UseExperimentalGossip,e.ClusterSettings.ReadOnlyConfig=this.state.ReadOnlyConfig,e.ClusterSettings.GossipPort=this.parseIntNonZero(this.state.GossipPort,8074),e.ClusterSettings.StreamingPort=this.parseIntNonZero(this.state.StreamingPort,8075),e}},{key:"getStateFromConfig",value:function(e){var t=e.ClusterSettings;return{Enable:t.Enable,ClusterName:t.ClusterName,OverrideHostname:t.OverrideHostname,UseIpAddress:t.UseIpAddress,UseExperimentalGossip:t.UseExperimentalGossip,ReadOnlyConfig:t.ReadOnlyConfig,GossipPort:t.GossipPort,StreamingPort:t.StreamingPort,showWarning:!1}}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.advance.cluster",defaultMessage:"High Availability"})}},{key:"overrideHandleChange",value:function(e,t){this.setState({showWarning:!0}),this.handleChange(e,t)}},{key:"renderSettings",value:function(){if(!("true"===this.props.license.IsLicensed&&"true"===this.props.license.Cluster))return null;var e=null;w.Client4.clusterId&&(e=g.a.createElement("div",{style:Le.configLoadedFromCluster,className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning",title:P.localizeMessage("generic_icons.warning","Warning Icon")}),g.a.createElement(j.a,{id:"admin.cluster.loadedFrom",defaultMessage:"This configuration file was loaded from Node ID {clusterId}. Please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html) if you are accessing the System Console through a load balancer and experiencing issues.",values:{clusterId:w.Client4.clusterId}})));var t=null;this.state.showWarning&&(t=g.a.createElement("div",{style:Le.warning,className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning",title:P.localizeMessage("generic_icons.warning","Warning Icon")}),g.a.createElement(j.a,{id:"admin.cluster.should_not_change",defaultMessage:"WARNING: These settings may not sync with the other servers in the cluster. High Availability inter-node communication will not start until you modify the config.json to be identical on all servers and restart Mattermost. Please see the [documentation](!http://docs.mattermost.com/deployment/cluster.html) on how to add or remove a server from the cluster. If you are accessing the System Console through a load balancer and experiencing issues, please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html)."})));var a=null;return this.state.Enable&&(a=g.a.createElement(ge,null)),g.a.createElement(Te,null,e,a,g.a.createElement("div",{className:"banner"},g.a.createElement(O.c,{id:"admin.cluster.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect. When High Availability mode is enabled, the System Console is set to read-only and can only be changed from the configuration file unless ReadOnlyConfig is disabled in the configuration file."})),t,g.a.createElement($,{id:"Enable",label:g.a.createElement(O.c,{id:"admin.cluster.enableTitle",defaultMessage:"Enable High Availability Mode:"}),helpText:g.a.createElement(j.a,{id:"admin.cluster.enableDescription",defaultMessage:"When true, Mattermost will run in High Availability mode. Please see [documentation](!http://docs.mattermost.com/deployment/cluster.html) to learn more about configuring High Availability for Mattermost."}),value:this.state.Enable,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.Enable")}),g.a.createElement(Me,{id:"ClusterName",label:g.a.createElement(O.c,{id:"admin.cluster.ClusterName",defaultMessage:"Cluster Name:"}),placeholder:P.localizeMessage("admin.cluster.ClusterNameEx",'E.g.: "Production" or "Staging"'),helpText:g.a.createElement(O.c,{id:"admin.cluster.ClusterNameDesc",defaultMessage:"The cluster to join by name.  Only nodes with the same cluster name will join together.  This is to support Blue-Green deployments or staging pointing to the same database."}),value:this.state.ClusterName,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.ClusterName")}),g.a.createElement(Me,{id:"OverrideHostname",label:g.a.createElement(O.c,{id:"admin.cluster.OverrideHostname",defaultMessage:"Override Hostname:"}),placeholder:P.localizeMessage("admin.cluster.OverrideHostnameEx",'E.g.: "app-server-01"'),helpText:g.a.createElement(O.c,{id:"admin.cluster.OverrideHostnameDesc",defaultMessage:"The default value of <blank> will attempt to get the Hostname from the OS or use the IP Address.  You can override the hostname of this server with this property.  It is not recommended to override the Hostname unless needed. This property can also be set to a specific IP Address if needed."}),value:this.state.OverrideHostname,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.OverrideHostname")}),g.a.createElement($,{id:"UseIpAddress",label:g.a.createElement(O.c,{id:"admin.cluster.UseIpAddress",defaultMessage:"Use IP Address:"}),helpText:g.a.createElement(O.b,{id:"admin.cluster.UseIpAddressDesc",defaultMessage:"When true, the cluster will attempt to communicate via IP Address vs using the hostname."}),value:this.state.UseIpAddress,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.UseIpAddress")}),g.a.createElement($,{id:"UseExperimentalGossip",label:g.a.createElement(O.c,{id:"admin.cluster.UseExperimentalGossip",defaultMessage:"Use Experimental Gossip:"}),helpText:g.a.createElement(O.b,{id:"admin.cluster.UseExperimentalGossipDesc",defaultMessage:"When true, the server will attempt to communicate via the gossip protocol over the gossip port.  When false the server will attempt to communicate over the streaming port. When false the gossip port and protocol are still used to determine cluster health."}),value:this.state.UseExperimentalGossip,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.UseExperimentalGossip")}),g.a.createElement($,{id:"ReadOnlyConfig",label:g.a.createElement(O.c,{id:"admin.cluster.ReadOnlyConfig",defaultMessage:"Read Only Config:"}),helpText:g.a.createElement(O.b,{id:"admin.cluster.ReadOnlyConfigDesc",defaultMessage:"When true, the server will reject changes made to the configuration file from the system console. When running in production it is recommened to set this to true."}),value:this.state.ReadOnlyConfig,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.ReadOnlyConfig")}),g.a.createElement(Me,{id:"GossipPort",label:g.a.createElement(O.c,{id:"admin.cluster.GossipPort",defaultMessage:"Gossip Port:"}),placeholder:P.localizeMessage("admin.cluster.GossipPortEx",'E.g.: "8074"'),helpText:g.a.createElement(O.c,{id:"admin.cluster.GossipPortDesc",defaultMessage:"The port used for the gossip protocol.  Both UDP and TCP should be allowed on this port."}),value:this.state.GossipPort,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.GossipPort")}),g.a.createElement(Me,{id:"StreamingPort",label:g.a.createElement(O.c,{id:"admin.cluster.StreamingPort",defaultMessage:"Streaming Port:"}),placeholder:P.localizeMessage("admin.cluster.StreamingPortEx",'E.g.: "8075"'),helpText:g.a.createElement(O.c,{id:"admin.cluster.StreamingPortDesc",defaultMessage:"The port used for streaming data between servers."}),value:this.state.StreamingPort,onChange:this.overrideHandleChange,setByEnv:this.isSetByEnv("ClusterSettings.StreamingPort")}))}}]),t}(),Le={configLoadedFromCluster:{marginBottom:10},warning:{marginBottom:10}},Ie=a(575);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ye=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Ge(ze(ze(a=function(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?ze(e):t}(this,(e=Fe(t)).call.apply(e,[this].concat(i))))),"handleChange",function(e){a.props.onChange(a.props.id,e.target.value)}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,g.a.Component),function(e,t,a){t&&Be(e.prototype,t),a&&Be(e,a)}(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var i,r=this.props.values[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=s.value,l=s.text;e.push(g.a.createElement("option",{value:o,key:o},l))}}catch(e){a=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return g.a.createElement(H,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},g.a.createElement("select",{className:"form-control",id:this.props.id,value:this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv},e))}}]),t}();Ge(Ye,"propTypes",{id:b.a.string.isRequired,values:b.a.array.isRequired,label:b.a.node.isRequired,value:b.a.string.isRequired,onChange:b.a.func.isRequired,disabled:b.a.bool,setByEnv:b.a.bool.isRequired,helpText:b.a.node}),Ge(Ye,"defaultProps",{isDisabled:!1});var Ve=a(1161),He=a(1820),We=(a(93),a(74),a(98));function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Je(e,t,a[t])})}return e}function Je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ke(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Qe(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Ke(r,n,i,s,o,"next",e)}function o(e){Ke(r,n,i,s,o,"throw",e)}s(void 0)})}}var Ze=We.a.dispatch,$e=We.a.getState;function et(){return(et=Qe(regeneratorRuntime.mark(function e(t,a,n){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.createJob(t)(Ze,$e);case 2:i=e.sent,r=i.data,s=i.error,r&&a?a(r):s&&n&&n(Xe({id:s.server_error_id},s));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function tt(){return(tt=Qe(regeneratorRuntime.mark(function e(t,a,n){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.cancelJob(t)(Ze,$e);case 2:i=e.sent,r=i.data,s=i.error,r&&a?a(r):s&&n&&n(Xe({id:s.server_error_id},s));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var at=a(606);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ct=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(ot(ot(a=function(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?ot(e):t}(this,rt(t).call(this,e)))),"getStatus",function(e){return e.status===A.j.PENDING?g.a.createElement("span",{className:"status-icon-warning",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusPending",defaultMessage:"Pending"})):e.status===A.j.IN_PROGRESS?g.a.createElement("span",{className:"status-icon-warning",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusInProgress",defaultMessage:"In Progress"})):e.status===A.j.SUCCESS?g.a.createElement("span",{className:"status-icon-success",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusSuccess",defaultMessage:"Success"})):e.status===A.j.ERROR?g.a.createElement("span",{className:"status-icon-error",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusError",defaultMessage:"Error"})):e.status===A.j.CANCEL_REQUESTED?g.a.createElement("span",{className:"status-icon-warning",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusCanceling",defaultMessage:"Canceling..."})):e.status===A.j.CANCELED?g.a.createElement("span",{className:"status-icon-error",title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},g.a.createElement(O.c,{id:"admin.jobTable.statusCanceled",defaultMessage:"Canceled"})):g.a.createElement("span",{title:P.localizeMessage("admin.jobTable.jobId","Job ID: ")+e.id},e.status)}),lt(ot(ot(a)),"getExtraInfoText",function(e){return e.data&&e.data.error&&e.data.error.length>0?g.a.createElement("span",{title:e.data.error},e.data.error):a.props.getExtraInfoText?a.props.getExtraInfoText(e):g.a.createElement("span",null)}),lt(ot(ot(a)),"getRunLength",function(e){var t=e.last_activity_at-e.start_at;if(e.status===A.j.IN_PROGRESS){var n=Date.now()-e.start_at;n>t&&(t=n)}var i=P.localizeMessage("admin.jobTable.lastActivityAt","Last Activity: ")+"--";e.last_activity_at>0&&(i=P.localizeMessage("admin.jobTable.lastActivityAt","Last Activity: ")+a.props.intl.formatDate(new Date(e.last_activity_at),{year:"numeric",month:"short",day:"2-digit"})+" - "+a.props.intl.formatTime(new Date(e.last_activity_at),{hour:"2-digit",minute:"2-digit",second:"2-digit"}));var r=Math.round(t/1e3),s=Math.round(t/6e4);return t<=0||e.status===A.j.CANCELED?g.a.createElement("span",{className:"whitespace--nowrap"},"--"):r<=120?g.a.createElement("span",{className:"whitespace--nowrap",title:i},r+P.localizeMessage("admin.jobTable.runLengthSeconds"," seconds")):g.a.createElement("span",{className:"whitespace--nowrap",title:i},s+P.localizeMessage("admin.jobTable.runLengthMinutes"," minutes"))}),lt(ot(ot(a)),"getFinishAt",function(e,t){if(0===t||e===A.j.PENDING||e===A.j.IN_PROGRESS||e===A.j.CANCEL_REQUESTED)return g.a.createElement("span",{className:"whitespace--nowrap"},"--");var a=new Date(t);return g.a.createElement("span",{className:"whitespace--nowrap"},g.a.createElement(O.a,{value:a,day:"2-digit",month:"short",year:"numeric"})," - ",g.a.createElement(O.d,{value:a,hour:"2-digit",minute:"2-digit"}))}),lt(ot(ot(a)),"reload",function(){a.setState({loading:!0}),a.props.actions.getJobsByType(a.props.jobType).then(function(){a.setState({loading:!1})})}),lt(ot(ot(a)),"handleCancelJob",function(e){e.preventDefault(),function(e,t,a){tt.apply(this,arguments)}(e.currentTarget.getAttribute("data-job-id"),function(){a.reload()},function(e){at.a.storeLastError(e),at.a.emitChange(),a.reload()})}),lt(ot(ot(a)),"handleCreateJob",function(e){e.preventDefault(),function(e,t,a){et.apply(this,arguments)}({type:a.props.jobType},function(){a.reload()},function(e){at.a.storeLastError(e),at.a.emitChange(),a.reload()})}),lt(ot(ot(a)),"getCancelButton",function(e){var t=null;return a.props.disabled||e.status!==A.j.PENDING&&e.status!==A.j.IN_PROGRESS||(t=g.a.createElement("span",{"data-job-id":e.id,onClick:a.handleCancelJob,className:"job-table__cancel-button",title:P.localizeMessage("admin.jobTable.cancelButton","Cancel")},"Ã—")),t}),a.interval=null,a.state={loading:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&it(e.prototype,t),a&&it(e,a)}(t,[{key:"UNSAFE_componentWillMount",value:function(){this.interval=setInterval(this.reload,15e3)}},{key:"componentDidMount",value:function(){var e=this;this.props.actions.getJobsByType(this.props.jobType).then(function(){return e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.props.jobs.map(function(t){return g.a.createElement("tr",{key:t.id},g.a.createElement("td",{width:"30px",className:"whitespace--nowrap text-center"},e.getCancelButton(t)),g.a.createElement("td",{className:"whitespace--nowrap"},e.getStatus(t)),g.a.createElement("td",{className:"whitespace--nowrap"},e.getFinishAt(t.status,t.last_activity_at)),g.a.createElement("td",{className:"whitespace--nowrap"},e.getRunLength(t)),g.a.createElement("td",{colSpan:"3"},e.getExtraInfoText(t)))});return g.a.createElement("div",{className:"job-table__panel"},g.a.createElement("div",{className:"job-table__create-button"},g.a.createElement("div",null,g.a.createElement("button",{className:"btn btn-default",onClick:this.handleCreateJob,disabled:this.props.disabled},this.props.createJobButtonText)),g.a.createElement("div",{className:"help-text"},this.props.createJobHelpText)),g.a.createElement("div",{className:"job-table__table"},g.a.createElement("table",{className:"table"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",{width:"30px"}),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.jobTable.headerStatus",defaultMessage:"Status"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.jobTable.headerFinishAt",defaultMessage:"Finish Time"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.jobTable.headerRunTime",defaultMessage:"Run Time"})),g.a.createElement("th",{colSpan:"3"},g.a.createElement(O.c,{id:"admin.jobTable.headerExtraInfo",defaultMessage:"Details"})))),g.a.createElement("tbody",null,t))))}}]),t}();lt(ct,"propTypes",{intl:O.i.isRequired,jobs:b.a.arrayOf(b.a.object).isRequired,actions:b.a.shape({getJobsByType:b.a.func.isRequired}).isRequired,getExtraInfoText:b.a.func,disabled:b.a.bool,createJobHelpText:b.a.element.isRequired,createJobButtonText:b.a.element.isRequired,jobType:b.a.string.isRequired});var ut=Object(O.h)(ct);var mt=Object(n.connect)(function(e,t){return{jobs:He.makeGetJobsByType(t.jobType)(e)}},function(e){return{actions:Object(i.bindActionCreators)({getJobsByType:Ve.getJobsByType},e)}})(ut);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var yt=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gt(ht(ht(a=function(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?ht(e):t}(this,ft(t).call(this,e)))),"handleSubmit",function(e){e.preventDefault(),a.setState({showConfirmModal:!0})}),gt(ht(ht(a)),"handleSaveConfirmed",function(){a.setState({showConfirmModal:!1}),a.doSubmit()}),gt(ht(ht(a)),"handleSaveCanceled",function(){a.setState({showConfirmModal:!1})}),a.getConfigFromState=a.getConfigFromState.bind(ht(ht(a))),a.renderSettings=a.renderSettings.bind(ht(ht(a))),a.renderConfirmModal=a.renderConfirmModal.bind(ht(ht(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,B),function(e,t,a){t&&pt(e.prototype,t),a&&pt(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.DataRetentionSettings.EnableMessageDeletion="true"===this.state.enableMessageDeletion,e.DataRetentionSettings.EnableFileDeletion="true"===this.state.enableFileDeletion,e.DataRetentionSettings.MessageRetentionDays=parseInt(this.state.messageRetentionDays,10),e.DataRetentionSettings.FileRetentionDays=parseInt(this.state.fileRetentionDays,10),e.DataRetentionSettings.DeletionJobStartTime=this.state.deletionJobStartTime,e}},{key:"getStateFromConfig",value:function(e){return{enableMessageDeletion:String(e.DataRetentionSettings.EnableMessageDeletion),enableFileDeletion:String(e.DataRetentionSettings.EnableFileDeletion),messageRetentionDays:e.DataRetentionSettings.MessageRetentionDays,fileRetentionDays:e.DataRetentionSettings.FileRetentionDays,deletionJobStartTime:e.DataRetentionSettings.DeletionJobStartTime,showConfirmModal:!1}}},{key:"renderConfirmModal",value:function(){var e=g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.title",defaultMessage:"Confirm data retention policy"}),t=[];"true"===this.state.enableMessageDeletion?t.push(g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.description.itemMessageDeletion",defaultMessage:"All messages will be permanently deleted after {days} days.",values:{days:g.a.createElement("strong",null,this.state.messageRetentionDays)}})):t.push(g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.description.itemMessageIndefinite",defaultMessage:"All messages will be retained indefinitely."})),"true"===this.state.enableFileDeletion?t.push(g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.description.itemFileDeletion",defaultMessage:"All files will be permanently deleted after {days} days.",values:{days:g.a.createElement("strong",null,this.state.fileRetentionDays)}})):t.push(g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.description.itemFileIndefinite",defaultMessage:"All files will be retained indefinitely."}));var a=g.a.createElement("div",null,g.a.createElement("p",null,g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.description",defaultMessage:"Are you sure you want to apply the following data retention policy:"})),g.a.createElement("ul",null,t.map(function(e,t){return g.a.createElement("li",{key:t},e)})),g.a.createElement("p",null,g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.clarification",defaultMessage:"Once deleted, messages and files cannot be retrieved."}))),n=g.a.createElement(O.c,{id:"admin.data_retention.confirmChangesModal.confirm",defaultMessage:"Confirm Settings"});return g.a.createElement(Ie.a,{show:this.state.showConfirmModal,title:e,message:a,confirmButtonText:n,onConfirm:this.handleSaveConfirmed,onCancel:this.handleSaveCanceled})}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.data_retention.title",defaultMessage:"Data Retention Policy (Beta)"})}},{key:"renderSettings",value:function(){var e=[{value:"false",text:P.localizeMessage("admin.data_retention.keepMessagesIndefinitely","Keep all messages indefinitely")},{value:"true",text:P.localizeMessage("admin.data_retention.keepMessageForTime","Keep messages for a set amount of time")}],t=[{value:"false",text:P.localizeMessage("admin.data_retention.keepFilesIndefinitely","Keep all files indefinitely")},{value:"true",text:P.localizeMessage("admin.data_retention.keepFilesForTime","Keep files for a set amount of time")}],a="";"true"===this.state.enableMessageDeletion&&(a=g.a.createElement(Me,{id:"messageRetentionDays",label:g.a.createElement("span",null),placeholder:P.localizeMessage("admin.data_retention.messageRetentionDays.example",'E.g.: "60"'),helpText:g.a.createElement(O.c,{id:"admin.data_retention.messageRetentionDays.description",defaultMessage:"Set how many days messages are kept in Mattermost. Messages, including file attachments older than the duration you set will be deleted nightly. The minimum time is one day."}),value:this.state.messageRetentionDays,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.MessageRetentionDays")}));var n="";"true"===this.state.enableFileDeletion&&(n=g.a.createElement(Me,{id:"fileRetentionDays",label:g.a.createElement("span",null),placeholder:P.localizeMessage("admin.data_retention.fileRetentionDays.example",'E.g.: "60"'),helpText:g.a.createElement(O.c,{id:"admin.data_retention.fileRetentionDays.description",defaultMessage:"Set how many days file uploads are kept in Mattermost. Files older than the duration you set will be deleted nightly. The minimum time is one day."}),value:this.state.fileRetentionDays,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.FileRetentionDays")}));var i=this.renderConfirmModal();return g.a.createElement(Te,null,i,g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement(O.c,{id:"admin.data_retention.note.description",defaultMessage:"Caution: Once a message or a file is deleted, the action is irreversible. Please be careful when setting up a custom data retention policy. See {documentationLink} to learn more.",values:{documentationLink:g.a.createElement("a",{href:"https://about.mattermost.com/default-dataretention-documentation/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.data_retention.note.description.documentationLinkText",defaultMessage:"documentation"}))}}))),g.a.createElement(Ye,{id:"enableMessageDeletion",values:e,label:g.a.createElement(O.c,{id:"admin.data_retention.enableMessageDeletion.title",defaultMessage:"Message Retention:"}),helpText:g.a.createElement(O.c,{id:"admin.data_retention.enableMessageDeletion.description",defaultMessage:"Set how long Mattermost keeps messages in channels and direct messages."}),value:this.state.enableMessageDeletion,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableMessageDeletion")}),a,g.a.createElement(Ye,{id:"enableFileDeletion",values:t,label:g.a.createElement(O.c,{id:"admin.data_retention.enableFileDeletion.title",defaultMessage:"File Retention:"}),helpText:g.a.createElement(O.c,{id:"admin.data_retention.enableFileDeletion.description",defaultMessage:"Set how long Mattermost keeps file uploads in channels and direct messages."}),value:this.state.enableFileDeletion,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableFileDeletion")}),n,g.a.createElement(Me,{id:"deletionJobStartTime",label:g.a.createElement(O.c,{id:"admin.data_retention.deletionJobStartTime.title",defaultMessage:"Data Deletion Time:"}),placeholder:P.localizeMessage("admin.data_retention.deletionJobStartTime.example",'E.g.: "02:00"'),helpText:g.a.createElement(O.c,{id:"admin.data_retention.deletionJobStartTime.description",defaultMessage:"Set the start time of the daily scheduled data retention job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM."}),value:this.state.deletionJobStartTime,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.DeletionJobStartTime")}),g.a.createElement(mt,{jobType:A.k.DATA_RETENTION,disabled:"true"!==this.state.enableMessageDeletion&&"true"!==this.state.enableFileDeletion,createJobButtonText:g.a.createElement(O.c,{id:"admin.data_retention.createJob.title",defaultMessage:"Run Deletion Job Now"}),createJobHelpText:g.a.createElement(O.c,{id:"admin.data_retention.createJob.help",defaultMessage:"Initiates a Data Retention deletion job immediately."})}))}}]),t}(),vt=a(19);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pt=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?Ot(e):t}(this,St(t).call(this,e))).handleRequest=a.handleRequest.bind(Ot(Ot(a))),a.state={busy:!1,fail:null,success:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,g.a.Component),function(e,t,a){t&&_t(e.prototype,t),a&&_t(e,a)}(t,[{key:"handleRequest",value:function(e){var t=this;e.preventDefault(),this.setState({busy:!0,fail:null,success:!1});var a=function(){t.props.requestAction(function(){t.setState({busy:!1,success:!0})},function(e){var a=e.message;t.props.includeDetailedError&&(a+=" - "+e.detailed_error),t.setState({busy:!1,fail:a})})};this.props.saveNeeded?this.props.saveConfigAction(a):a()}},{key:"render",value:function(){var e=null;this.state.fail?e=g.a.createElement("div",null,g.a.createElement("div",{className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning",title:P.localizeMessage("generic_icons.warning","Warning Icon")}),g.a.createElement(O.c,{id:this.props.errorMessage.id,defaultMessage:this.props.errorMessage.defaultMessage,values:{error:this.state.fail}}))):this.state.success&&this.props.showSuccessMessage&&(e=g.a.createElement("div",null,g.a.createElement("div",{className:"alert alert-success"},g.a.createElement("i",{className:"fa fa-success",title:P.localizeMessage("generic_icons.success","Success Icon")}),g.a.createElement(O.c,{id:this.props.successMessage.id,defaultMessage:this.props.successMessage.defaultMessage}))));var t=null;if(this.state.busy){var a=P.localizeMessage("admin.requestButton.loading"," Loading...");this.props.loadingText&&(a=this.props.loadingText),t=g.a.createElement("span",null,g.a.createElement("span",{className:"fa fa-refresh icon--rotate",title:P.localizeMessage("generic_icons.loading","Loading Icon")}),a)}else t=this.props.buttonText;var n="col-sm-8",i=null;return this.props.label?i=g.a.createElement("label",{className:"control-label col-sm-4"},this.props.label):n="col-sm-offset-4 "+n,g.a.createElement("div",{className:"form-group"},i,g.a.createElement("div",{className:n},g.a.createElement("div",null,g.a.createElement("button",{className:"btn btn-default",onClick:this.handleRequest,disabled:this.props.disabled},t),this.props.alternativeActionElement,e),g.a.createElement("div",{className:"help-text"},this.props.helpText)))}}]),t}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}wt(Pt,"propTypes",{requestAction:b.a.func.isRequired,helpText:b.a.element,loadingText:b.a.string,buttonText:b.a.element.isRequired,label:b.a.element,disabled:b.a.bool,saveNeeded:b.a.bool,saveConfigAction:b.a.func,showSuccessMessage:b.a.bool,successMessage:b.a.shape({id:b.a.string.isRequired,defaultMessage:b.a.string.isRequired}),errorMessage:b.a.shape({id:b.a.string.isRequired,defaultMessage:b.a.string.isRequired}),includeDetailedError:b.a.bool,alternativeActionElement:b.a.element}),wt(Pt,"defaultProps",{disabled:!1,saveNeeded:!1,showSuccessMessage:!0,includeDetailedError:!1,successMessage:{id:Object(vt.b)("admin.requestButton.requestSuccess"),defaultMessage:"Test Successful"},errorMessage:{id:Object(vt.b)("admin.requestButton.requestFailure"),defaultMessage:"Test Failure: {error}"}});var At=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?Ct(e):t}(this,Mt(t).call(this,e))).getConfigFromState=a.getConfigFromState.bind(Ct(Ct(a))),a.renderSettings=a.renderSettings.bind(Ct(Ct(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,B),function(e,t,a){t&&xt(e.prototype,t),a&&xt(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.SqlSettings.MaxIdleConns=this.parseIntNonZero(this.state.maxIdleConns),e.SqlSettings.MaxOpenConns=this.parseIntNonZero(this.state.maxOpenConns),e.SqlSettings.Trace=this.state.trace,e.SqlSettings.QueryTimeout=this.parseIntNonZero(this.state.queryTimeout),e.SqlSettings.ConnMaxLifetimeMilliseconds=this.parseIntNonNegative(this.state.connMaxLifetimeMilliseconds),e}},{key:"getStateFromConfig",value:function(e){return{driverName:e.SqlSettings.DriverName,dataSource:e.SqlSettings.DataSource,maxIdleConns:e.SqlSettings.MaxIdleConns,maxOpenConns:e.SqlSettings.MaxOpenConns,trace:e.SqlSettings.Trace,queryTimeout:e.SqlSettings.QueryTimeout,connMaxLifetimeMilliseconds:e.SqlSettings.ConnMaxLifetimeMilliseconds}}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.database.title",defaultMessage:"Database Settings"})}},{key:"renderSettings",value:function(){var e="**********"+this.state.dataSource.substring(this.state.dataSource.indexOf("@")),t=g.a.createElement("div",null);return"true"===this.props.license.IsLicensed&&(t=g.a.createElement(Pt,{requestAction:d.u,helpText:g.a.createElement(O.c,{id:"admin.recycle.recycleDescription",defaultMessage:'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {reloadConfiguration} feature to load the new settings while the server is running. The administrator should then use {featureName} feature to recycle the database connections based on the new settings.',values:{featureName:g.a.createElement("b",null,g.a.createElement(O.c,{id:"admin.recycle.recycleDescription.featureName",defaultMessage:"Recycle Database Connections"})),reloadConfiguration:g.a.createElement("a",{href:"../general/configuration"},g.a.createElement("b",null,g.a.createElement(O.c,{id:"admin.recycle.recycleDescription.reloadConfiguration",defaultMessage:"Configuration > Reload Configuration from Disk"})))}}),buttonText:g.a.createElement(O.c,{id:"admin.recycle.button",defaultMessage:"Recycle Database Connections"}),showSuccessMessage:!1,errorMessage:{id:Object(vt.b)("admin.recycle.reloadFail"),defaultMessage:"Recycling unsuccessful: {error}"},includeDetailedError:!0})),g.a.createElement(Te,null,g.a.createElement("div",{className:"banner"},g.a.createElement(O.c,{id:"admin.sql.noteDescription",defaultMessage:"Changing properties in this section will require a server restart before taking effect."})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"DriverName"},g.a.createElement(O.c,{id:"admin.sql.driverName",defaultMessage:"Driver Name:"})),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("input",{type:"text",className:"form-control",value:this.state.driverName,disabled:!0}),g.a.createElement("div",{className:"help-text"},g.a.createElement(O.c,{id:"admin.sql.driverNameDescription",defaultMessage:"Set the database driver in the config.json file."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"DataSource"},g.a.createElement(O.c,{id:"admin.sql.dataSource",defaultMessage:"Data Source:"})),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("input",{type:"text",className:"form-control",value:e,disabled:!0}),g.a.createElement("div",{className:"help-text"},g.a.createElement(O.c,{id:"admin.sql.dataSourceDescription",defaultMessage:"Set the database source in the config.json file."})))),g.a.createElement(Me,{id:"maxIdleConns",label:g.a.createElement(O.c,{id:"admin.sql.maxConnectionsTitle",defaultMessage:"Maximum Idle Connections:"}),placeholder:P.localizeMessage("admin.sql.maxConnectionsExample",'E.g.: "10"'),helpText:g.a.createElement(O.c,{id:"admin.sql.maxConnectionsDescription",defaultMessage:"Maximum number of idle connections held open to the database."}),value:this.state.maxIdleConns,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.MaxIdleConns")}),g.a.createElement(Me,{id:"maxOpenConns",label:g.a.createElement(O.c,{id:"admin.sql.maxOpenTitle",defaultMessage:"Maximum Open Connections:"}),placeholder:P.localizeMessage("admin.sql.maxOpenExample",'E.g.: "10"'),helpText:g.a.createElement(O.c,{id:"admin.sql.maxOpenDescription",defaultMessage:"Maximum number of open connections held open to the database."}),value:this.state.maxOpenConns,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.MaxOpenConns")}),g.a.createElement(Me,{id:"queryTimeout",label:g.a.createElement(O.c,{id:"admin.sql.queryTimeoutTitle",defaultMessage:"Query Timeout:"}),placeholder:P.localizeMessage("admin.sql.queryTimeoutExample",'E.g.: "30"'),helpText:g.a.createElement(O.c,{id:"admin.sql.queryTimeoutDescription",defaultMessage:"The number of seconds to wait for a response from the database after opening a connection and sending the query. Errors that you see in the UI or in the logs as a result of a query timeout can vary depending on the type of query."}),value:this.state.queryTimeout,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.QueryTimeout")}),g.a.createElement(Me,{id:"connMaxLifetimeMilliseconds",label:g.a.createElement(O.c,{id:"admin.sql.connMaxLifetimeTitle",defaultMessage:"Maximum Connection Lifetime:"}),placeholder:P.localizeMessage("admin.sql.connMaxLifetimeExample",'E.g.: "3600000"'),helpText:g.a.createElement(O.c,{id:"admin.sql.connMaxLifetimeDescription",defaultMessage:"Maximum lifetime for a connection to the database in milliseconds."}),value:this.state.connMaxLifetimeMilliseconds,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.ConnMaxLifetimeMilliseconds")}),g.a.createElement($,{id:"trace",label:g.a.createElement(O.c,{id:"admin.sql.traceTitle",defaultMessage:"SQL Statement Logging: "}),helpText:g.a.createElement(O.c,{id:"admin.sql.traceDescription",defaultMessage:"(Development Mode) When true, executing SQL statements are written to the log."}),value:this.state.trace,onChange:this.handleChange,setByEnv:this.isSetByEnv("SqlSettings.Trace")}),t)}}]),t}();a(245);function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ut=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?It(e):t}(this,Dt(t).call(this,e))).getConfigFromState=a.getConfigFromState.bind(It(It(a))),a.doTestConfig=a.doTestConfig.bind(It(It(a))),a.handleSettingChanged=a.handleSettingChanged.bind(It(It(a))),a.handleSaved=a.handleSaved.bind(It(It(a))),a.renderSettings=a.renderSettings.bind(It(It(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,B),function(e,t,a){t&&Rt(e.prototype,t),a&&Rt(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.ElasticsearchSettings.ConnectionUrl=this.state.connectionUrl,e.ElasticsearchSettings.Username=this.state.username,e.ElasticsearchSettings.Password=this.state.password,e.ElasticsearchSettings.Sniff=this.state.sniff,e.ElasticsearchSettings.EnableIndexing=this.state.enableIndexing,e.ElasticsearchSettings.EnableSearching=this.state.enableSearching,e}},{key:"getStateFromConfig",value:function(e){return{connectionUrl:e.ElasticsearchSettings.ConnectionUrl,username:e.ElasticsearchSettings.Username,password:e.ElasticsearchSettings.Password,sniff:e.ElasticsearchSettings.Sniff,enableIndexing:e.ElasticsearchSettings.EnableIndexing,enableSearching:e.ElasticsearchSettings.EnableSearching,configTested:!0,canSave:!0,canPurgeAndIndex:e.ElasticsearchSettings.EnableIndexing}}},{key:"handleSettingChanged",value:function(e,t){"enableIndexing"===e&&(!1===t?this.setState({enableSearching:!1}):this.setState({canSave:!1,configTested:!1})),"connectionUrl"!==e&&"username"!==e&&"password"!==e&&"sniff"!==e||this.setState({configTested:!1,canSave:!1}),"enableSearching"!==e&&this.setState({canPurgeAndIndex:!1}),this.handleChange(e,t)}},{key:"handleSaved",value:function(){this.setState({canPurgeAndIndex:this.state.enableIndexing})}},{key:"canSave",value:function(){return this.state.canSave}},{key:"doTestConfig",value:function(e,t){var a=this,n=JSON.parse(JSON.stringify(this.props.config));this.getConfigFromState(n),Object(d.i)(n,function(){a.setState({configTested:!0,canSave:!0}),e(),a.doSubmit()},function(e){a.setState({configTested:!1,canSave:!1}),t(e)})}},{key:"getExtraInfo",value:function(e){return e.status===A.j.IN_PROGRESS?g.a.createElement(O.c,{id:"admin.elasticsearch.percentComplete",defaultMessage:"{percent}% Complete",values:{percent:Number(e.progress)}}):null}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.elasticsearch.title",defaultMessage:"Elasticsearch"})}},{key:"renderSettings",value:function(){return g.a.createElement(Te,null,g.a.createElement($,{id:"enableIndexing",label:g.a.createElement(O.c,{id:"admin.elasticsearch.enableIndexingTitle",defaultMessage:"Enable Elasticsearch Indexing:"}),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.enableIndexingDescription",defaultMessage:'When true, indexing of new posts occurs automatically. Search queries will use database search until "Enable Elasticsearch for search queries" is enabled. {documentationLink}',values:{documentationLink:g.a.createElement("a",{href:"https://about.mattermost.com/default-elasticsearch-documentation/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.elasticsearch.enableIndexingDescription.documentationLinkText",defaultMessage:"Learn more about Elasticsearch in our documentation."}))}}),value:this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.EnableIndexing")}),g.a.createElement(Me,{id:"connectionUrl",label:g.a.createElement(O.c,{id:"admin.elasticsearch.connectionUrlTitle",defaultMessage:"Server Connection Address:"}),placeholder:P.localizeMessage("admin.elasticsearch.connectionUrlExample",'E.g.: "https://elasticsearch.example.org:9200"'),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.connectionUrlDescription",defaultMessage:"The address of the Elasticsearch server. {documentationLink}",values:{documentationLink:g.a.createElement("a",{href:"https://about.mattermost.com/default-elasticsearch-server-setup/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.elasticsearch.connectionUrlExample.documentationLinkText",defaultMessage:"Please see documentation with server setup instructions."}))}}),value:this.state.connectionUrl,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.ConnectionUrl")}),g.a.createElement(Me,{id:"username",label:g.a.createElement(O.c,{id:"admin.elasticsearch.usernameTitle",defaultMessage:"Server Username:"}),placeholder:P.localizeMessage("admin.elasticsearch.usernameExample",'E.g.: "elastic"'),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.usernameDescription",defaultMessage:"(Optional) The username to authenticate to the Elasticsearch server."}),value:this.state.username,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Username")}),g.a.createElement(Me,{id:"password",label:g.a.createElement(O.c,{id:"admin.elasticsearch.passwordTitle",defaultMessage:"Server Password:"}),placeholder:P.localizeMessage("admin.elasticsearch.password",'E.g.: "yourpassword"'),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.passwordDescription",defaultMessage:"(Optional) The password to authenticate to the Elasticsearch server."}),value:this.state.password,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Password")}),g.a.createElement($,{id:"sniff",label:g.a.createElement(O.c,{id:"admin.elasticsearch.sniffTitle",defaultMessage:"Enable Cluster Sniffing:"}),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.sniffDescription",defaultMessage:"When true, sniffing finds and connects to all data nodes in your cluster automatically."}),value:this.state.sniff,disabled:!this.state.enableIndexing,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.Sniff")}),g.a.createElement(Pt,{requestAction:this.doTestConfig,helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.testHelpText",defaultMessage:"Tests if the Mattermost server can connect to the Elasticsearch server specified. Testing the connection only saves the configuration if the test is successful. See log file for more detailed error messages."}),buttonText:g.a.createElement(O.c,{id:"admin.elasticsearch.elasticsearch_test_button",defaultMessage:"Test Connection"}),successMessage:{id:Object(vt.b)("admin.elasticsearch.testConfigSuccess"),defaultMessage:"Test successful. Configuration saved."},disabled:!this.state.enableIndexing}),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.elasticsearch.bulkIndexingTitle",defaultMessage:"Bulk Indexing:"})),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("div",{className:"job-table-setting"},g.a.createElement(mt,{jobType:A.k.ELASTICSEARCH_POST_INDEXING,disabled:!this.state.canPurgeAndIndex,createJobButtonText:g.a.createElement(O.c,{id:"admin.elasticsearch.createJob.title",defaultMessage:"Index Now"}),createJobHelpText:g.a.createElement(O.c,{id:"admin.elasticsearch.createJob.help",defaultMessage:"All posts in the database will be indexed from oldest to newest. Elasticsearch is available during indexing but search results may be incomplete until the indexing job is complete."}),getExtraInfoText:this.getExtraInfo})))),g.a.createElement(Pt,{requestAction:d.h,helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.purgeIndexesHelpText",defaultMessage:"Purging will entirely remove the index on the Elasticsearch server. Search results may be incomplete until a bulk index of the existing post database is rebuilt."}),buttonText:g.a.createElement(O.c,{id:"admin.elasticsearch.purgeIndexesButton",defaultMessage:"Purge Index"}),successMessage:{id:Object(vt.b)("admin.elasticsearch.purgeIndexesButton.success"),defaultMessage:"Indexes purged successfully."},errorMessage:{id:Object(vt.b)("admin.elasticsearch.purgeIndexesButton.error"),defaultMessage:"Failed to purge indexes: {error}"},disabled:!this.state.canPurgeAndIndex,label:g.a.createElement(O.c,{id:"admin.elasticsearch.purgeIndexesButton.label",defaultMessage:"Purge Indexes:"})}),g.a.createElement($,{id:"enableSearching",label:g.a.createElement(O.c,{id:"admin.elasticsearch.enableSearchingTitle",defaultMessage:"Enable Elasticsearch for search queries:"}),helpText:g.a.createElement(O.c,{id:"admin.elasticsearch.enableSearchingDescription",defaultMessage:"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used."}),value:this.state.enableSearching,disabled:!this.state.enableIndexing||!this.state.configTested,onChange:this.handleSettingChanged,setByEnv:this.isSetByEnv("ElasticsearchSettings.EnableSearching")}))}}]),t}();function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t,a){return t&&qt(e.prototype,t),a&&qt(e,a),e}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Vt=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Yt(Yt(a=function(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Yt(e):t}(this,Ft(t).call(this,e)))),"handleTestConnection",function(e){e.preventDefault(),a.setState({testing:!0,success:!1,fail:null});var t=JSON.parse(JSON.stringify(a.props.config));a.props.getConfigFromState(t),a.props.actions.testEmail(t).then(function(e){if(e.error){var t=e.error.message;e.error.detailed_error&&(t+=" - "+e.error.detailed_error),a.setState({testing:!1,fail:t})}else a.setState({testing:!1,success:!0})})}),a.state={testing:!1,success:!1,fail:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,g.a.Component),zt(t,null,[{key:"propTypes",get:function(){return{config:b.a.object.isRequired,getConfigFromState:b.a.func.isRequired,disabled:b.a.bool.isRequired,actions:b.a.shape({testEmail:b.a.func.isRequired}).isRequired}}}]),zt(t,[{key:"render",value:function(){var e=null;this.state.success?e=g.a.createElement("div",{className:"alert alert-success"},g.a.createElement("i",{className:"fa fa-check",title:P.localizeMessage("generic_icons.success","Success Icon")}),g.a.createElement(O.c,{id:"admin.email.emailSuccess",defaultMessage:"No errors were reported while sending an email.  Please check your inbox to make sure."})):this.state.fail&&(e=g.a.createElement("div",{className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning",title:P.localizeMessage("generic_icons.warning","Warning Icon")}),this.state.fail));var t=null;return t=this.state.testing?g.a.createElement("span",null,g.a.createElement("span",{className:"fa fa-refresh icon--rotate",title:P.localizeMessage("generic_icons.testing","Testing Icon")}),P.localizeMessage("admin.email.testing","Testing...")):g.a.createElement(O.c,{id:"admin.email.connectionSecurityTest",defaultMessage:"Test Connection"}),g.a.createElement("div",{className:"form-group email-connection-test"},g.a.createElement("div",{className:"col-sm-offset-4 col-sm-8"},g.a.createElement("div",{className:"help-text"},g.a.createElement("button",{className:"btn btn-default",onClick:this.handleTestConnection,disabled:this.props.disabled},t),g.a.createElement("div",null,e))))}}]),t}(),Ht=Object(n.connect)(null,function(e){return{actions:Object(i.bindActionCreators)({testEmail:r.testEmail},e)}})(Vt);var Wt=g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityNone",defaultMessage:"None"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityNoneDescription",defaultMessage:"Mattermost will connect over an insecure connection."}))),Xt=g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityTls",defaultMessage:"TLS"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityTlsDescription",defaultMessage:"Encrypts the communication between Mattermost and your server."}))),Jt=g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityStart",defaultMessage:"STARTTLS"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.connectionSecurityStartDescription",defaultMessage:"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS."}))),Kt=g.a.createElement("table",{className:"table table-bordered table-margin--none",cellPadding:"5"},g.a.createElement("tbody",null,Wt,Xt,Jt)),Qt=g.a.createElement("table",{className:"table table-bordered table-margin--none",cellPadding:"5"},g.a.createElement("tbody",null,Wt,Xt,Jt)),Zt=g.a.createElement("table",{className:"table table-bordered table-margin--none",cellPadding:"5"},g.a.createElement("tbody",null,Wt,Xt)),$t=g.a.createElement("div",null,g.a.createElement("table",{className:"table table-bordered table-margin--none",cellPadding:"5"},g.a.createElement("tbody",null,g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeGzip",defaultMessage:"gzip"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeGzipDescription",defaultMessage:"The Mattermost server will serve static files compressed with gzip."}))),g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeUncompressed",defaultMessage:"Uncompressed"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeUncompressedDescription",defaultMessage:"The Mattermost server will serve static files uncompressed."}))),g.a.createElement("tr",null,g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeDisabled",defaultMessage:"Disabled"})),g.a.createElement("td",null,g.a.createElement(O.c,{id:"admin.webserverModeDisabledDescription",defaultMessage:"The Mattermost server will not serve static files."}))))),g.a.createElement("p",{className:"help-text"},g.a.createElement(O.c,{id:"admin.webserverModeHelpText",defaultMessage:"gzip compression applies to static content files. It is recommended to enable gzip to improve performance unless your environment has specific restrictions, such as a web proxy that distributes gzip files poorly."}))),ea=[{value:"DEBUG",display_name:"DEBUG",display_name_default:"DEBUG"},{value:"INFO",display_name:"INFO",display_name_default:"INFO"},{value:"ERROR",display_name:"ERROR",display_name_default:"ERROR"}];function ta(e){return g.a.createElement(Ye,{id:"connectionSecurity",values:[{value:"",text:P.localizeMessage("admin.connectionSecurityNone","None")},{value:"TLS",text:P.localizeMessage("admin.connectionSecurityTls","TLS (Recommended)")},{value:"STARTTLS",text:P.localizeMessage("admin.connectionSecurityStart")}],label:g.a.createElement(O.c,{id:"admin.connectionSecurityTitle",defaultMessage:"Connection Security:"}),value:e.value,onChange:e.onChange,disabled:e.disabled,helpText:Kt,setByEnv:e.setByEnv})}function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ia(e){return(ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ra(e,t){return(ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}ta.defaultProps={},ta.propTypes={value:b.a.string.isRequired,onChange:b.a.func.isRequired,disabled:b.a.bool.isRequired,setByEnv:b.a.bool.isRequired};var oa=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==aa(t)&&"function"!=typeof t?sa(e):t}(this,ia(t).call(this,e))).getConfigFromState=a.getConfigFromState.bind(sa(sa(a))),a.handleSaved=a.handleSaved.bind(sa(sa(a))),a.renderSettings=a.renderSettings.bind(sa(sa(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}(t,B),function(e,t,a){t&&na(e.prototype,t),a&&na(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.EmailSettings.SendEmailNotifications=this.state.sendEmailNotifications,e.EmailSettings.EnablePreviewModeBanner=this.state.enablePreviewModeBanner,e.EmailSettings.FeedbackName=this.state.feedbackName,e.EmailSettings.FeedbackEmail=this.state.feedbackEmail,e.EmailSettings.FeedbackOrganization=this.state.feedbackOrganization,e.EmailSettings.EnableSMTPAuth=this.state.enableSMTPAuth,e.EmailSettings.SMTPUsername=this.state.smtpUsername,e.EmailSettings.SMTPPassword=this.state.smtpPassword,e.EmailSettings.SMTPServer=this.state.smtpServer,e.EmailSettings.SMTPPort=this.state.smtpPort,e.EmailSettings.ConnectionSecurity=this.state.connectionSecurity,e.EmailSettings.EnableEmailBatching=this.state.enableEmailBatching,e.ServiceSettings.EnableSecurityFixAlert=this.state.enableSecurityFixAlert,e.EmailSettings.SkipServerCertificateVerification=this.state.skipServerCertificateVerification,e.EmailSettings.EmailNotificationContentsType=this.state.emailNotificationContentsType,e}},{key:"handleSaved",value:function(e){!e.EmailSettings.SendEmailNotifications&&e.EmailSettings.EnablePreviewModeBanner||at.a.clearError(A.c.PREVIEW_MODE)}},{key:"getStateFromConfig",value:function(e){return{sendEmailNotifications:e.EmailSettings.SendEmailNotifications,enablePreviewModeBanner:e.EmailSettings.EnablePreviewModeBanner,feedbackName:e.EmailSettings.FeedbackName,feedbackEmail:e.EmailSettings.FeedbackEmail,feedbackOrganization:e.EmailSettings.FeedbackOrganization,enableSMTPAuth:e.EmailSettings.EnableSMTPAuth,smtpUsername:e.EmailSettings.SMTPUsername,smtpPassword:e.EmailSettings.SMTPPassword,smtpServer:e.EmailSettings.SMTPServer,smtpPort:e.EmailSettings.SMTPPort,connectionSecurity:e.EmailSettings.ConnectionSecurity,enableEmailBatching:e.EmailSettings.EnableEmailBatching,skipServerCertificateVerification:e.EmailSettings.SkipServerCertificateVerification,enableSecurityFixAlert:e.ServiceSettings.EnableSecurityFixAlert,emailNotificationContentsType:e.EmailSettings.EmailNotificationContentsType}}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.notifications.email",defaultMessage:"Email"})}},{key:"renderSettings",value:function(){var e=null;this.props.config.ClusterSettings.Enable?e=g.a.createElement("span",{key:"admin.email.enableEmailBatching.clusterEnabled",className:"help-text"},g.a.createElement(O.b,{id:"admin.email.enableEmailBatching.clusterEnabled",defaultMessage:"Email batching cannot be enabled unless the SiteURL is configured in <b>Configuration > SiteURL</b>."})):this.props.config.ServiceSettings.SiteURL||(e=g.a.createElement("span",{key:"admin.email.enableEmailBatching.siteURL",className:"help-text"},g.a.createElement(j.a,{id:"admin.email.enableEmailBatching.siteURL",defaultMessage:"Email batching cannot be enabled unless the SiteURL is configured in **Configuration > SiteURL**."})));var t=null,a=null;if("true"===this.props.license.EmailNotificationContents){var n=[];n.push({value:"full",text:P.localizeMessage("admin.email.notification.contents.full","Send full message contents")}),n.push({value:"generic",text:P.localizeMessage("admin.email.notification.contents.generic","Send generic description with only sender name")}),"full"===this.state.emailNotificationContentsType?a=g.a.createElement(j.a,{key:"admin.email.notification.contents.full.description",id:"admin.email.notification.contents.full.description",defaultMessage:"Sender name and channel are included in email notifications.\\nTypically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email."}):"generic"===this.state.emailNotificationContentsType&&(a=g.a.createElement(j.a,{key:"admin.email.notification.contents.generic.description",id:"admin.email.notification.contents.generic.description",defaultMessage:"Only the name of the person who sent the message, with no information about channel name or message contents are included in email notifications.\\nTypically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email."})),t=g.a.createElement(Ye,{id:"emailNotificationContentsType",values:n,label:g.a.createElement(O.c,{id:"admin.email.notification.contents.title",defaultMessage:"Email Notification Contents: "}),value:this.state.emailNotificationContentsType,onChange:this.handleChange,helpText:a,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.EmailNotificationContentsType")})}return g.a.createElement(Te,null,g.a.createElement($,{id:"sendEmailNotifications",label:g.a.createElement(O.c,{id:"admin.email.notificationsTitle",defaultMessage:"Enable Email Notifications: "}),helpText:g.a.createElement(O.b,{id:"admin.email.notificationsDescription",defaultMessage:"Typically set to true in production. When true, Mattermost attempts to send email notifications. Developers may set this field to false to skip email setup for faster development."}),value:this.state.sendEmailNotifications,onChange:this.handleChange,setByEnv:this.isSetByEnv("EmailSettings.SendEmailNotifications")}),g.a.createElement($,{id:"enablePreviewModeBanner",label:g.a.createElement(O.c,{id:"admin.email.enablePreviewModeBannerTitle",defaultMessage:"Enable Preview Mode Banner:"}),helpText:g.a.createElement(O.b,{id:"admin.email.enablePreviewModeBannerDescription",defaultMessage:"When true, the Preview Mode banner is displayed so users are aware that email notifications are disabled. When false, the Preview Mode banner is not displayed to users."}),value:this.state.enablePreviewModeBanner,onChange:this.handleChange,disabled:this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.EnablePreviewModeBanner")}),g.a.createElement($,{id:"enableEmailBatching",label:g.a.createElement(O.c,{id:"admin.email.enableEmailBatchingTitle",defaultMessage:"Enable Email Batching: "}),helpText:[g.a.createElement(O.b,{key:"admin.email.enableEmailBatchingDesc",id:"admin.email.enableEmailBatchingDesc",defaultMessage:"When true, users will have email notifications for multiple direct messages and mentions combined into a single email. Batching will occur at a default interval of 15 minutes, configurable in Account Settings > Notifications."}),e],value:this.state.enableEmailBatching&&!this.props.config.ClusterSettings.Enable&&Boolean(this.props.config.ServiceSettings.SiteURL),onChange:this.handleChange,disabled:!this.state.sendEmailNotifications||this.props.config.ClusterSettings.Enable||!this.props.config.ServiceSettings.SiteURL,setByEnv:this.isSetByEnv("EmailSettings.EnableEmailBatching")}),t,g.a.createElement(Me,{id:"feedbackName",label:g.a.createElement(O.c,{id:"admin.email.notificationDisplayTitle",defaultMessage:"Notification Display Name:"}),placeholder:P.localizeMessage("admin.email.notificationDisplayExample",'Ex: "Mattermost Notification", "System", "No-Reply"'),helpText:g.a.createElement(O.c,{id:"admin.email.notificationDisplayDescription",defaultMessage:"Display name on email account used when sending notification emails from Mattermost."}),value:this.state.feedbackName,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.FeedbackName")}),g.a.createElement(Me,{id:"feedbackEmail",label:g.a.createElement(O.c,{id:"admin.email.notificationEmailTitle",defaultMessage:"Notification From Address:"}),placeholder:P.localizeMessage("admin.email.notificationEmailExample",'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"'),helpText:g.a.createElement(O.c,{id:"admin.email.notificationEmailDescription",defaultMessage:"Email address displayed on email account used when sending notification emails from Mattermost."}),value:this.state.feedbackEmail,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.FeedbackEmail")}),g.a.createElement(Me,{id:"feedbackOrganization",label:g.a.createElement(O.c,{id:"admin.email.notificationOrganization",defaultMessage:"Notification Footer Mailing Address:"}),placeholder:P.localizeMessage("admin.email.notificationOrganizationExample",'Ex: "Â© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA"'),helpText:g.a.createElement(O.c,{id:"admin.email.notificationOrganizationDescription",defaultMessage:'Organization name and address displayed on email notifications from Mattermost, such as "Â© ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA". If the field is left empty, the organization name and address will not be displayed.'}),value:this.state.feedbackOrganization,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.FeedbackOrganization")}),g.a.createElement(Me,{id:"smtpServer",label:g.a.createElement(O.c,{id:"admin.email.smtpServerTitle",defaultMessage:"SMTP Server:"}),placeholder:P.localizeMessage("admin.email.smtpServerExample",'Ex: "smtp.yourcompany.com", "email-smtp.us-east-1.amazonaws.com"'),helpText:g.a.createElement(O.c,{id:"admin.email.smtpServerDescription",defaultMessage:"Location of SMTP email server."}),value:this.state.smtpServer,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.SMTPServer")}),g.a.createElement(Me,{id:"smtpPort",label:g.a.createElement(O.c,{id:"admin.email.smtpPortTitle",defaultMessage:"SMTP Server Port:"}),placeholder:P.localizeMessage("admin.email.smtpPortExample",'Ex: "25", "465", "587"'),helpText:g.a.createElement(O.c,{id:"admin.email.smtpPortDescription",defaultMessage:"Port of SMTP email server."}),value:this.state.smtpPort,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.SMTPPort")}),g.a.createElement($,{id:"enableSMTPAuth",label:g.a.createElement(O.c,{id:"admin.email.enableSMTPAuthTitle",defaultMessage:"Enable SMTP Authentication: "}),helpText:[g.a.createElement(O.b,{key:"admin.email.enableSMTPAuthDesc",id:"admin.email.enableSMTPAuthDesc",defaultMessage:"When true, SMTP Authentication is enabled."})],value:this.state.enableSMTPAuth,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.EnableSMTPAuth")}),g.a.createElement(Me,{id:"smtpUsername",label:g.a.createElement(O.c,{id:"admin.email.smtpUsernameTitle",defaultMessage:"SMTP Server Username:"}),placeholder:P.localizeMessage("admin.email.smtpUsernameExample",'Ex: "admin@yourcompany.com", "AKIADTOVBGERKLCBV"'),helpText:g.a.createElement(O.c,{id:"admin.email.smtpUsernameDescription",defaultMessage:" Obtain this credential from administrator setting up your email server."}),value:this.state.smtpUsername,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications||!this.state.enableSMTPAuth,setByEnv:this.isSetByEnv("EmailSettings.SMTPUsername")}),g.a.createElement(Me,{id:"smtpPassword",label:g.a.createElement(O.c,{id:"admin.email.smtpPasswordTitle",defaultMessage:"SMTP Server Password:"}),placeholder:P.localizeMessage("admin.email.smtpPasswordExample",'Ex: "yourpassword", "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"'),helpText:g.a.createElement(O.c,{id:"admin.email.smtpPasswordDescription",defaultMessage:" Obtain this credential from administrator setting up your email server."}),value:this.state.smtpPassword,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications||!this.state.enableSMTPAuth,setByEnv:this.isSetByEnv("EmailSettings.SMTPPassword")}),g.a.createElement(ta,{value:this.state.connectionSecurity,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("EmailSettings.ConnectionSecurity")}),g.a.createElement(Ht,{config:this.props.config,getConfigFromState:this.getConfigFromState,disabled:!this.state.sendEmailNotifications}),g.a.createElement($,{id:"skipServerCertificateVerification",label:g.a.createElement(O.c,{id:"admin.email.skipServerCertificateVerification.title",defaultMessage:"Skip Server Certificate Verification: "}),helpText:g.a.createElement(O.c,{id:"admin.email.skipServerCertificateVerification.description",defaultMessage:"When true, Mattermost will not verify the email server certificate."}),value:this.state.skipServerCertificateVerification,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications||""===this.state.connectionSecurity,setByEnv:this.isSetByEnv("EmailSettings.SkipServerCertificateVerification")}),g.a.createElement($,{id:"enableSecurityFixAlert",label:g.a.createElement(O.c,{id:"admin.service.securityTitle",defaultMessage:"Enable Security Alerts: "}),helpText:g.a.createElement(O.c,{id:"admin.service.securityDesc",defaultMessage:"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled."}),value:this.state.enableSecurityFixAlert,onChange:this.handleChange,disabled:!this.state.sendEmailNotifications,setByEnv:this.isSetByEnv("ServiceSettings.EnableSecurityFixAlert")}))}}]),t}(),la=a(557);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ua(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ma(e){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ba=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?pa(e):t}(this,ma(t).call(this,e))).handleChange=a.handleChange.bind(pa(pa(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(t,g.a.Component),function(e,t,a){t&&ua(e.prototype,t),a&&ua(e,a)}(t,[{key:"handleChange",value:function(e){this.props.onChange(this.props.id,e.target.value)}},{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var i,r=this.props.values[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=s.value,l=s.text;e.push(g.a.createElement("div",{className:"radio",key:o},g.a.createElement("label",null,g.a.createElement("input",{type:"radio",value:o,name:this.props.id,checked:o===this.props.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}),l)))}}catch(e){a=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return g.a.createElement(H,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},e)}}]),t}();function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}fa(ba,"propTypes",{id:b.a.string.isRequired,values:b.a.array.isRequired,label:b.a.node.isRequired,value:b.a.string.isRequired,onChange:b.a.func.isRequired,disabled:b.a.bool,setByEnv:b.a.bool.isRequired,helpText:b.a.node}),fa(ba,"defaultProps",{disabled:!1});var _a="csv",Sa="actiance",Ta="globalrelay",Oa=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ea(Ea(a=function(e,t){return!t||"object"!==ha(t)&&"function"!=typeof t?Ea(e):t}(this,ya(t).call(this,e)))),"getJobDetails",function(e){return e.data&&e.data.messages_exported?g.a.createElement(O.c,{id:"admin.complianceExport.messagesExportedCount",defaultMessage:"{count} messages exported.",values:{count:e.data.messages_exported}}):null}),a.getConfigFromState=a.getConfigFromState.bind(Ea(Ea(a))),a.renderSettings=a.renderSettings.bind(Ea(Ea(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,B),function(e,t,a){t&&ga(e.prototype,t),a&&ga(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.MessageExportSettings.EnableExport=this.state.enableComplianceExport,e.MessageExportSettings.ExportFormat=this.state.exportFormat,e.MessageExportSettings.DailyRunTime=this.state.exportJobStartTime,this.state.exportFormat===Ta&&(e.MessageExportSettings.GlobalRelaySettings={CustomerType:this.state.globalRelayCustomerType,SmtpUsername:this.state.globalRelaySmtpUsername,SmtpPassword:this.state.globalRelaySmtpPassword,EmailAddress:this.state.globalRelayEmailAddress}),e}},{key:"getStateFromConfig",value:function(e){var t={enableComplianceExport:e.MessageExportSettings.EnableExport,exportFormat:e.MessageExportSettings.ExportFormat,exportJobStartTime:e.MessageExportSettings.DailyRunTime};return e.MessageExportSettings.GlobalRelaySettings&&(t.globalRelayCustomerType=e.MessageExportSettings.GlobalRelaySettings.CustomerType,t.globalRelaySmtpUsername=e.MessageExportSettings.GlobalRelaySettings.SmtpUsername,t.globalRelaySmtpPassword=e.MessageExportSettings.GlobalRelaySettings.SmtpPassword,t.globalRelayEmailAddress=e.MessageExportSettings.GlobalRelaySettings.EmailAddress),t}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.complianceExport.title",defaultMessage:"Compliance Export (Beta)"})}},{key:"renderSettings",value:function(){var e,t=[{value:Sa,text:P.localizeMessage("admin.complianceExport.exportFormat.actiance","Actiance XML")},{value:_a,text:P.localizeMessage("admin.complianceExport.exportFormat.csv","CSV")},{value:Ta,text:P.localizeMessage("admin.complianceExport.exportFormat.globalrelay","GlobalRelay EML")}];if(this.state.exportFormat===Ta){var a=g.a.createElement(ba,{id:"globalRelayCustomerType",values:[{value:"A9",text:P.localizeMessage("admin.complianceExport.globalRelayCustomerType.a9.description","A9/Type 9")},{value:"A10",text:P.localizeMessage("admin.complianceExport.globalRelayCustomerType.a10.description","A10/Type 10")}],label:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelayCustomerType.title",defaultMessage:"Customer Type:"}),helpText:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelayCustomerType.description",defaultMessage:"The type of GlobalRelay customer account that your organization has."}),value:this.state.globalRelayCustomerType?this.state.globalRelayCustomerType:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.CustomerType")}),n=g.a.createElement(Me,{id:"globalRelaySmtpUsername",label:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelaySmtpUsername.title",defaultMessage:"SMTP Username:"}),placeholder:P.localizeMessage("admin.complianceExport.globalRelaySmtpUsername.example",'E.g.: "globalRelayUser"'),helpText:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelaySmtpUsername.description",defaultMessage:"The username that is used to authenticate against the GlobalRelay SMTP server."}),value:this.state.globalRelaySmtpUsername?this.state.globalRelaySmtpUsername:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.SmtpUsername")}),i=g.a.createElement(Me,{id:"globalRelaySmtpPassword",label:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelaySmtpPassword.title",defaultMessage:"SMTP Password:"}),placeholder:P.localizeMessage("admin.complianceExport.globalRelaySmtpPassword.example",'E.g.: "globalRelayPassword"'),helpText:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelaySmtpPassword.description",defaultMessage:"The password that is used to authenticate against the GlobalRelay SMTP server."}),value:this.state.globalRelaySmtpPassword?this.state.globalRelaySmtpPassword:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.SmtpPassword")}),r=g.a.createElement(Me,{id:"globalRelayEmailAddress",label:g.a.createElement(O.c,{id:"admin.complianceExport.globalRelayEmailAddress.title",defaultMessage:"Email Address:"}),placeholder:P.localizeMessage("admin.complianceExport.globalRelayEmailAddress.example",'E.g.: "globalrelay@mattermost.com"'),helpText:g.a.createElement(O.b,{id:"admin.complianceExport.globalRelayEmailAddress.description",defaultMessage:"The email address that your GlobalRelay server monitors for incoming Compliance Exports."}),value:this.state.globalRelayEmailAddress?this.state.globalRelayEmailAddress:"",disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.GlobalRelaySettings.EmailAddress")});e=g.a.createElement(Te,{id:"globalRelaySettings"},a,n,i,r)}var s=g.a.createElement(j.a,{id:"admin.complianceExport.exportFormat.description",defaultMessage:'Format of the compliance export. Corresponds to the system that you want to import the data into.\\n \\nFor Actiance XML, compliance export files are written to the \\"exports\\" subdirectory of the configured [Local Storage Directory]({siteURL}/admin_console/files/storage). For Global Relay EML, they are emailed to the configured email address.',values:{siteURL:Object(la.e)()}});return g.a.createElement(Te,null,g.a.createElement($,{id:"enableComplianceExport",label:g.a.createElement(O.c,{id:"admin.service.complianceExportTitle",defaultMessage:"Enable Compliance Export:"}),helpText:g.a.createElement(j.a,{id:"admin.service.complianceExportDesc",defaultMessage:"When true, Mattermost will export all messages that were posted in the last 24 hours. The export task is scheduled to run once per day. See [the documentation](!https://about.mattermost.com/default-compliance-export-documentation) to learn more."}),value:this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.EnableExport")}),g.a.createElement(Me,{id:"exportJobStartTime",label:g.a.createElement(O.c,{id:"admin.complianceExport.exportJobStartTime.title",defaultMessage:"Compliance Export Time:"}),placeholder:P.localizeMessage("admin.complianceExport.exportJobStartTime.example",'E.g.: "02:00"'),helpText:g.a.createElement(O.b,{id:"admin.complianceExport.exportJobStartTime.description",defaultMessage:"Set the start time of the daily scheduled compliance export job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM."}),value:this.state.exportJobStartTime,disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.DailyRunTime")}),g.a.createElement(Ye,{id:"exportFormat",values:t,label:g.a.createElement(O.c,{id:"admin.complianceExport.exportFormat.title",defaultMessage:"Export Format:"}),helpText:s,value:this.state.exportFormat,disabled:!this.state.enableComplianceExport,onChange:this.handleChange,setByEnv:this.isSetByEnv("DataRetentionSettings.ExportFormat")}),e,g.a.createElement(mt,{jobType:A.k.MESSAGE_EXPORT,disabled:!this.state.enableComplianceExport,createJobButtonText:g.a.createElement(O.c,{id:"admin.complianceExport.createJob.title",defaultMessage:"Run Compliance Export Job Now"}),createJobHelpText:g.a.createElement(O.c,{id:"admin.complianceExport.createJob.help",defaultMessage:"Initiates a Compliance Export job immediately."}),getExtraInfoText:this.getJobDetails}))}}]),t}();function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ka=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==wa(t)&&"function"!=typeof t?Ma(e):t}(this,ja(t).call(this,e))).getConfigFromState=a.getConfigFromState.bind(Ma(Ma(a))),a.renderSettings=a.renderSettings.bind(Ma(Ma(a))),a.getSampleErrorMsg=a.getSampleErrorMsg.bind(Ma(Ma(a))),a.handlePasswordLengthChange=a.handlePasswordLengthChange.bind(Ma(Ma(a))),a.handleCheckboxChange=a.handleCheckboxChange.bind(Ma(Ma(a))),a.state=Object.assign(a.state,{passwordMinimumLength:e.config.PasswordSettings.MinimumLength,passwordLowercase:e.config.PasswordSettings.Lowercase,passwordNumber:e.config.PasswordSettings.Number,passwordUppercase:e.config.PasswordSettings.Uppercase,passwordSymbol:e.config.PasswordSettings.Symbol,maximumLoginAttempts:e.config.ServiceSettings.MaximumLoginAttempts}),Object(vt.b)("user.settings.security.passwordErrorLowercase"),Object(vt.b)("user.settings.security.passwordErrorLowercaseUppercase"),Object(vt.b)("user.settings.security.passwordErrorLowercaseUppercaseNumber"),Object(vt.b)("user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol"),Object(vt.b)("user.settings.security.passwordErrorLowercaseUppercaseSymbol"),Object(vt.b)("user.settings.security.passwordErrorLowercaseNumber"),Object(vt.b)("user.settings.security.passwordErrorLowercaseNumberSymbol"),Object(vt.b)("user.settings.security.passwordErrorLowercaseSymbol"),Object(vt.b)("user.settings.security.passwordErrorUppercase"),Object(vt.b)("user.settings.security.passwordErrorUppercaseNumber"),Object(vt.b)("user.settings.security.passwordErrorUppercaseNumberSymbol"),Object(vt.b)("user.settings.security.passwordErrorUppercaseSymbol"),Object(vt.b)("user.settings.security.passwordErrorNumber"),Object(vt.b)("user.settings.security.passwordErrorNumberSymbol"),Object(vt.b)("user.settings.security.passwordErrorSymbol");var n="user.settings.security.passwordError";return e.config.PasswordSettings.Lowercase&&(n+="Lowercase"),e.config.PasswordSettings.Uppercase&&(n+="Uppercase"),e.config.PasswordSettings.Number&&(n+="Number"),e.config.PasswordSettings.Symbol&&(n+="Symbol"),a.sampleErrorMsg=g.a.createElement(O.c,{id:n,default:"Your password must contain between {min} and {max} characters.",values:{min:a.state.passwordMinimumLength||A.D.MIN_PASSWORD_LENGTH,max:A.D.MAX_PASSWORD_LENGTH}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(t,B),function(e,t,a){t&&Pa(e.prototype,t),a&&Pa(e,a)}(t,[{key:"getConfigFromState",value:function(e){return e.PasswordSettings.MinimumLength=this.parseIntNonZero(this.state.passwordMinimumLength,A.D.MIN_PASSWORD_LENGTH),e.PasswordSettings.Lowercase=this.refs.lowercase.checked,e.PasswordSettings.Uppercase=this.refs.uppercase.checked,e.PasswordSettings.Number=this.refs.number.checked,e.PasswordSettings.Symbol=this.refs.symbol.checked,e.ServiceSettings.MaximumLoginAttempts=this.parseIntNonZero(this.state.maximumLoginAttempts),e}},{key:"getStateFromConfig",value:function(e){return{passwordMinimumLength:e.PasswordSettings.MinimumLength,passwordLowercase:e.PasswordSettings.Lowercase,passwordNumber:e.PasswordSettings.Number,passwordUppercase:e.PasswordSettings.Uppercase,passwordSymbol:e.PasswordSettings.Symbol,maximumLoginAttempts:e.ServiceSettings.MaximumLoginAttempts}}},{key:"getSampleErrorMsg",value:function(e){if(this.props.config.PasswordSettings.MinimumLength>A.D.MAX_PASSWORD_LENGTH||this.props.config.PasswordSettings.MinimumLength<A.D.MIN_PASSWORD_LENGTH)return g.a.createElement(O.c,{id:"user.settings.security.passwordMinLength",default:"Invalid minimum length, cannot show preview."});var t="user.settings.security.passwordError";return this.refs.lowercase.checked&&(t+="Lowercase"),this.refs.uppercase.checked&&(t+="Uppercase"),this.refs.number.checked&&(t+="Number"),this.refs.symbol.checked&&(t+="Symbol"),g.a.createElement(O.c,{id:t,default:"Your password must contain between {min} and {max} characters.",values:{min:e||A.D.MIN_PASSWORD_LENGTH,max:A.D.MAX_PASSWORD_LENGTH}})}},{key:"handlePasswordLengthChange",value:function(e,t){this.sampleErrorMsg=this.getSampleErrorMsg(t),this.handleChange(e,t)}},{key:"handleCheckboxChange",value:function(e,t){this.sampleErrorMsg=this.getSampleErrorMsg(this.state.passwordMinimumLength),this.handleChange(e,t)}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.security.password",defaultMessage:"Password"})}},{key:"renderSettings",value:function(){return g.a.createElement(Te,null,g.a.createElement("div",null,g.a.createElement(Me,{id:"passwordMinimumLength",label:g.a.createElement(O.c,{id:"admin.password.minimumLength",defaultMessage:"Minimum Password Length:"}),placeholder:P.localizeMessage("admin.password.minimumLengthExample",'E.g.: "5"'),helpText:g.a.createElement(O.c,{id:"admin.password.minimumLengthDescription",defaultMessage:"Minimum number of characters required for a valid password. Must be a whole number greater than or equal to {min} and less than or equal to {max}.",values:{min:A.D.MIN_PASSWORD_LENGTH,max:A.D.MAX_PASSWORD_LENGTH}}),value:this.state.passwordMinimumLength,onChange:this.handlePasswordLengthChange,setByEnv:this.isSetByEnv("PasswordSettings.MinimumLength")}),g.a.createElement(H,{label:g.a.createElement(O.c,{id:"passwordRequirements",defaultMessage:"Password Requirements:"})},g.a.createElement("div",null,g.a.createElement("label",{className:"checkbox-inline"},g.a.createElement("input",{type:"checkbox",ref:"lowercase",defaultChecked:this.state.passwordLowercase,name:"admin.password.lowercase",onChange:this.handleCheckboxChange}),g.a.createElement(O.c,{id:"admin.password.lowercase",defaultMessage:"At least one lowercase letter"}))),g.a.createElement("div",null,g.a.createElement("label",{className:"checkbox-inline"},g.a.createElement("input",{type:"checkbox",ref:"uppercase",defaultChecked:this.state.passwordUppercase,name:"admin.password.uppercase",onChange:this.handleCheckboxChange}),g.a.createElement(O.c,{id:"admin.password.uppercase",defaultMessage:"At least one uppercase letter"}))),g.a.createElement("div",null,g.a.createElement("label",{className:"checkbox-inline"},g.a.createElement("input",{type:"checkbox",ref:"number",defaultChecked:this.state.passwordNumber,name:"admin.password.number",onChange:this.handleCheckboxChange}),g.a.createElement(O.c,{id:"admin.password.number",defaultMessage:"At least one number"}))),g.a.createElement("div",null,g.a.createElement("label",{className:"checkbox-inline"},g.a.createElement("input",{type:"checkbox",ref:"symbol",defaultChecked:this.state.passwordSymbol,name:"admin.password.symbol",onChange:this.handleCheckboxChange}),g.a.createElement(O.c,{id:"admin.password.symbol",defaultMessage:'At least one symbol (e.g. "~!@#$%^&*()")'}))),g.a.createElement("div",null,g.a.createElement("br",null),g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.password.preview",defaultMessage:"Error message preview:"})),g.a.createElement("br",null),this.sampleErrorMsg))),g.a.createElement(Me,{id:"maximumLoginAttempts",label:g.a.createElement(O.c,{id:"admin.service.attemptTitle",defaultMessage:"Maximum Login Attempts:"}),placeholder:P.localizeMessage("admin.service.attemptExample",'E.g.: "10"'),helpText:g.a.createElement(O.c,{id:"admin.service.attemptDescription",defaultMessage:"Login attempts allowed before user is locked out and required to reset password via email."}),value:this.state.maximumLoginAttempts,onChange:this.handleChange,setByEnv:this.isSetByEnv("ServiceSettings.MaximumLoginAttempts")}))}}]),t}(),Ca=(a(233),a(92),a(237),a(97),a(96),a(665)),Aa=a(583),Na=a(844),Ra=a(1171);function Da(e){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ia(e){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var qa=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Da(t)&&"function"!=typeof t?Ba(e):t}(this,Ia(t).call(this,e))).handleChange=a.handleChange.bind(Ba(Ba(a))),a.state={error:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(t,g.a.Component),function(e,t,a){t&&La(e.prototype,t),a&&La(e,a)}(t,[{key:"handleChange",value:function(e){var t=e.map(function(e){return e.value});this.props.selected.length>0&&this.props.mustBePresent&&-1===t.join(",").indexOf(this.props.mustBePresent)?this.setState({error:this.props.notPresent}):(this.props.onChange(this.props.id,t),this.setState({error:!1}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.selected.length>0&&e.mustBePresent&&-1===e.selected.join(",").indexOf(e.mustBePresent)?this.setState({error:this.props.notPresent}):this.setState({error:!1})}},{key:"render",value:function(){return g.a.createElement(H,{label:this.props.label,inputId:this.props.id,helpText:this.props.helpText,setByEnv:this.props.setByEnv},g.a.createElement(Ra.a,{id:this.props.id,multi:!0,labelKey:"text",options:this.props.values,joinValues:!0,clearable:!1,disabled:this.props.disabled||this.props.setByEnv,noResultsText:this.props.noResultText,onChange:this.handleChange,value:this.props.selected}),g.a.createElement(C.a,{error:this.state.error}))}}]),t}();Fa(qa,"propTypes",{id:b.a.string.isRequired,values:b.a.array.isRequired,label:b.a.node.isRequired,selected:b.a.array.isRequired,mustBePresent:b.a.string,onChange:b.a.func.isRequired,disabled:b.a.bool,setByEnv:b.a.bool.isRequired,helpText:b.a.node,noResultText:b.a.node,errorText:b.a.node,notPresent:b.a.node}),Fa(qa,"defaultProps",{disabled:!1});var za=a(1096);function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(e,t){return(Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ja=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xa(Wa(Wa(a=function(e,t){return!t||"object"!==Ga(t)&&"function"!=typeof t?Wa(e):t}(this,Va(t).call(this,e)))),"handleChange",function(e){a.props.onChange(a.props.id,e.hex)}),Xa(Wa(Wa(a)),"togglePicker",function(){a.props.disabled?a.setState({showPicker:!1}):a.setState({showPicker:!a.state.showPicker})}),Xa(Wa(Wa(a)),"closePicker",function(e){e.target.closest("."+a.getPickerClass())||a.setState({showPicker:!1})}),Xa(Wa(Wa(a)),"onTextInput",function(e){a.props.onChange(a.props.id,e.target.value)}),Xa(Wa(Wa(a)),"getPickerClass",function(){return a.props.id?"picker-"+a.props.id.replace(".","-"):""}),a.state={showPicker:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Ya(e.prototype,t),a&&Ya(e,a)}(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.closePicker)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closePicker)}},{key:"render",value:function(){var e;return this.state.showPicker&&(e=g.a.createElement("div",{className:"color-picker__popover "+this.getPickerClass()},g.a.createElement(za.ChromePicker,{color:this.props.value,onChange:this.handleChange}))),g.a.createElement(H,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},g.a.createElement("div",{className:"input-group color-picker colorpicker-element"},g.a.createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.onTextInput,disabled:this.props.disabled}),g.a.createElement("span",{className:"input-group-addon "+this.getPickerClass(),onClick:this.togglePicker},g.a.createElement("i",{style:{backgroundColor:this.props.value}})),e))}}]),t}();Xa(Ja,"propTypes",{id:b.a.string.isRequired,label:b.a.node.isRequired,helpText:b.a.node,value:b.a.string.isRequired,onChange:b.a.func,disabled:b.a.bool});var Ka=a(1128),Qa=a.n(Ka);function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t,a){return t&&en(e.prototype,t),a&&en(e,a),e}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rn=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?nn(e):t}(this,$a(t).call(this,e))).regenerate=a.regenerate.bind(nn(nn(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,g.a.Component),tn(t,null,[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,label:b.a.node.isRequired,placeholder:b.a.string,value:b.a.string.isRequired,onChange:b.a.func.isRequired,disabled:b.a.bool.isRequired,setByEnv:b.a.bool.isRequired,disabledText:b.a.node,helpText:b.a.node.isRequired,regenerateText:b.a.node,regenerateHelpText:b.a.node}}},{key:"defaultProps",get:function(){return{disabled:!1,regenerateText:g.a.createElement(O.c,{id:"admin.regenerate",defaultMessage:"Regenerate"})}}}]),tn(t,[{key:"regenerate",value:function(e){e.preventDefault(),this.props.onChange(this.props.id,Qa.a.randomBytes(256).toString("base64").substring(0,32))}},{key:"render",value:function(){var e=null;this.props.disabled&&this.props.disabledText&&(e=g.a.createElement("div",{className:"admin-console__disabled-text"},this.props.disabledText));var t=null;this.props.regenerateHelpText&&(t=g.a.createElement("div",{className:"help-text"},this.props.regenerateHelpText));var a=this.props.value;return a||(a=g.a.createElement("span",{className:"placeholder-text"},this.props.placeholder)),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:this.props.id},this.props.label),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("div",{className:"form-control disabled",id:this.props.id},a),e,g.a.createElement("div",{className:"help-text"},this.props.helpText),g.a.createElement("div",{className:"help-text"},g.a.createElement("button",{className:"btn btn-default",onClick:this.regenerate,disabled:this.props.disabled||this.props.setByEnv},this.props.regenerateText)),t,this.props.setByEnv?g.a.createElement(F,null):null))}}]),t}(),sn=a(1071),on=a(670),ln=a(671);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dn(e,t,a){return t&&mn(e.prototype,t),a&&mn(e,a),e}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var hn=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(fn(fn(a=function(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?fn(e):t}(this,un(t).call(this,e)))),"handleChange",function(e){a.props.onChange(a.props.id,e.target.value)}),bn(fn(fn(a)),"handleUserSelected",function(e){a.props.onChange(a.props.id,e.username)}),a.userSuggestionProviders=[new sn.a],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,g.a.Component),dn(t,null,[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,label:b.a.node.isRequired,placeholder:b.a.string,helpText:b.a.node,value:b.a.string,onChange:b.a.func,disabled:b.a.bool}}}]),dn(t,[{key:"render",value:function(){return g.a.createElement(H,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},g.a.createElement("div",{className:"admin-setting-user__dropdown"},g.a.createElement(on.a,{id:"admin_user_setting_"+this.props.id,className:"form-control",placeholder:this.props.placeholder,value:this.props.value,onChange:this.handleChange,onItemSelected:this.handleUserSelected,listComponent:ln.a,listStyle:"bottom",providers:this.userSuggestionProviders,disabled:this.props.disabled,requiredCharacters:0,openOnFocus:!0})))}}]),t}(),gn=a(545),yn=a.n(gn);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sn(e,t,a){return t&&_n(e.prototype,t),a&&_n(e,a),e}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pn=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wn(On(On(a=function(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?On(e):t}(this,En(t).call(this,e)))),"handleChange",function(){var e=a.refs.fileInput.files;e&&e.length>0&&a.setState({fileSelected:!0,fileName:e[0].name})}),wn(On(On(a)),"handleSubmit",function(e){e.preventDefault(),yn()(a.refs.upload_button).button("loading"),a.props.onSubmit(a.props.id,a.refs.fileInput.files[0],function(e){yn()(a.refs.upload_button).button("reset"),e&&P.clearFileInput(a.refs.fileInput)})}),a.state={fileName:null,serverError:e.error},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,H),Sn(t,null,[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,label:b.a.node.isRequired,helpText:b.a.node,uploadingText:b.a.node,onSubmit:b.a.func.isRequired,disabled:b.a.bool,fileType:b.a.string.isRequired,error:b.a.string}}}]),Sn(t,[{key:"render",value:function(){var e;this.state.serverError&&(e=g.a.createElement("div",{className:"form-group has-error"},g.a.createElement("label",{className:"control-label"},this.state.serverError)));var t,a="btn";return this.state.fileSelected&&(a="btn btn-primary"),t=this.state.fileName?this.state.fileName:g.a.createElement(O.c,{id:"admin.file_upload.noFile",defaultMessage:"No file uploaded"}),g.a.createElement(H,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},g.a.createElement("div",null,g.a.createElement("div",{className:"file__upload"},g.a.createElement("button",{className:"btn btn-default",disabled:this.props.disabled},g.a.createElement(O.c,{id:"admin.file_upload.chooseFile",defaultMessage:"Choose File"})),g.a.createElement("input",{ref:"fileInput",type:"file",disabled:this.props.disabled,accept:this.props.fileType,onChange:this.handleChange})),g.a.createElement("button",{className:a,disabled:!this.state.fileSelected,onClick:this.handleSubmit,ref:"upload_button","data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> ".concat(this.props.uploadingText)},g.a.createElement(O.c,{id:"admin.file_upload.uploadFile",defaultMessage:"Upload"})),g.a.createElement("div",{className:"help-text no-margin"},t),e))}}]),t}();function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var An=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Cn(Cn(a=function(e,t){return!t||"object"!==jn(t)&&"function"!=typeof t?Cn(e):t}(this,(e=Mn(t)).call.apply(e,[this].concat(i))))),"handleRemove",function(e){e.preventDefault(),yn()(a.refs.remove_button).button("loading"),a.props.onSubmit(a.props.id,function(){yn()(a.refs.remove_button).button("reset")})}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(t,H),function(e,t,a){t&&xn(e.prototype,t),a&&xn(e,a)}(t,[{key:"render",value:function(){return g.a.createElement(H,{label:this.props.label,helpText:this.props.helpText,inputId:this.props.id},g.a.createElement("div",null,g.a.createElement("div",{className:"help-text remove-filename"},this.props.fileName),g.a.createElement("button",{className:"btn btn-danger",onClick:this.handleRemove,ref:"remove_button",disabled:this.props.disabled,"data-loading-text":"<span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> ".concat(this.props.removingText)},this.props.removeButtonText)))}}],[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,label:b.a.node.isRequired,helpText:b.a.node,removeButtonText:b.a.node.isRequired,removingText:b.a.node,fileName:b.a.string.isRequired,onSubmit:b.a.func.isRequired,disabled:b.a.bool}}}]),t}();function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){qn(e,t,a[t])})}return e}function Dn(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Ln(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Dn(r,n,i,s,o,"next",e)}function o(e){Dn(r,n,i,s,o,"throw",e)}s(void 0)})}}function In(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var zn=function(e){function t(e){var a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qn(Fn(Fn(n=function(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?Fn(e):t}(this,Un(t).call(this,e)))),"handleSubmit",function(){var e=Ln(regeneratorRuntime.mark(function e(a){var i,r,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n.setState({saving:!0,serverError:null}),"both"!==n.state.saveNeeded&&"permissions"!==n.state.saveNeeded){e.next=11;break}return i=n.props.schema&&n.props.schema.settings||[],r=i.reduce(function(e,t){return t.type===A.D.SettingsTypes.TYPE_PERMISSION&&(e[t.permissions_mapping_name]=n.state[t.key].toString()),e},{}),s=Object(Na.b)(r,n.props.roles),o=!0,e.next=9,Promise.all(Object.values(s).map(function(){var e=Ln(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.editRole(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),o=!1,n.setState({saving:!1,serverError:e.t0.message});case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()));case 9:if(o){e.next=11;break}return e.abrupt("return");case 11:"both"===n.state.saveNeeded||"config"===n.state.saveNeeded?n.doSubmit(null,t.getStateFromConfig):(n.setState({saving:!1,saveNeeded:!1,serverError:null}),n.props.setNavigationBlocked(!1));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),qn(Fn(Fn(n)),"renderTitle",function(){return n.props.schema?!1===n.props.schema.translate?n.props.schema.name||n.props.schema.id:g.a.createElement(O.c,{id:n.props.schema.name||n.props.schema.id}):""}),qn(Fn(Fn(n)),"renderBanner",function(e){return n.props.schema?!1===n.props.schema.translate?g.a.createElement("span",null,e.label):"string"==typeof e.label?e.label_markdown?g.a.createElement(j.a,{id:e.label,values:e.label_values,defaultMessage:e.label_default}):g.a.createElement(O.c,{id:e.label,defaultMessage:e.label_default,values:e.label_values}):e.label:g.a.createElement("span",null,"")}),qn(Fn(Fn(n)),"renderHelpText",function(e){return n.props.schema?!1===n.props.schema.translate?g.a.createElement("span",null,e.help_text):(e.disabled_help_text&&n.isDisabled(e)?(t=e.disabled_help_text,a=e.disabled_help_text_markdown,i=e.disabled_help_text_values,r=e.disabled_help_text_default):(t=e.help_text,a=e.help_text_markdown,i=e.help_text_values,r=e.help_text_default),"string"==typeof t?a?g.a.createElement(j.a,{id:t,values:i,defaultMessage:r}):g.a.createElement(O.c,{id:t,defaultMessage:r,values:i}):t):g.a.createElement("span",null,"");var t,a,i,r}),qn(Fn(Fn(n)),"renderLabel",function(e){return n.props.schema?!1===n.props.schema.translate?e.label:P.localizeMessage(e.label,e.label_default):""}),qn(Fn(Fn(n)),"isDisabled",function(e){return"function"==typeof e.isDisabled?e.isDisabled(n.props.config,n.state,n.props.license):Boolean(e.isDisabled)}),qn(Fn(Fn(n)),"isHidden",function(e){return"function"==typeof e.isHidden?e.isHidden(n.props.config,n.state,n.props.license):Boolean(e.isHidden)}),qn(Fn(Fn(n)),"buildButtonSetting",function(e){return g.a.createElement(Pt,{key:n.props.schema.id+"_text_"+e.key,requestAction:e.action,helpText:n.renderHelpText(e),loadingText:P.localizeMessage(e.loading,e.loading_default),buttonText:g.a.createElement("span",null,n.renderLabel(e)),showSuccessMessage:Boolean(e.success_message),includeDetailedError:!0,errorMessage:{id:e.error_message,defaultMessage:e.error_message_default},successMessage:e.success_message&&{id:e.success_message,defaultMessage:e.success_message_default}})}),qn(Fn(Fn(n)),"buildTextSetting",function(e){var t="input";e.type===A.D.SettingsTypes.TYPE_NUMBER?t="number":e.type===A.D.SettingsTypes.TYPE_LONG_TEXT&&(t="textarea");var a=n.state[e.key]||"";return e.dynamic_value&&(a=e.dynamic_value(a,n.props.config,n.state,n.props.license)),g.a.createElement(Me,{key:n.props.schema.id+"_text_"+e.key,id:e.key,type:t,label:n.renderLabel(e),helpText:n.renderHelpText(e),placeholder:P.localizeMessage(e.placeholder,e.placeholder_default),value:a,disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange,maxLength:e.max_length})}),qn(Fn(Fn(n)),"buildColorSetting",function(e){return g.a.createElement(Ja,{key:n.props.schema.id+"_text_"+e.key,id:e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),placeholder:P.localizeMessage(e.placeholder,e.placeholder_default),value:n.state[e.key]||"",disabled:n.isDisabled(e),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildBoolSetting",function(e){return g.a.createElement($,{key:n.props.schema.id+"_bool_"+e.key,id:e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),value:!n.isDisabled(e)&&n.state[e.key]||!1,disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildPermissionSetting",function(e){return g.a.createElement($,{key:n.props.schema.id+"_bool_"+e.key,id:e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),value:!n.isDisabled(e)&&n.state[e.key]||!1,disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handlePermissionChange})}),qn(Fn(Fn(n)),"buildDropdownSetting",function(e){var t=e.options||[],a=t.map(function(e){return{value:e.value,text:P.localizeMessage(e.display_name)}}),i=n.state[e.key]||a[0].value,r=null,s=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var m=c.value;if(m.help_text&&m.value===i){r=m;break}}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}return g.a.createElement(Ye,{key:n.props.schema.id+"_dropdown_"+e.key,id:e.key,values:a,label:n.renderLabel(e),helpText:n.renderHelpText(r||e),value:i,disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildLanguageSetting",function(e){var t=Ca.b(),a=Object.keys(t).map(function(e){return{value:t[e].value,text:t[e].name,order:t[e].order}}).sort(function(e,t){return e.order-t.order});if(e.multiple){var i=g.a.createElement(O.c,{id:e.no_result,defaultMessage:e.no_result_default}),r=g.a.createElement(O.c,{id:e.not_present,defaultMessage:e.not_present_default});return g.a.createElement(qa,{key:n.props.schema.id+"_language_"+e.key,id:e.key,label:n.renderLabel(e),values:a,helpText:n.renderHelpText(e),selected:n.state[e.key]&&n.state[e.key].split(",")||[],disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:function(e,t){return n.handleChange(e,t.join(","))},noResultText:i,notPresent:r})}return g.a.createElement(Ye,{key:n.props.schema.id+"_language_"+e.key,id:e.key,label:n.renderLabel(e),values:a,helpText:n.renderHelpText(e),value:n.state[e.key]||a[0].value,disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildRadioSetting",function(e){var t=(e.options||[]).map(function(e){return{value:e.value,text:e.display_name}});return g.a.createElement(ba,{key:n.props.schema.id+"_radio_"+e.key,id:e.key,values:t,label:n.renderLabel(e),helpText:n.renderHelpText(e),value:n.state[e.key]||t[0],disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildBannerSetting",function(e){return n.isDisabled(e)?null:g.a.createElement("div",{className:"banner "+e.banner_type,key:n.props.schema.id+"_bool_"+e.key},g.a.createElement("div",{className:"banner__content"},g.a.createElement("span",null,n.renderBanner(e))))}),qn(Fn(Fn(n)),"buildGeneratedSetting",function(e){return g.a.createElement(rn,{key:n.props.schema.id+"_generated_"+e.key,id:e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),regenerateHelpText:e.regenerate_help_text,placeholder:P.localizeMessage(e.placeholder,e.placeholder_default),value:n.state[e.key]||"",disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleGeneratedChange})}),qn(Fn(Fn(n)),"handleGeneratedChange",function(e,t){n.handleChange(e,t.replace("+","-").replace("/","_"))}),qn(Fn(Fn(n)),"handleChange",function(e,t){var a="config";"permissions"===n.state.saveNeeded&&(a="both"),n.setState(qn({saveNeeded:a},e,t)),n.props.setNavigationBlocked(!0)}),qn(Fn(Fn(n)),"handlePermissionChange",function(e,t){var a="permissions";"config"===n.state.saveNeeded&&(a="both"),n.setState(qn({saveNeeded:a},e,t)),n.props.setNavigationBlocked(!0)}),qn(Fn(Fn(n)),"buildUsernameSetting",function(e){return g.a.createElement(hn,{key:n.props.schema.id+"_userautocomplete_"+e.key,id:e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),placeholder:P.localizeMessage(e.placeholder,e.placeholder_default)||P.localizeMessage("search_bar.search","Search"),value:n.state[e.key]||"",disabled:n.isDisabled(e),onChange:n.handleChange})}),qn(Fn(Fn(n)),"buildJobsTableSetting",function(e){return g.a.createElement(mt,{key:n.props.schema.id+"_userautocomplete_"+e.key,jobType:e.job_type,getExtraInfoText:e.render_job,disabled:n.isDisabled(e),createJobButtonText:g.a.createElement(O.c,{id:e.label,defaultMessage:e.label_default}),createJobHelpText:g.a.createElement(j.a,{id:e.help_text,defaultMessage:e.help_text_default})})}),qn(Fn(Fn(n)),"buildFileUploadSetting",function(e){if(n.state[e.key]){return g.a.createElement(An,{id:n.props.schema.id,key:n.props.schema.id+"_fileupload_"+e.key,label:n.renderLabel(e),helpText:g.a.createElement(O.c,{id:e.remove_help_text,defaultMessage:e.remove_help_text_default}),removeButtonText:P.localizeMessage(e.remove_button_text,e.remove_button_text_default),removingText:P.localizeMessage(e.removing_text,e.removing_text_default),fileName:n.state[e.key],onSubmit:function(t,a){e.remove_action(function(){var t;n.handleChange(e.key,""),n.setState((qn(t={},e.key,null),qn(t,"".concat(e.key,"Error"),null),t))},function(t){var i;a(),n.setState((qn(i={},e.key,null),qn(i,"".concat(e.key,"Error"),t.message),i))})},disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key)})}return g.a.createElement(Pn,{id:e.key,key:n.props.schema.id+"_fileupload_"+e.key,label:n.renderLabel(e),helpText:n.renderHelpText(e),uploadingText:P.localizeMessage(e.uploading_text,e.uploading_text_default),disabled:n.isDisabled(e),fileType:e.fileType,onSubmit:function(t,a,i){e.upload_action(a,function(){var r,s=a.name;n.handleChange(t,s),n.setState((qn(r={},e.key,s),qn(r,"".concat(e.key,"Error"),null),r)),i&&"function"==typeof i&&i()},function(e){i&&"function"==typeof i&&i(e.message)})},error:n.state.idpCertificateFileError,setByEnv:n.isSetByEnv(e.key)})}),qn(Fn(Fn(n)),"buildCustomSetting",function(e){var t=e.component;return g.a.createElement(t,{key:n.props.schema.id+"_userautocomplete_"+e.key,id:e.key,value:n.state[e.key]||"",disabled:n.isDisabled(e),setByEnv:n.isSetByEnv(e.key),onChange:n.handleChange})}),qn(Fn(Fn(n)),"renderSettings",function(){var e=n.props.schema;if(!e)return g.a.createElement(ee.a,null);var t,a,i=[];return e.settings&&e.settings.forEach(function(e){if(n.buildSettingFunctions[e.type]&&!n.isHidden(e)){var t=e;n.isPlugin&&(t=Rn({},e,{key:e.key.toLowerCase()})),i.push(n.buildSettingFunctions[e.type](t))}}),e.header&&(t=g.a.createElement("div",{className:"banner",dangerouslySetInnerHTML:{__html:Object(Aa.e)(e.header,{mentionHighlight:!1})}})),e.footer&&(a=g.a.createElement("div",{className:"banner",dangerouslySetInnerHTML:{__html:Object(Aa.e)(e.footer,{mentionHighlight:!1})}})),g.a.createElement(Te,null,t,i,a)}),qn(Fn(Fn(n)),"closeTooltip",function(){n.setState({errorTooltip:!1})}),qn(Fn(Fn(n)),"openTooltip",function(e){var t=e.currentTarget.querySelector(".control-label"),a=t.offsetWidth<t.scrollWidth;n.setState({errorTooltip:a})}),qn(Fn(Fn(n)),"doSubmit",function(e,t){n.setState({saving:!0,serverError:null});var a=JSON.parse(JSON.stringify(n.props.config));a=n.getConfigFromState(a),Object(d.A)(a,function(i){n.setState(t(i)),n.setState({saveNeeded:!1,saving:!1}),n.props.setNavigationBlocked(!1),e&&e(),n.handleSaved&&n.handleSaved(a)},function(t){n.setState({saving:!1,serverError:t.message,serverErrorId:t.id}),e&&e(),n.handleSaved&&n.handleSaved(a)})}),qn(Fn(Fn(n)),"isSetByEnv",function(e){return Boolean(t.getConfigValue(n.props.environmentConfig,e))}),qn(Fn(Fn(n)),"render",function(){var e=n.props.schema;if(e&&e.component){var t=e.component;return g.a.createElement(t,n.props)}return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},n.renderTitle()),g.a.createElement("form",{className:"form-horizontal",role:"form",onSubmit:n.handleSubmit},n.renderSettings(),g.a.createElement("div",{className:"admin-console-save"},g.a.createElement(k.a,{saving:n.state.saving,disabled:!n.state.saveNeeded||n.canSave&&!n.canSave(),onClick:n.handleSubmit,savingMessage:P.localizeMessage("admin.saving","Saving Config...")}),g.a.createElement("div",{className:"error-message",ref:"errorMessage",onMouseOver:n.openTooltip,onMouseOut:n.closeTooltip},g.a.createElement(C.a,{error:n.state.serverError})),g.a.createElement(x.a,{show:n.state.errorTooltip,delayShow:A.D.OVERLAY_TIME_DELAY,placement:"top",target:n.refs.errorMessage},g.a.createElement(M.a,{id:"error-tooltip"},n.state.serverError)))))}),n.isPlugin=!1,n.buildSettingFunctions=(qn(a={},A.D.SettingsTypes.TYPE_TEXT,n.buildTextSetting),qn(a,A.D.SettingsTypes.TYPE_LONG_TEXT,n.buildTextSetting),qn(a,A.D.SettingsTypes.TYPE_NUMBER,n.buildTextSetting),qn(a,A.D.SettingsTypes.TYPE_COLOR,n.buildColorSetting),qn(a,A.D.SettingsTypes.TYPE_BOOL,n.buildBoolSetting),qn(a,A.D.SettingsTypes.TYPE_PERMISSION,n.buildPermissionSetting),qn(a,A.D.SettingsTypes.TYPE_DROPDOWN,n.buildDropdownSetting),qn(a,A.D.SettingsTypes.TYPE_RADIO,n.buildRadioSetting),qn(a,A.D.SettingsTypes.TYPE_BANNER,n.buildBannerSetting),qn(a,A.D.SettingsTypes.TYPE_GENERATED,n.buildGeneratedSetting),qn(a,A.D.SettingsTypes.TYPE_USERNAME,n.buildUsernameSetting),qn(a,A.D.SettingsTypes.TYPE_BUTTON,n.buildButtonSetting),qn(a,A.D.SettingsTypes.TYPE_LANGUAGE,n.buildLanguageSetting),qn(a,A.D.SettingsTypes.TYPE_JOBSTABLE,n.buildJobsTableSetting),qn(a,A.D.SettingsTypes.TYPE_FILE_UPLOAD,n.buildFileUploadSetting),qn(a,A.D.SettingsTypes.TYPE_CUSTOM,n.buildCustomSetting),a),n.state={saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,g.a.Component),function(e,t,a){t&&In(e.prototype,t),a&&In(e,a)}(t,[{key:"getConfigFromState",value:function(e){var a=this,n=this.props.schema;if(n&&((n.settings||[]).forEach(function(n){if(n.key)if(n.type!==A.D.SettingsTypes.TYPE_PERMISSION){var i=a.getSettingValue(n),r=t.getConfigValue(e,n.key);n.onConfigSave&&(i=n.onConfigSave(i,r)),a.setConfigValue(e,n.key,i)}else a.setConfigValue(e,n.key,null)}),n.onConfigSave))return n.onConfigSave(e,this.props.config);return e}},{key:"getSetting",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.props.schema.settings[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.key===e)return s}}catch(e){a=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return null}},{key:"getSettingValue",value:function(e){return(e.type!==A.D.SettingsTypes.TYPE_BOOL||!this.isDisabled(e))&&(e.type===A.D.SettingsTypes.TYPE_TEXT&&e.dynamic_value?e.dynamic_value(this.state[e.key],this.props.config,this.state,this.props.license):this.state[e.key])}},{key:"setConfigValue",value:function(e,t,a){!function e(t,n){var i=n[0];1===n.length?t[i]=a:(null==t[i]&&(t[i]={}),e(t[i],n.slice(1)))}(e,t.split("."))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.schema&&e.schema.id!==a.prevSchemaId?Rn({prevSchemaId:e.schema.id,saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1},t.getStateFromConfig(e.config,e.schema,e.roles)):null}},{key:"getStateFromConfig",value:function(e,a,n){var i={};a&&((a.settings||[]).forEach(function(a){if(a.key)if(a.type!==A.D.SettingsTypes.TYPE_PERMISSION){var r=t.getConfigValue(e,a.key);a.onConfigLoad&&(r=a.onConfigLoad(r,e)),i[a.key]=null==r?a.default:r}else try{i[a.key]="true"===Object(Na.a)(a.permissions_mapping_name,n)}catch(e){i[a.key]=!1}}),a.onConfigLoad&&(i=Rn({},i,a.onConfigLoad(e))));return i}},{key:"getConfigValue",value:function(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)}}]),t}();function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}qn(zn,"propTypes",{config:b.a.object,environmentConfig:b.a.object,setNavigationBlocked:b.a.func});var Xn=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Wn(Wn(a=function(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?Wn(e):t}(this,Vn(t).call(this,e)))),"isPushNotificationServerSetByEnv",function(){return a.isSetByEnv("EmailSettings.SendPushNotifications")||a.isSetByEnv("EmailSettings.PushNotificationServer")}),a.canSave=a.canSave.bind(Wn(Wn(a))),a.handleAgreeChange=a.handleAgreeChange.bind(Wn(Wn(a))),a.getConfigFromState=a.getConfigFromState.bind(Wn(Wn(a))),a.renderSettings=a.renderSettings.bind(Wn(Wn(a))),a.handleDropdownChange=a.handleDropdownChange.bind(Wn(Wn(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(t,B),function(e,t,a){t&&Yn(e.prototype,t),a&&Yn(e,a)}(t,[{key:"canSave",value:function(){return"mhpns"!==this.state.pushNotificationServerType||this.state.agree}},{key:"handleAgreeChange",value:function(e){this.setState({agree:e.target.checked})}},{key:"handleDropdownChange",value:function(e,t){"pushNotificationServerType"===e&&(this.setState({agree:!1}),"mhpns"===t?this.setState({pushNotificationServer:A.D.MHPNS}):"mtpns"===t?this.setState({pushNotificationServer:A.D.MTPNS}):"custom"!==t||"mtpns"!==this.state.pushNotificationServerType&&"mhpns"!==this.state.pushNotificationServerType||this.setState({pushNotificationServer:""})),this.handleChange(e,t)}},{key:"getConfigFromState",value:function(e){return e.EmailSettings.SendPushNotifications="off"!==this.state.pushNotificationServerType,e.EmailSettings.PushNotificationServer=this.state.pushNotificationServer.trim(),e.EmailSettings.PushNotificationContents=this.state.pushNotificationContents,e}},{key:"getStateFromConfig",value:function(e){var t="custom",a=!1;e.EmailSettings.SendPushNotifications?e.EmailSettings.PushNotificationServer===A.D.MHPNS&&"true"===this.props.license.IsLicensed&&"true"===this.props.license.MHPNS?(t="mhpns",a=!0):e.EmailSettings.PushNotificationServer===A.D.MTPNS&&(t="mtpns"):t="off";var n=e.EmailSettings.PushNotificationServer;return"mtpns"===t?n=A.D.MTPNS:"mhpns"===t&&(n=A.D.MHPNS),{pushNotificationServerType:t,pushNotificationServer:n,pushNotificationContents:e.EmailSettings.PushNotificationContents,agree:a}}},{key:"renderTitle",value:function(){return g.a.createElement(O.c,{id:"admin.notifications.title",defaultMessage:"Notification Settings"})}},{key:"renderSettings",value:function(){var e=[];e.push({value:"off",text:P.localizeMessage("admin.email.pushOff","Do not send push notifications")}),"true"===this.props.license.IsLicensed&&"true"===this.props.license.MHPNS&&e.push({value:"mhpns",text:P.localizeMessage("admin.email.mhpns","Use encrypted, production-quality HPNS connection to iOS and Android apps")}),e.push({value:"mtpns",text:P.localizeMessage("admin.email.mtpns","Use iOS and Android apps on iTunes and Google Play with TPNS")}),e.push({value:"custom",text:P.localizeMessage("admin.email.selfPush","Manually enter Push Notification Service location")});var t,a=null,n=null;return"off"===this.state.pushNotificationServerType?a=g.a.createElement(j.a,{id:"admin.email.pushOffHelp",defaultMessage:"Please see [documentation on push notifications](!https://about.mattermost.com/default-mobile-push-notifications/) to learn more about setup options."}):n="mhpns"===this.state.pushNotificationServerType?g.a.createElement(j.a,{id:"admin.email.mhpnsHelp",defaultMessage:"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about the [Mattermost Hosted Push Notification Service](!https://about.mattermost.com/default-hpns/)."}):"mtpns"===this.state.pushNotificationServerType?g.a.createElement(j.a,{id:"admin.email.mtpnsHelp",defaultMessage:"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about the [Mattermost Test Push Notification Service](!https://about.mattermost.com/default-tpns/)."}):g.a.createElement(j.a,{id:"admin.email.easHelp",defaultMessage:"Learn more about compiling and deploying your own mobile apps from an [Enterprise App Store](!https://about.mattermost.com/default-enterprise-app-store)."}),"mhpns"===this.state.pushNotificationServerType&&(t=g.a.createElement("div",{className:"form-group"},g.a.createElement("div",{className:"col-sm-4"}),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("input",{type:"checkbox",ref:"agree",checked:this.state.agree,onChange:this.handleAgreeChange}),g.a.createElement(j.a,{id:"admin.email.agreeHPNS",defaultMessage:" I understand and accept the Mattermost Hosted Push Notification Service [Terms of Service](!https://about.mattermost.com/hpns-terms/) and [Privacy Policy](!https://about.mattermost.com/hpns-privacy/)."})))),g.a.createElement(Te,{header:g.a.createElement(O.c,{id:"admin.notifications.push",defaultMessage:"Mobile Push"})},g.a.createElement(Ye,{id:"pushNotificationServerType",values:e,label:g.a.createElement(O.c,{id:"admin.email.pushTitle",defaultMessage:"Enable Push Notifications: "}),value:this.state.pushNotificationServerType,onChange:this.handleDropdownChange,helpText:a,setByEnv:this.isPushNotificationServerSetByEnv()}),t,g.a.createElement(Me,{id:"pushNotificationServer",label:g.a.createElement(O.c,{id:"admin.email.pushServerTitle",defaultMessage:"Push Notification Server:"}),placeholder:P.localizeMessage("admin.email.pushServerEx",'E.g.: "http://push-test.mattermost.com"'),helpText:n,value:this.state.pushNotificationServer,onChange:this.handleChange,disabled:"custom"!==this.state.pushNotificationServerType,setByEnv:this.isSetByEnv("EmailSettings.PushNotificationServer")}),g.a.createElement(Ye,{id:"pushNotificationContents",values:[{value:"generic_no_channel",text:P.localizeMessage("admin.email.genericNoChannelPushNotification",'"Send generic description with only sender name')},{value:"generic",text:P.localizeMessage("admin.email.genericPushNotification","Send generic description with sender and channel names")},{value:"full",text:P.localizeMessage("admin.email.fullPushNotification","Send full message snippet")}],label:g.a.createElement(O.c,{id:"admin.email.pushContentTitle",defaultMessage:"Push Notification Contents:"}),value:this.state.pushNotificationContents,onChange:this.handleDropdownChange,disabled:"off"===this.state.pushNotificationServerType,helpText:g.a.createElement(j.a,{id:"admin.email.pushContentDesc",defaultMessage:'"Send generic description with only sender name" includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\\n \\n"Send generic description with sender and channel names" includes the name of the person who sent the message and the channel it was sent in, but not the message text.\\n \\n"Send full message snippet" includes a message excerpt in push notifications, which may contain confidential information sent in messages. If your Push Notification Service is outside your firewall, it is *highly recommended* this option only be used with an "https" protocol to encrypt the connection.'}),setByEnv:this.isSetByEnv("EmailSettings.PushNotificationContents")}))}}]),t}();function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ei=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qn(this,Zn(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Kn(e.prototype,t),a&&Kn(e,a)}(t,[{key:"render",value:function(){var e=g.a.createElement(O.c,{id:"discard_changes_modal.title",defaultMessage:"Discard Changes?"}),t=g.a.createElement(O.c,{id:"discard_changes_modal.message",defaultMessage:"You have unsaved changes, are you sure you want to discard them?"}),a=g.a.createElement(O.c,{id:"discard_changes_modal.leave",defaultMessage:"Yes, Discard"}),n=this.props,i=n.show,r=n.onConfirm,s=n.onCancel;return g.a.createElement(Ie.a,{show:i,title:e,message:t,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:a,onConfirm:r,onCancel:s})}}]),t}();!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ei,"propTypes",{show:b.a.bool.isRequired,onConfirm:b.a.func.isRequired,onCancel:b.a.func.isRequired});var ti=a(1746);function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ii(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ri(e){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ii(this,ri(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,g.a.Component),function(e,t,a){t&&ni(e.prototype,t),a&&ni(e,a)}(t,[{key:"render",value:function(){var e=this,t=this.props.parentLink,a=g.a.createElement("div",{className:"category-title category-title--active"},g.a.createElement("i",{className:"category-icon fa "+this.props.icon}),g.a.createElement("span",{className:"category-title__text"},this.props.title),this.props.action);this.props.name&&(t+="/"+name,a=g.a.createElement(ti.a,{to:t,className:"category-title",activeClassName:"category-title category-title--active"},a));var n=null;return this.props.children&&(n=g.a.createElement(y.a,{path:t,render:function(){return g.a.createElement("ul",{className:"sections "+e.props.sectionClass},g.a.Children.map(e.props.children,function(e){return null===e?null:g.a.cloneElement(e,{parentLink:t})}))}})),g.a.createElement("li",{className:"sidebar-category"},a,n)}}],[{key:"propTypes",get:function(){return{name:b.a.string,title:b.a.node.isRequired,icon:b.a.string.isRequired,sectionClass:b.a.string,parentLink:b.a.string,children:b.a.node,action:b.a.node}}},{key:"defaultProps",get:function(){return{parentLink:""}}},{key:"contextTypes",get:function(){return{router:b.a.object.isRequired}}}]),t}(),li=(a(239),a(232)),ci=a(586),ui=a(135),mi=a.n(ui),di=a(720),pi=a(849),fi=(a(100),a(137));function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ei(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _i=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Ei(vi(vi(a=function(e,t){return!t||"object"!==bi(t)&&"function"!=typeof t?vi(e):t}(this,(e=gi(t)).call.apply(e,[this].concat(i))))),"handleClick",function(e){a.props.blocked&&(e.preventDefault(),a.props.actions.deferNavigation(function(){fi.a.push(a.props.to)}))}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(t,g.a.Component),function(e,t,a){t&&hi(e.prototype,t),a&&hi(e,a)}(t,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Ei(e,t,a[t])})}return e}({},this.props);return Reflect.deleteProperty(e,"blocked"),Reflect.deleteProperty(e,"actions"),g.a.createElement(ti.a,Object.assign({},e,{onClick:this.handleClick}))}}]),t}();Ei(_i,"propTypes",{blocked:b.a.bool.isRequired,to:b.a.string.isRequired,actions:b.a.shape({deferNavigation:b.a.func.isRequired}).isRequired});var Si=Object(n.connect)(function(e){return{blocked:Object(p.a)(e)}},function(e){return{actions:Object(i.bindActionCreators)({deferNavigation:d.g},e)}})(_i),Ti=a(820);function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ji(e,t){return(ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ki=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mi(xi(xi(a=function(e,t){return!t||"object"!==Oi(t)&&"function"!=typeof t?xi(e):t}(this,Pi(t).call(this,e)))),"handleAboutModal",function(e){e.preventDefault(),a.setState({showAboutModal:!0})}),Mi(xi(xi(a)),"handleLogout",function(e){a.props.navigationBlocked?(e.preventDefault(),a.props.actions.deferNavigation(T.p)):T.p()}),Mi(xi(xi(a)),"aboutModalDismissed",function(){a.setState({showAboutModal:!1})}),a.state={showAboutModal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ji(e,t)}(t,g.a.Component),function(e,t,a){t&&wi(e.prototype,t),a&&wi(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;yn()(mi.a.findDOMNode(this.refs.dropdown)).on("hide.bs.dropdown",function(){e.blockToggle=!0,setTimeout(function(){e.blockToggle=!1},100)})}},{key:"componentWillUnmount",value:function(){yn()(mi.a.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown")}},{key:"render",value:function(){var e,t=this.props,a=t.locale,n=t.teams,i=[];if(n&&n.length>0){var r=Object(di.a)(n,a),s=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var m=c.value;i.push(g.a.createElement("li",{key:"team_"+m.name},g.a.createElement(Si,{id:"swithTo"+P.createSafeId(m.name),to:"/"+m.name+"/channels/".concat(A.e.DEFAULT_CHANNEL)},g.a.createElement(O.c,{id:"navbar_dropdown.switchTo",defaultMessage:"Switch to "}),m.display_name)))}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}i.push(g.a.createElement("li",{key:"teamDiv",className:"divider"}))}else e=g.a.createElement("li",null,g.a.createElement(Si,{to:"/select_team"},g.a.createElement("i",{className:"fa fa-exchange",title:P.localizeMessage("select_team.icon","Select Team Icon")}),g.a.createElement(O.c,{id:"admin.nav.switch",defaultMessage:"Team Selection"})));return g.a.createElement("ul",{className:"nav navbar-nav navbar-right admin-navbar-dropdown"},g.a.createElement("li",{ref:"dropdown",className:"dropdown"},g.a.createElement("a",{href:"#",id:"adminNavbarDropdownButton",className:"dropdown-toggle admin-navbar-dropdown__toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},g.a.createElement(Ti.a,{className:"dropdown__icon admin-navbar-dropdown__icon"})),g.a.createElement("ul",{className:"dropdown-menu",role:"menu"},i,e,g.a.createElement("li",{key:"teamDiv",className:"divider"}),g.a.createElement("li",null,g.a.createElement("a",{href:"https://about.mattermost.com/administrators-guide/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.nav.administratorsGuide",defaultMessage:"Administrator Guide"}))),g.a.createElement("li",null,g.a.createElement("a",{href:"https://about.mattermost.com/troubleshooting-forum/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.nav.troubleshootingForum",defaultMessage:"Troubleshooting Forum"}))),g.a.createElement("li",null,g.a.createElement("a",{href:"https://about.mattermost.com/commercial-support/",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.nav.commercialSupport",defaultMessage:"Commercial Support"}))),g.a.createElement("li",null,g.a.createElement("button",{className:"style--none",onClick:this.handleAboutModal},g.a.createElement(O.c,{id:"navbar_dropdown.about",defaultMessage:"About Mattermost"}))),g.a.createElement("li",{className:"divider"}),g.a.createElement("li",null,g.a.createElement("button",{className:"style--none",id:"logout",onClick:this.handleLogout},g.a.createElement(O.c,{id:"admin.nav.logout",defaultMessage:"Logout"}))),g.a.createElement(pi.a,{show:this.state.showAboutModal,onModalDismissed:this.aboutModalDismissed}))))}}]),t}();Mi(ki,"propTypes",{locale:b.a.string.isRequired,navigationBlocked:b.a.bool,teams:b.a.arrayOf(b.a.object).isRequired,actions:b.a.shape({deferNavigation:b.a.func}).isRequired});var Ci=Object(n.connect)(function(e){return{locale:Object(ci.a)(e),teams:Object(li.getMyTeams)(e),navigationBlocked:Object(p.a)(e)}},function(e){return{actions:Object(i.bindActionCreators)({deferNavigation:d.g},e)}})(ki);function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Di(e,t){return(Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ui=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Ii(Li(Li(a=function(e,t){return!t||"object"!==Ai(t)&&"function"!=typeof t?Li(e):t}(this,(e=Ri(t)).call.apply(e,[this].concat(i))))),"toggleDropdown",function(e){e.preventDefault(),a.refs.dropdown.blockToggle?a.refs.dropdown.blockToggle=!1:yn()(".team__header").find(".dropdown-toggle").dropdown("toggle")}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(t,g.a.Component),function(e,t,a){t&&Ni(e.prototype,t),a&&Ni(e,a)}(t,[{key:"render",value:function(){var e=this.props.currentUser,t=null;return e?(e.last_picture_update&&(t=g.a.createElement("img",{className:"user__picture",src:w.Client4.getProfilePictureUrl(e.id,e.last_picture_update)})),g.a.createElement("div",{className:"team__header theme"},g.a.createElement("a",{href:"#",onClick:this.toggleDropdown},t,g.a.createElement("div",{className:"header__info"},g.a.createElement("div",{className:"team__name"},g.a.createElement(O.c,{id:"admin.sidebarHeader.systemConsole",defaultMessage:"System Console"})),g.a.createElement("div",{className:"user__name"},"@"+e.username))),g.a.createElement(Ci,{ref:"dropdown"}))):null}}]),t}();Ii(Ui,"propTypes",{currentUser:b.a.object});var Bi=Object(n.connect)(function(e){return{currentUser:Object(m.getCurrentUser)(e)}})(Ui);function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zi(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yi(e,t){return(Yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zi(this,Gi(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yi(e,t)}(t,g.a.Component),function(e,t,a){t&&qi(e.prototype,t),a&&qi(e,a)}(t,[{key:"getLink",value:function(){return this.props.parentLink+"/"+this.props.name}},{key:"render",value:function(){var e=this.getLink(),t=null;this.props.children&&(t=g.a.createElement("ul",{className:"nav nav__sub-menu subsections"},g.a.Children.map(this.props.children,function(t){return null===t?null:g.a.cloneElement(t,{parentLink:e,subsection:!0})})));var a="sidebar-section";this.props.subsection&&(a+=" sidebar-subsection");var n=g.a.createElement(Si,{id:P.createSafeId(this.props.name),className:"".concat(a,"-title"),activeClassName:"".concat(a,"-title ").concat(a,"-title--active"),to:e},g.a.createElement("span",{className:"".concat(a,"-title__text")},this.props.title),this.props.action);return"text"===this.props.type&&(n=g.a.createElement("div",{className:"".concat(a,"-title")},g.a.createElement("span",{className:"".concat(a,"-title__text")},this.props.title),this.props.action)),g.a.createElement("li",{className:a},n,t)}}],[{key:"propTypes",get:function(){return{name:b.a.string.isRequired,title:b.a.node.isRequired,type:b.a.string,parentLink:b.a.string,subsection:b.a.bool,children:b.a.node,action:b.a.node}}},{key:"defaultProps",get:function(){return{parentLink:"",subsection:!1,children:[]}}}]),t}();function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Zi=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Qi(Ki(Ki(a=function(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?Ki(e):t}(this,(e=Xi(t)).call.apply(e,[this].concat(i))))),"updateTitle",function(){var e="";a.props.siteName&&(e=" - "+a.props.siteName),document.title=P.localizeMessage("sidebar_right_menu.console","System Console")+e}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(t,g.a.Component),function(e,t,a){t&&Wi(e.prototype,t),a&&Wi(e,a)}(t,[{key:"componentDidMount",value:function(){this.props.config.PluginSettings.Enable&&this.props.actions.getPlugins(),this.updateTitle(),P.isMobile()||yn()(".admin-sidebar .nav-pills__container").perfectScrollbar({suppressScrollX:!0})}},{key:"componentDidUpdate",value:function(){P.isMobile()||yn()(".admin-sidebar .nav-pills__container").perfectScrollbar({suppressScrollX:!0})}},{key:"render",value:function(){var e=null,t=null,a=null,n=null,i=null,r=null,s=null,o=null,l=null,c=null,u=null,m=null;this.props.buildEnterpriseReady&&(c=g.a.createElement(Vi,{name:"license",title:g.a.createElement(O.c,{id:"admin.sidebar.license",defaultMessage:"Edition and License"})})),"true"===this.props.license.IsLicensed?("true"===this.props.license.LDAP&&(t=g.a.createElement(Vi,{name:"ldap",title:g.a.createElement(O.c,{id:"admin.sidebar.ldap",defaultMessage:"AD/LDAP"})})),"true"===this.props.license.Cluster&&(n=g.a.createElement(Vi,{name:"cluster",title:g.a.createElement(O.c,{id:"admin.sidebar.cluster",defaultMessage:"High Availability"})})),"true"===this.props.license.Metrics&&(i=g.a.createElement(Vi,{name:"metrics",title:g.a.createElement(O.c,{id:"admin.sidebar.metrics",defaultMessage:"Performance Monitoring"})})),"true"===this.props.license.SAML&&(a=g.a.createElement(Vi,{name:"saml",title:g.a.createElement(O.c,{id:"admin.sidebar.saml",defaultMessage:"SAML 2.0"})})),"true"===this.props.license.Compliance&&(r=g.a.createElement(Vi,{name:"compliance",title:g.a.createElement(O.c,{id:"admin.sidebar.compliance",defaultMessage:"Compliance"})})),"true"===this.props.license.MFA&&(s=g.a.createElement(Vi,{name:"mfa",title:g.a.createElement(O.c,{id:"admin.sidebar.mfa",defaultMessage:"MFA"})})),"true"===this.props.license.MessageExport&&(o=g.a.createElement(Vi,{name:"message_export",title:g.a.createElement(O.c,{id:"admin.sidebar.compliance_export",defaultMessage:"Compliance Export (Beta)"})})),e=g.a.createElement(Vi,{name:"oauth",title:g.a.createElement(O.c,{id:"admin.sidebar.oauth",defaultMessage:"OAuth 2.0"})}),m=g.a.createElement(Vi,{name:"announcement",title:g.a.createElement(O.c,{id:"admin.sidebar.announcement",defaultMessage:"Announcement Banner"})})):e=g.a.createElement(Vi,{name:"gitlab",title:g.a.createElement(O.c,{id:"admin.sidebar.gitlab",defaultMessage:"GitLab"})}),"true"===this.props.license.IsLicensed&&(u=g.a.createElement(Vi,{name:"audits",title:g.a.createElement(O.c,{id:"admin.sidebar.audits",defaultMessage:"Complaince and Auditing"})}));var d=null;(c||u)&&(d=g.a.createElement(oi,{parentLink:"/admin_console",icon:"fa-wrench",title:g.a.createElement(O.c,{id:"admin.sidebar.other",defaultMessage:"OTHER"})},c,u));var p=null;"true"===this.props.license.IsLicensed&&"true"===this.props.license.Elasticsearch&&(p=g.a.createElement(Vi,{name:"elasticsearch",title:g.a.createElement(O.c,{id:"admin.sidebar.elasticsearch",defaultMessage:"Elasticsearch"})}));var f=null;"true"===this.props.license.IsLicensed&&"true"===this.props.license.DataRetention&&(f=g.a.createElement(Vi,{name:"data_retention",title:g.a.createElement(O.c,{id:"admin.sidebar.data_retention",defaultMessage:"Data Retention Policy (Beta)"})}));var b=null;(f||o)&&(l=g.a.createElement(Vi,{name:"compliance",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.compliance",defaultMessage:"Compliance"})},f,o));var h=[];return this.props.config.PluginSettings.Enable&&Object.values(this.props.plugins).forEach(function(e){e.settings_schema&&0!==Object.keys(e.settings_schema)&&h.push(g.a.createElement(Vi,{key:"customplugin"+e.id,name:"custom/"+e.id,title:e.name}))}),g.a.createElement("div",{className:"admin-sidebar"},g.a.createElement(Bi,null),g.a.createElement("div",{className:"nav-pills__container"},g.a.createElement("ul",{className:"nav nav-pills nav-stacked"},g.a.createElement(oi,{parentLink:"/admin_console",icon:"fa-bar-chart",title:g.a.createElement(O.c,{id:"admin.sidebar.reports",defaultMessage:"REPORTING"})},g.a.createElement(Vi,{name:"system_analytics",title:g.a.createElement(O.c,{id:"admin.sidebar.view_statistics",defaultMessage:"Site Statistics"})}),g.a.createElement(Vi,{name:"team_analytics",title:g.a.createElement(O.c,{id:"admin.sidebar.statistics",defaultMessage:"Team Statistics"})}),g.a.createElement(Vi,{name:"users",title:g.a.createElement(O.c,{id:"admin.sidebar.users",defaultMessage:"Users"})}),g.a.createElement(Vi,{name:"logs",title:g.a.createElement(O.c,{id:"admin.sidebar.logs",defaultMessage:"Logs"})})),g.a.createElement(oi,{sectionClass:"sections--settings",parentLink:"/admin_console",icon:"fa-gear",title:g.a.createElement(O.c,{id:"admin.sidebar.settings",defaultMessage:"SETTINGS"})},g.a.createElement(Vi,{name:"general",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.general",defaultMessage:"General"})},g.a.createElement(Vi,{name:"configuration",title:g.a.createElement(O.c,{id:"admin.sidebar.configuration",defaultMessage:"Configuration"})}),g.a.createElement(Vi,{name:"localization",title:g.a.createElement(O.c,{id:"admin.sidebar.localization",defaultMessage:"Localization"})}),g.a.createElement(Vi,{name:"users_and_teams",title:g.a.createElement(O.c,{id:"admin.sidebar.usersAndTeams",defaultMessage:"Users and Teams"})}),g.a.createElement(Vi,{name:"privacy",title:g.a.createElement(O.c,{id:"admin.sidebar.privacy",defaultMessage:"Privacy"})}),r,g.a.createElement(Vi,{name:"logging",title:g.a.createElement(O.c,{id:"admin.sidebar.logging",defaultMessage:"Logging"})})),"true"===this.props.license.IsLicensed&&g.a.createElement(Vi,{name:"permissions",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.permissions",defaultMessage:"Advanced Permissions"})},"true"!==this.props.license.CustomPermissionsSchemes&&g.a.createElement(Vi,{name:"system-scheme",title:g.a.createElement(O.c,{id:"admin.sidebar.system-scheme",defaultMessage:"System scheme"})}),"true"===this.props.license.CustomPermissionsSchemes&&g.a.createElement(Vi,{name:"schemes",title:g.a.createElement(O.c,{id:"admin.sidebar.schemes",defaultMessage:"Permission Schemes"})})),g.a.createElement(Vi,{name:"authentication",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.authentication",defaultMessage:"Authentication"})},g.a.createElement(Vi,{name:"authentication_email",title:g.a.createElement(O.c,{id:"admin.sidebar.email",defaultMessage:"Email"})}),e,t,a,s),g.a.createElement(Vi,{name:"security",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.security",defaultMessage:"Security"})},g.a.createElement(Vi,{name:"sign_up",title:g.a.createElement(O.c,{id:"admin.sidebar.signUp",defaultMessage:"Sign Up"})}),g.a.createElement(Vi,{name:"password",title:g.a.createElement(O.c,{id:"admin.sidebar.password",defaultMessage:"Password"})}),g.a.createElement(Vi,{name:"public_links",title:g.a.createElement(O.c,{id:"admin.sidebar.publicLinks",defaultMessage:"Public Links"})}),g.a.createElement(Vi,{name:"sessions",title:g.a.createElement(O.c,{id:"admin.sidebar.sessions",defaultMessage:"Sessions"})}),g.a.createElement(Vi,{name:"connections",title:g.a.createElement(O.c,{id:"admin.sidebar.connections",defaultMessage:"Connections"})}),b),g.a.createElement(Vi,{name:"notifications",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.notifications",defaultMessage:"Notifications"})},g.a.createElement(Vi,{name:"notifications_email",title:g.a.createElement(O.c,{id:"admin.sidebar.email",defaultMessage:"Email"})}),g.a.createElement(Vi,{name:"push",title:g.a.createElement(O.c,{id:"admin.sidebar.push",defaultMessage:"Mobile Push"})})),g.a.createElement(Vi,{name:"integrations",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.integrations",defaultMessage:"Integrations"})},g.a.createElement(Vi,{name:"custom",title:g.a.createElement(O.c,{id:"admin.sidebar.customIntegrations",defaultMessage:"Custom Integrations"})}),g.a.createElement(Vi,{name:"external",title:g.a.createElement(O.c,{id:"admin.sidebar.external",defaultMessage:"External Services"})})),g.a.createElement(Vi,{name:"plugins",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.plugins",defaultMessage:"Plugins (Beta)"})},g.a.createElement(Vi,{name:"configuration",title:g.a.createElement(O.c,{id:"admin.sidebar.plugins.configuration",defaultMessage:"Configuration"})}),g.a.createElement(Vi,{name:"management",title:g.a.createElement(O.c,{id:"admin.sidebar.plugins.management",defaultMessage:"Management"})}),h),g.a.createElement(Vi,{name:"files",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.files",defaultMessage:"Files"})},g.a.createElement(Vi,{key:"storage",name:"storage",title:g.a.createElement(O.c,{id:"admin.sidebar.storage",defaultMessage:"Storage"})})),g.a.createElement(Vi,{name:"customization",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.customization",defaultMessage:"Customization"})},g.a.createElement(Vi,{name:"custom_brand",title:g.a.createElement(O.c,{id:"admin.sidebar.customBrand",defaultMessage:"Custom Branding"})}),m,g.a.createElement(Vi,{name:"emoji",title:g.a.createElement(O.c,{id:"admin.sidebar.emoji",defaultMessage:"Emoji"})}),g.a.createElement(Vi,{name:"gif",title:g.a.createElement(O.c,{id:"admin.sidebar.gif",defaultMessage:"GIF (Beta)"})}),g.a.createElement(Vi,{name:"posts",title:g.a.createElement(O.c,{id:"admin.sidebar.posts",defaultMessage:"Posts"})}),g.a.createElement(Vi,{name:"legal_and_support",title:g.a.createElement(O.c,{id:"admin.sidebar.legalAndSupport",defaultMessage:"Legal and Support"})}),g.a.createElement(Vi,{name:"native_app_links",title:g.a.createElement(O.c,{id:"admin.sidebar.nativeAppLinks",defaultMessage:"Mattermost App Links"})})),l,g.a.createElement(Vi,{name:"advanced",type:"text",title:g.a.createElement(O.c,{id:"admin.sidebar.advanced",defaultMessage:"Advanced"})},g.a.createElement(Vi,{name:"rate",title:g.a.createElement(O.c,{id:"admin.sidebar.rateLimiting",defaultMessage:"Rate Limiting"})}),g.a.createElement(Vi,{name:"database",title:g.a.createElement(O.c,{id:"admin.sidebar.database",defaultMessage:"Database"})}),p,g.a.createElement(Vi,{name:"developer",title:g.a.createElement(O.c,{id:"admin.sidebar.developer",defaultMessage:"Developer"})}),n,i)),d)))}}],[{key:"contextTypes",get:function(){return{router:b.a.object.isRequired}}}]),t}();Qi(Zi,"propTypes",{license:b.a.object.isRequired,config:b.a.object,plugins:b.a.object,buildEnterpriseReady:b.a.bool,siteName:b.a.string,actions:b.a.shape({getPlugins:b.a.func.isRequired}).isRequired}),Qi(Zi,"defaultProps",{plugins:{}});var $i=Object(n.connect)(function(e){var t=Object(c.getLicense)(e),a=Object(c.getConfig)(e),n="true"===a.BuildEnterpriseReady,i=a.SiteName;return{license:t,config:e.entities.admin.config,plugins:e.entities.admin.plugins,buildEnterpriseReady:n,siteName:i}},function(e){return{actions:Object(i.bindActionCreators)({getPlugins:r.getPlugins},e)}},null,{pure:!1})(Zi),er=a(812),tr=a(1162),ar=a.n(tr);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var cr=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return lr(or(or(a=function(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?or(e):t}(this,(e=rr(t)).call.apply(e,[this].concat(i))))),"chart",null),lr(or(or(a)),"initChart",function(e){if(a.refs.canvas){var t=mi.a.findDOMNode(a.refs.canvas).getContext("2d");a.chart=new ar.a(t,{type:"doughnut",data:a.props.data,options:{}}),e&&a.chart.update()}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&ir(e.prototype,t),a&&ir(e,a)}(t,[{key:"componentDidMount",value:function(){this.initChart()}},{key:"componentDidUpdate",value:function(e){P.areObjectsEqual(e.data,this.props.data)||this.initChart(!0)}},{key:"componentWillUnmount",value:function(){this.chart&&this.refs.canvas&&this.chart.destroy()}},{key:"render",value:function(){var e;return e=null==this.props.data?g.a.createElement(O.c,{id:"analytics.chart.loading",defaultMessage:"Loading..."}):g.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height}),g.a.createElement("div",{className:"col-sm-6"},g.a.createElement("div",{className:"total-count"},g.a.createElement("div",{className:"title"},this.props.title),g.a.createElement("div",{className:"content"},e)))}}]),t}();function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}lr(cr,"propTypes",{title:b.a.node,width:b.a.number,height:b.a.number,data:b.a.object});var hr=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return br(fr(fr(a=function(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?fr(e):t}(this,(e=dr(t)).call.apply(e,[this].concat(i))))),"chart",null),br(fr(fr(a)),"chartOptions",{legend:{display:!1}}),br(fr(fr(a)),"initChart",function(e){if(a.refs.canvas){var t=mi.a.findDOMNode(a.refs.canvas).getContext("2d");a.chart=new ar.a(t,{type:"line",data:a.props.data,options:a.chartOptions||{}}),e&&a.chart.update()}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&mr(e.prototype,t),a&&mr(e,a)}(t,[{key:"componentDidMount",value:function(){this.initChart()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.data&&e.data.labels.length>0,a=Boolean(this.chart);!t&&a&&(this.chart.destroy(),this.chart=null)}},{key:"componentDidUpdate",value:function(e){if(!P.areObjectsEqual(e.data,this.props.data)){var t=this.props.data&&this.props.data.labels.length>0,a=Boolean(this.chart);t&&this.initChart(a)}}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy()}},{key:"render",value:function(){var e;return e=null==this.props.data?g.a.createElement(O.c,{id:"analytics.chart.loading",defaultMessage:"Loading..."}):0===this.props.data.labels.length?g.a.createElement("h5",null,g.a.createElement(O.c,{id:"analytics.chart.meaningful",defaultMessage:"Not enough data for a meaningful representation."})):g.a.createElement("canvas",{ref:"canvas",width:this.props.width,height:this.props.height}),g.a.createElement("div",{className:"col-sm-12"},g.a.createElement("div",{className:"total-count by-day"},g.a.createElement("div",{className:"title"},this.props.title),g.a.createElement("div",{className:"content"},e)))}}]),t}();function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}br(hr,"propTypes",{title:b.a.node.isRequired,width:b.a.number.isRequired,height:b.a.number.isRequired,data:b.a.object});var Sr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vr(this,Er(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&yr(e.prototype,t),a&&yr(e,a)}(t,[{key:"render",value:function(){var e=g.a.createElement(O.c,{id:"analytics.chart.loading",defaultMessage:"Loading..."});return g.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6"},g.a.createElement("div",{className:"total-count"},g.a.createElement("div",{className:"title"},this.props.title,g.a.createElement("i",{className:"fa "+this.props.icon})),g.a.createElement("div",{className:"content"},isNaN(this.props.count)?e:this.props.count)))}}]),t}();function Tr(e){var t={labels:[],datasets:[{fillColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(151,187,205,1)",data:[]}]};for(var a in e)if(e[a]){var n=e[a];t.labels.push(n.name),t.datasets[0].data.push(n.value)}return t}function Or(e){var t={labels:[],datasets:[{label:"",fillColor:"rgba(151,187,205,0.2)",borderColor:"rgba(151,187,205,1)",pointBackgroundColor:"rgba(151,187,205,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(151,187,205,1)",data:[]}]};for(var a in e)if(e[a]){var n=e[a];t.labels.push(n.name),t.datasets[0].data.push(n.value)}return t}function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Sr,"propTypes",{title:b.a.node.isRequired,icon:b.a.string.isRequired,count:b.a.number});var Cr=A.D.StatTypes,Ar=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kr(Mr(Mr(a=function(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?Mr(e):t}(this,jr(t).call(this,e)))),"onChange",function(){a.setState({stats:er.a.getAllSystem()})}),a.state={stats:er.a.getAllSystem()},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,g.a.Component),function(e,t,a){t&&Pr(e.prototype,t),a&&Pr(e,a)}(t,[{key:"componentDidMount",value:function(){er.a.addChangeListener(this.onChange),d.p(),d.o(),d.q(),this.props.isLicensed&&d.l()}},{key:"componentWillUnmount",value:function(){er.a.removeChangeListener(this.onChange)}},{key:"shouldComponentUpdate",value:function(e,t){return!P.areObjectsEqual(t.stats,this.state.stats)}},{key:"render",value:function(){var e,t,a,n,i,r,s,o,l,c,u=this.state.stats,m=this.props.isLicensed,d=-1===u[Cr.TOTAL_POSTS],p=Tr(u[Cr.POST_PER_DAY]),f=Or(u[Cr.USERS_WITH_POSTS_PER_DAY]);if(d?e=g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement(j.a,{id:"analytics.system.skippedIntensiveQueries",defaultMessage:"To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html)."}))):(t=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalPosts",defaultMessage:"Total Posts"}),icon:"fa-comment",count:u[Cr.TOTAL_POSTS]}),a=g.a.createElement("div",{className:"row"},g.a.createElement(hr,{title:g.a.createElement(O.c,{id:"analytics.system.totalPosts",defaultMessage:"Total Posts"}),data:p,width:740,height:225})),n=g.a.createElement("div",{className:"row"},g.a.createElement(hr,{title:g.a.createElement(O.c,{id:"analytics.system.activeUsers",defaultMessage:"Active Users With Posts"}),data:f,width:740,height:225}))),this.props.isLicensed){s=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalSessions",defaultMessage:"Total Sessions"}),icon:"fa-signal",count:u[Cr.TOTAL_SESSIONS]}),o=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalCommands",defaultMessage:"Total Commands"}),icon:"fa-terminal",count:u[Cr.TOTAL_COMMANDS]}),l=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalIncomingWebhooks",defaultMessage:"Incoming Webhooks"}),icon:"fa-arrow-down",count:u[Cr.TOTAL_IHOOKS]}),c=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalOutgoingWebhooks",defaultMessage:"Outgoing Webhooks"}),icon:"fa-arrow-up",count:u[Cr.TOTAL_OHOOKS]}),i=g.a.createElement("div",null,g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalWebsockets",defaultMessage:"WebSocket Conns"}),icon:"fa-user",count:u[Cr.TOTAL_WEBSOCKET_CONNECTIONS]}),g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalMasterDbConnections",defaultMessage:"Master DB Conns"}),icon:"fa-terminal",count:u[Cr.TOTAL_MASTER_DB_CONNECTIONS]}),g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalReadDbConnections",defaultMessage:"Replica DB Conns"}),icon:"fa-terminal",count:u[Cr.TOTAL_READ_DB_CONNECTIONS]}));var b,h=function(e,t){return{labels:[P.localizeMessage("analytics.system.publicChannels","Public Channels"),P.localizeMessage("analytics.system.privateGroups","Private Channels")],datasets:[{data:[e,t],backgroundColor:["#46BFBD","#FDB45C"],hoverBackgroundColor:["#5AD3D1","#FFC870"]}]}}(u[Cr.TOTAL_PUBLIC_CHANNELS],u[Cr.TOTAL_PRIVATE_GROUPS]),y=function(e,t,a){return{labels:[P.localizeMessage("analytics.system.totalFilePosts","Posts with Files"),P.localizeMessage("analytics.system.totalHashtagPosts","Posts with Hashtags"),P.localizeMessage("analytics.system.textPosts","Posts with Text-only")],datasets:[{data:[e,t,a-e-t],backgroundColor:["#46BFBD","#F7464A","#FDB45C"],hoverBackgroundColor:["#5AD3D1","#FF5A5E","#FFC870"]}]}}(u[Cr.TOTAL_FILE_POSTS],u[Cr.TOTAL_HASHTAG_POSTS],u[Cr.TOTAL_POSTS]);-1!==u[Cr.TOTAL_POSTS]&&(b=g.a.createElement(cr,{title:g.a.createElement(O.c,{id:"analytics.system.postTypes",defaultMessage:"Posts, Files and Hashtags"}),data:y,width:300,height:225})),r=g.a.createElement("div",{className:"row"},g.a.createElement(cr,{title:g.a.createElement(O.c,{id:"analytics.system.channelTypes",defaultMessage:"Channel Types"}),data:h,width:300,height:225}),b)}var v,E,_=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalUsers",defaultMessage:"Total Active Users"}),icon:"fa-user",count:u[Cr.TOTAL_USERS]}),S=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalTeams",defaultMessage:"Total Teams"}),icon:"fa-users",count:u[Cr.TOTAL_TEAMS]}),T=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.totalChannels",defaultMessage:"Total Channels"}),icon:"fa-globe",count:u[Cr.TOTAL_PUBLIC_CHANNELS]+u[Cr.TOTAL_PRIVATE_GROUPS]}),w=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.dailyActiveUsers",defaultMessage:"Daily Active Users"}),icon:"fa-users",count:u[Cr.DAILY_ACTIVE_USERS]}),x=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.system.monthlyActiveUsers",defaultMessage:"Monthly Active Users"}),icon:"fa-users",count:u[Cr.MONTHLY_ACTIVE_USERS]});m&&d?(v=g.a.createElement("div",null,_,S,T,s),E=g.a.createElement("div",null,o,l,c)):m&&!d?(v=g.a.createElement("div",null,_,S,T,t),E=g.a.createElement("div",null,s,o,l,c)):m||(v=g.a.createElement("div",null,_,S,T,t));var M=g.a.createElement("div",null,w,x);return g.a.createElement("div",{className:"wrapper--fixed team_statistics"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"analytics.system.title",defaultMessage:"System Statistics"})),e,g.a.createElement("div",{className:"row"},v,E,M,i),r,a,n)}}]),t}();kr(Ar,"propTypes",{isLicensed:b.a.bool.isRequired});var Nr=Object(n.connect)(function(e){return{isLicensed:"true"===Object(c.getLicense)(e).IsLicensed}})(Ar),Rr=a(574),Dr=a(551),Lr=a(631),Ir=a(12);function Ur(e){var t=g.a.createElement(O.c,{id:"admin.banner.heading",defaultMessage:"Note:"});return e.title&&(t=e.title),g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement("h4",{className:"banner__heading"},t),g.a.createElement("p",null,e.description)))}Ur.defaultProps={},Ur.propTypes={title:b.a.node,description:b.a.node.isRequired};var Br=a(1048);function Fr(e){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zr(e,t){return!t||"object"!==Fr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yr(e,t){return(Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zr(this,Gr(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&qr(e.prototype,t),a&&qr(e,a)}(t,[{key:"render",value:function(){return g.a.createElement("div",{className:"col-sm-6"},g.a.createElement("div",{className:"total-count recent-active-users"},g.a.createElement("div",{className:"title"},this.props.title),g.a.createElement("div",{className:"content"},g.a.createElement("table",null,g.a.createElement("tbody",null,this.props.data.map(function(e){var t=g.a.createElement(M.a,{id:"tip-table-entry-"+e.name},e.tip);return g.a.createElement("tr",{key:"table-entry-"+e.name},g.a.createElement("td",null,g.a.createElement(Br.a,{trigger:["hover","focus"],delayShow:A.D.OVERLAY_TIME_DELAY,placement:"top",overlay:t},g.a.createElement("time",null,e.name))),g.a.createElement("td",null,e.value))}))))))}}]),t}();function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Xr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e,t){return(Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Vr,"propTypes",{title:b.a.node.isRequired,data:b.a.arrayOf(b.a.shape({name:b.a.string.isRequired,tip:b.a.string.isRequired,value:b.a.node.isRequired})).isRequired});var $r="last_analytics_team",es=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zr(Qr(Qr(a=function(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?Qr(e):t}(this,Jr(t).call(this,e)))),"getData",function(){var e=function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Wr(r,n,i,s,o,"next",e)}function o(e){Wr(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.p(t),d.o(t),d.q(t),e.next=5,a.props.actions.getProfilesInTeam(t,0,Ir.General.PROFILE_CHUNK_SIZE,"last_activity_at");case 5:return n=e.sent,i=n.data,e.next=9,a.props.actions.getProfilesInTeam(t,0,Ir.General.PROFILE_CHUNK_SIZE,"create_at");case 9:r=e.sent,s=r.data,a.setState({recentlyActiveUsers:i,newUsers:s});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Zr(Qr(Qr(a)),"onChange",function(){var e=a.state.team?a.state.team.id:"";a.setState({stats:er.a.getAllTeam(e)})}),Zr(Qr(Qr(a)),"handleTeamChange",function(e){var t,n=e.target.value;a.props.teams.forEach(function(e){e.id===n&&(t=e)}),a.setState({team:t}),Lr.a.setGlobalItem($r,n)});var n=e.initialTeam?e.initialTeam.id:"";return a.state={team:e.initialTeam,stats:er.a.getAllTeam(n),recentlyActiveUsers:[],newUsers:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kr(e,t)}(t,g.a.Component),function(e,t,a){t&&Xr(e.prototype,t),a&&Xr(e,a)}(t,[{key:"componentDidMount",value:function(){er.a.addChangeListener(this.onChange),this.state.team&&this.getData(this.state.team.id),this.props.actions.getTeams(0,1e3)}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){t.team&&t.team!==this.state.team&&this.getData(t.team.id)}},{key:"componentWillUnmount",value:function(){er.a.removeChangeListener(this.onChange)}},{key:"render",value:function(){if(0===this.props.teams.length||!this.state.team||!this.state.stats)return g.a.createElement(ee.a,null);if(null==this.state.team)return g.a.createElement(Ur,{description:g.a.createElement(O.c,{id:"analytics.team.noTeams",defaultMessage:"There are no teams on this server for which to view statistics."})});var e,t,a,n=this.state.stats,i=Tr(n[A.v.POST_PER_DAY]),r=Or(n[A.v.USERS_WITH_POSTS_PER_DAY]),s=g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement(O.c,{id:"analytics.system.info",defaultMessage:"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team."})));-1===n[A.v.TOTAL_POSTS]?s=g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement(j.a,{id:"analytics.system.infoAndSkippedIntensiveQueries",defaultMessage:"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team. \\n \\n Some statistics have been omitted because they put too much load on the system to calculate. See [https://docs.mattermost.com/administration/statistics.html](!https://docs.mattermost.com/administration/statistics.html) for more details."}))):(e=g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.team.totalPosts",defaultMessage:"Total Posts"}),icon:"fa-comment",count:n[A.v.TOTAL_POSTS]}),t=g.a.createElement("div",{className:"row"},g.a.createElement(hr,{key:this.state.team.id,title:g.a.createElement(O.c,{id:"analytics.team.totalPosts",defaultMessage:"Total Posts"}),data:i,width:740,height:225})),a=g.a.createElement("div",{className:"row"},g.a.createElement(hr,{key:this.state.team.id,title:g.a.createElement(O.c,{id:"analytics.team.activeUsers",defaultMessage:"Active Users With Posts"}),data:r,width:740,height:225})));var o=function(e,t){if(null==e)return[];return e.map(function(e){var a={};return a.name=e.username,a.value=g.a.createElement(O.a,{value:e.last_activity_at,day:"numeric",month:Object(vt.a)(t),year:"numeric",hour12:!0,hour:"2-digit",minute:"2-digit"}),a.tip=e.email,a})}(this.state.recentlyActiveUsers,this.props.locale),l=function(e,t){if(null==e)return[];return e.map(function(e){var a={};return a.name=e.username,a.value=g.a.createElement(O.a,{value:e.create_at,day:"numeric",month:Object(vt.a)(t),year:"numeric",hour12:!0,hour:"2-digit",minute:"2-digit"}),a.tip=e.email,a})}(this.state.newUsers,this.props.locale),c=this.props.teams.sort(function(e,t){var a=e.display_name.toUpperCase(),n=t.display_name.toUpperCase();return a===n?0:a>n?1:-1}).map(function(e){return g.a.createElement("option",{key:e.id,value:e.id},e.display_name)});return g.a.createElement("div",{className:"wrapper--fixed team_statistics"},g.a.createElement("div",{className:"admin-console-header team-statistics__header-row"},g.a.createElement("div",{className:"team-statistics__header"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"analytics.team.title",defaultMessage:"Team Statistics for {team}",values:{team:this.state.team.display_name}}))),g.a.createElement("div",{className:"team-statistics__team-filter"},g.a.createElement("select",{className:"form-control team-statistics__team-filter__dropdown",onChange:this.handleTeamChange,value:this.state.team.id},c))),s,g.a.createElement("div",{className:"row"},g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.team.totalUsers",defaultMessage:"Total Active Users"}),icon:"fa-user",count:n[A.v.TOTAL_USERS]}),g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.team.publicChannels",defaultMessage:"Public Channels"}),icon:"fa-users",count:n[A.v.TOTAL_PUBLIC_CHANNELS]}),g.a.createElement(Sr,{title:g.a.createElement(O.c,{id:"analytics.team.privateGroups",defaultMessage:"Private Channels"}),icon:"fa-globe",count:n[A.v.TOTAL_PRIVATE_GROUPS]}),e),t,a,g.a.createElement("div",{className:"row"},g.a.createElement(Vr,{title:g.a.createElement(O.c,{id:"analytics.team.recentUsers",defaultMessage:"Recent Active Users"}),data:o}),g.a.createElement(Vr,{title:g.a.createElement(O.c,{id:"analytics.team.newlyCreated",defaultMessage:"Newly Created Users"}),data:l})))}}]),t}();Zr(es,"propTypes",{teams:b.a.arrayOf(b.a.object).isRequired,initialTeam:b.a.object,locale:b.a.string.isRequired,actions:b.a.shape({getTeams:b.a.func.isRequired,getProfilesInTeam:b.a.func.isRequired}).isRequired});var ts="last_analytics_team";var as=Object(n.connect)(function(e){var t=Object(li.getTeamsList)(e),a=Lr.a.getGlobalItem(ts,null);return{initialTeam:e.entities.teams.teams[a]||(t.length>0?t[0]:null),locale:Object(ci.a)(e),teams:t}},function(e){return{actions:Object(i.bindActionCreators)({getTeams:Rr.getTeams,getProfilesInTeam:Dr.getProfilesInTeam},e)}})(es),ns=a(1064),is=a(149),rs=a.n(is);function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function os(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function ls(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){os(r,n,i,s,o,"next",e)}function o(e){os(r,n,i,s,o,"throw",e)}s(void 0)})}}function cs(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function us(e){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ms(e,t){return(ms=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fs=function(e){switch(e.state){case rs.a.PLUGIN_STATE_NOT_RUNNING:return g.a.createElement(O.c,{id:"admin.plugin.state.not_running",defaultMessage:"Not running"});case rs.a.PLUGIN_STATE_STARTING:return g.a.createElement(O.c,{id:"admin.plugin.state.starting",defaultMessage:"Starting"});case rs.a.PLUGIN_STATE_RUNNING:return g.a.createElement(O.c,{id:"admin.plugin.state.running",defaultMessage:"Running"});case rs.a.PLUGIN_STATE_FAILED_TO_START:return g.a.createElement(O.c,{id:"admin.plugin.state.failed_to_start",defaultMessage:"Failed to start"});case rs.a.PLUGIN_STATE_FAILED_TO_STAY_RUNNING:return g.a.createElement(O.c,{id:"admin.plugin.state.failed_to_stay_running",defaultMessage:"Crashing"});case rs.a.PLUGIN_STATE_STOPPING:return g.a.createElement(O.c,{id:"admin.plugin.state.stopping",defaultMessage:"Stopping"});default:return g.a.createElement(O.c,{id:"admin.plugin.state.unknown",defaultMessage:"Unknown"})}};fs.propTypes={state:b.a.number.isRequired};var bs=function(e){switch(e.state){case rs.a.PLUGIN_STATE_NOT_RUNNING:return g.a.createElement("div",{className:"alert alert-info"},g.a.createElement("i",{className:"fa fa-ban"}),g.a.createElement(O.c,{id:"admin.plugin.state.not_running.description",defaultMessage:"This plugin is not enabled."}));case rs.a.PLUGIN_STATE_STARTING:return g.a.createElement("div",{className:"alert alert-success"},g.a.createElement("i",{className:"fa fa-info"}),g.a.createElement(O.c,{id:"admin.plugin.state.starting.description",defaultMessage:"This plugin is starting."}));case rs.a.PLUGIN_STATE_RUNNING:return g.a.createElement("div",{className:"alert alert-success"},g.a.createElement("i",{className:"fa fa-check"}),g.a.createElement(O.c,{id:"admin.plugin.state.running.description",defaultMessage:"This plugin is running."}));case rs.a.PLUGIN_STATE_FAILED_TO_START:return g.a.createElement("div",{className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning"}),g.a.createElement(O.c,{id:"admin.plugin.state.failed_to_start.description",defaultMessage:"This plugin failed to start. Check your system logs for errors."}));case rs.a.PLUGIN_STATE_FAILED_TO_STAY_RUNNING:return g.a.createElement("div",{className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning"}),g.a.createElement(O.c,{id:"admin.plugin.state.failed_to_stay_running.description",defaultMessage:"This plugin crashed multiple times and is no longer running. Check your system logs for errors."}));case rs.a.PLUGIN_STATE_STOPPING:return g.a.createElement("div",{className:"alert alert-info"},g.a.createElement("i",{className:"fa fa-info"}),g.a.createElement(O.c,{id:"admin.plugin.state.stopping.description",defaultMessage:"This plugin is stopping."}));default:return null}};bs.propTypes={state:b.a.number.isRequired};var hs=function(e){var t,a=e.pluginStatus,n=e.removing,i=e.handleEnable,r=e.handleDisable,s=e.handleRemove,o=e.showInstances,l=e.hasSettings,c=a.state===rs.a.PLUGIN_STATE_STARTING,u=a.state===rs.a.PLUGIN_STATE_STOPPING;t=a.active?g.a.createElement("a",{"data-plugin-id":a.id,disabled:u,onClick:r},u?g.a.createElement(O.c,{id:"admin.plugin.disabling",defaultMessage:"Disabling..."}):g.a.createElement(O.c,{id:"admin.plugin.disable",defaultMessage:"Disable"})):g.a.createElement("a",{"data-plugin-id":a.id,disabled:c,onClick:i},c?g.a.createElement(O.c,{id:"admin.plugin.enabling",defaultMessage:"Enabling..."}):g.a.createElement(O.c,{id:"admin.plugin.enable",defaultMessage:"Enable"}));var m,d,p,f,b=null;(l&&(b=g.a.createElement("span",null," - ",g.a.createElement(ns.a,{to:"/admin_console/plugins/custom/"+a.id},g.a.createElement(O.c,{id:"admin.plugin.settingsButton",defaultMessage:"Settings"})))),a.is_prepackaged)||(d=n?g.a.createElement(O.c,{id:"admin.plugin.removing",defaultMessage:"Removing..."}):g.a.createElement(O.c,{id:"admin.plugin.remove",defaultMessage:"Remove"}),m=g.a.createElement("span",null," - ",g.a.createElement("a",{"data-plugin-id":a.id,disabled:n,onClick:s},d)));a.description&&(p=g.a.createElement("div",{className:"padding-top"},a.description)),a.is_prepackaged&&(f=g.a.createElement("span",null,", ",g.a.createElement(O.c,{id:"admin.plugin.prepackaged",defaultMessage:"pre-packaged"})));var h=[];a.instances.some(function(e){return e.version!==a.version})&&h.push(g.a.createElement("div",{key:"multiple-versions",className:"alert alert-warning"},g.a.createElement("i",{className:"fa fa-warning"}),g.a.createElement(O.c,{id:"admin.plugin.multiple_versions_warning",defaultMessage:"There are multiple versions of this plugin installed across your cluster. Re-install this plugin to ensure it works consistently."}))),h.push(g.a.createElement(bs,{key:"state-description",state:a.state}));var y,v=a.instances.slice();return v.sort(function(e,t){return e.cluster_id<t.cluster_id?-1:e.cluster_id>t.cluster_id?1:0}),o&&(y=g.a.createElement("div",{className:"padding-top x2 padding-bottom"},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-md-6"},g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.plugin.cluster_instance",defaultMessage:"Cluster Instance"}))),g.a.createElement("div",{className:"col-md-3"},g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.plugin.version_title",defaultMessage:"Version"}))),g.a.createElement("div",{className:"col-md-3"},g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.plugin.state",defaultMessage:"State"})))),v.map(function(e){return g.a.createElement("div",{key:e.cluster_id,className:"row"},g.a.createElement("div",{className:"col-md-6"},e.cluster_id),g.a.createElement("div",{className:"col-md-3"},e.version),g.a.createElement("div",{className:"col-md-3"},g.a.createElement(fs,{state:e.state})))}))),g.a.createElement("div",null,g.a.createElement("div",null,g.a.createElement("strong",null,a.name)," (",a.id," - ",a.version,f,")"),p,g.a.createElement("div",{className:"padding-top"},t,m,b),g.a.createElement("div",null,h),g.a.createElement("div",null,y),g.a.createElement("hr",null))};hs.propTypes={pluginStatus:b.a.object.isRequired,removing:b.a.bool.isRequired,handleEnable:b.a.func.isRequired,handleDisable:b.a.func.isRequired,handleRemove:b.a.func.isRequired,showInstances:b.a.bool.isRequired,hasSettings:b.a.bool.isRequired};var gs=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ps(ds(ds(a=function(e,t){return!t||"object"!==ss(t)&&"function"!=typeof t?ds(e):t}(this,us(t).call(this,e)))),"handleChange",function(){var e=a.refs.fileInput;e.files.length>0&&a.setState({fileSelected:!0,fileName:e.files[0].name})}),ps(ds(ds(a)),"handleSubmit",function(){var e=ls(regeneratorRuntime.mark(function e(t){var n,i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==(n=a.refs.fileInput).files.length){e.next=4;break}return e.abrupt("return");case 4:return i=n.files[0],a.setState({uploading:!0}),e.next=8,a.props.actions.uploadPlugin(i);case 8:r=e.sent,s=r.error,a.setState({fileSelected:!1,fileName:null,uploading:!1,serverError:null}),P.clearFileInput(n),s&&("app.plugin.activate.app_error"===s.server_error_id?a.setState({serverError:P.localizeMessage("admin.plugin.error.activate","Unable to upload the plugin. It may conflict with another plugin on your server.")}):"app.plugin.extract.app_error"===s.server_error_id?a.setState({serverError:P.localizeMessage("admin.plugin.error.extract","Encountered an error when extracting the plugin. Review your plugin file content and try again.")}):a.setState({serverError:s.message}));case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ps(ds(ds(a)),"handleRemove",function(){var e=ls(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget.getAttribute("data-plugin-id"),a.setState({removing:n}),e.next=5,a.props.actions.removePlugin(n);case 5:i=e.sent,r=i.error,a.setState({removing:null}),r&&a.setState({serverError:r.message});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ps(ds(ds(a)),"handleEnable",function(){var e=ls(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget.getAttribute("data-plugin-id"),e.next=4,a.props.actions.enablePlugin(n);case 4:i=e.sent,(r=i.error)&&a.setState({serverError:r.message});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ps(ds(ds(a)),"handleDisable",function(){var e=ls(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget.getAttribute("data-plugin-id"),e.next=4,a.props.actions.disablePlugin(n);case 4:i=e.sent,(r=i.error)&&a.setState({serverError:r.message});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a.state={loading:!0,fileSelected:!1,fileName:null,serverError:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ms(e,t)}(t,g.a.Component),function(e,t,a){t&&cs(e.prototype,t),a&&cs(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.config.PluginSettings.Enable&&this.props.actions.getPluginStatuses().then(function(){return e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;if(!this.props.config.PluginSettings.Enable)return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.plugin.management.title",defaultMessage:"Management"})),g.a.createElement(Ur,{title:g.a.createElement("div",null),description:g.a.createElement(j.a,{id:"admin.plugin.management.banner",defaultMessage:"Plugins are disabled on your server. To enable them, go to **Plugins > Configuration**."})}));var t="";this.state.serverError&&(t=g.a.createElement("div",{className:"col-sm-12"},g.a.createElement("div",{className:"form-group has-error half"},g.a.createElement("label",{className:"control-label"},this.state.serverError))));var a,n,i,r,s="btn";this.state.fileSelected&&(s="btn btn-primary"),this.state.fileName&&(a=this.state.fileName),n=this.state.uploading?g.a.createElement(O.c,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."}):g.a.createElement(O.c,{id:"admin.plugin.upload",defaultMessage:"Upload"});var o=Object.values(this.props.pluginStatuses);if(this.state.loading)i=g.a.createElement(ee.a,null);else if(0===o.length)r=g.a.createElement(O.c,{id:"admin.plugin.no_plugins",defaultMessage:"No installed plugins."});else{var l=o.some(function(e){return e.instances.length>1});o.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),i=o.map(function(t){return g.a.createElement(hs,{key:t.id,pluginStatus:t,removing:e.state.removing===t.id,handleEnable:e.handleEnable,handleDisable:e.handleDisable,handleRemove:e.handleRemove,showInstances:l,hasSettings:Boolean(e.props.plugins[t.id]&&e.props.plugins[t.id].settings_schema)})}),r=g.a.createElement("div",{className:"alert alert-transparent"},i)}var c,u=this.props.config.PluginSettings.EnableUploads;c=u?g.a.createElement(j.a,{id:"admin.plugin.uploadDesc",defaultMessage:"Upload a plugin for your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more."}):g.a.createElement(j.a,{id:"admin.plugin.uploadDisabledDesc",defaultMessage:"To enable plugin uploads, go to **Plugins > Configuration**. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more."});var m=u?"btn btn-primary":"btn";return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.plugin.management.title",defaultMessage:"Management"})),g.a.createElement("form",{className:"form-horizontal",role:"form"},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.plugin.uploadTitle",defaultMessage:"Upload Plugin: "})),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("div",{className:"file__upload"},g.a.createElement("button",{className:m,disabled:!u},g.a.createElement(O.c,{id:"admin.plugin.choose",defaultMessage:"Choose File"})),g.a.createElement("input",{ref:"fileInput",type:"file",accept:".gz",onChange:this.handleChange,disabled:!u})),g.a.createElement("button",{className:s,disabled:!this.state.fileSelected,onClick:this.handleSubmit},n),g.a.createElement("div",{className:"help-text no-margin"},a),t,g.a.createElement("p",{className:"help-text"},c))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.plugin.installedTitle",defaultMessage:"Installed Plugins: "})),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("p",{className:"help-text"},g.a.createElement(O.b,{id:"admin.plugin.installedDesc",defaultMessage:"Installed plugins on your Mattermost server. Pre-packaged plugins are installed by default, and can be disabled but not removed."})),g.a.createElement("br",null),r))))}}]),t}();ps(gs,"propTypes",{config:b.a.object.isRequired,pluginStatuses:b.a.object.isRequired,plugins:b.a.object.isRequired,actions:b.a.shape({uploadPlugin:b.a.func.isRequired,removePlugin:b.a.func.isRequired,getPluginStatuses:b.a.func.isRequired,enablePlugin:b.a.func.isRequired,disablePlugin:b.a.func.isRequired}).isRequired});var ys=Object(n.connect)(function(e){return{plugins:e.entities.admin.plugins,pluginStatuses:e.entities.admin.pluginStatuses}},function(e){return{actions:Object(i.bindActionCreators)({uploadPlugin:r.uploadPlugin,removePlugin:r.removePlugin,getPluginStatuses:r.getPluginStatuses,enablePlugin:r.enablePlugin,disablePlugin:r.disablePlugin},e)}})(gs);function vs(e){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ss(e,t){return!t||"object"!==vs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Os(e,t){return(Os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ws=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Ss(this,Ts(t).call(this,e))).isPlugin=!0,a.getStateFromConfig=t.getStateFromConfig,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Os(e,t)}(t,zn),function(e,t,a){t&&_s(e.prototype,t),a&&_s(e,a)}(t,[{key:"getConfigFromState",value:function(e){var t=this,a=this.props.schema;if(a){e.PluginSettings.Plugins[a.id]||(e.PluginSettings.Plugins[a.id]={});var n=e.PluginSettings.Plugins[a.id];(a.settings||[]).forEach(function(e){var a=e.key.toLowerCase(),i=t.state[a]||e.default;null==i?Reflect.deleteProperty(n,a):n[a]=i})}return e}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.schema&&e.schema.id!==a.prevSchemaId?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Es(e,t,a[t])})}return e}({prevSchemaId:e.schema.id,saveNeeded:!1,saving:!1,serverError:null,errorTooltip:!1},t.getStateFromConfig(e.config,e.schema,e.roles)):null}},{key:"getStateFromConfig",value:function(e,t){var a={};if(t){var n=e.PluginSettings.Plugins[t.id]||{};(t.settings||[]).forEach(function(e){var t=e.key.toLowerCase();a[t]=null==n[t]?e.default:n[t]})}return a}}]),t}();function Ps(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){js(e,t,a[t])})}return e}function js(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var xs=Object(n.connect)(function(e,t){var a=t.match.params.plugin_id,n=e.entities.admin.plugins[a],i=n&&n.settings_schema&&n.settings_schema.settings&&n.settings_schema.settings.map(function(e){return Ps({},e,{label:e.display_name})}),r=n&&n.translate||!1;return{schema:n?Ps({},n.settings_schema,{id:n.id,name:n.name,settings:i,translate:r}):null,roles:Object(u.getRoles)(e)}})(ws),Ms=a(561),ks=a(67);function Cs(e){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function As(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rs(e,t){return(Rs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ls(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Is=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ls(Ds(Ds(a=function(e,t){return!t||"object"!==Cs(t)&&"function"!=typeof t?Ds(e):t}(this,Ns(t).call(this,e)))),"reload",function(){a.setState({loadingReports:!0}),a.props.actions.getComplianceReports().then(function(){return a.setState({loadingReports:!1})})}),Ls(Ds(Ds(a)),"runReport",function(e){e.preventDefault(),a.setState({runningReport:!0});var t={};t.desc=a.refs.desc.value,t.emails=a.refs.emails.value,t.keywords=a.refs.keywords.value,t.start_at=Date.parse(a.refs.from.value),t.end_at=Date.parse(a.refs.to.value),a.props.actions.createComplianceReport(t).then(function(e){e.data&&(a.refs.emails.value="",a.refs.keywords.value="",a.refs.desc.value="",a.refs.from.value="",a.refs.to.value=""),a.setState({runningReport:!1})})}),a.state={loadingReports:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rs(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&As(e.prototype,t),a&&As(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.isLicensed&&this.props.enabled&&this.props.actions.getComplianceReports().then(function(){return e.setState({loadingReports:!1})})}},{key:"getDateTime",value:function(e){var t=new Date(e);return g.a.createElement("span",{style:Us.date},g.a.createElement(O.a,{value:t,day:"2-digit",month:"short",year:"numeric"})," - ",g.a.createElement(O.d,{value:t,hour:"2-digit",minute:"2-digit"}))}},{key:"render",value:function(){if(!this.props.isLicensed||!this.props.enabled)return g.a.createElement("div",null);var e=null;if(this.state.loadingReports)e=g.a.createElement(ee.a,null);else{for(var t=[],a=0;a<this.props.reports.length;a++){var n=this.props.reports[a],i="";"adhoc"===n.type&&(i=g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.compliance_reports.from",defaultMessage:"From:"})," ",this.getDateTime(n.start_at),g.a.createElement("br",null),g.a.createElement(O.c,{id:"admin.compliance_reports.to",defaultMessage:"To:"})," ",this.getDateTime(n.end_at),g.a.createElement("br",null),g.a.createElement(O.c,{id:"admin.compliance_reports.emails",defaultMessage:"Emails:"})," ",n.emails,g.a.createElement("br",null),g.a.createElement(O.c,{id:"admin.compliance_reports.keywords",defaultMessage:"Keywords:"})," ",n.keywords));var r="",s="";"finished"===n.status?(r=g.a.createElement("a",{href:"".concat(w.Client4.getBaseRoute(),"/compliance/reports/").concat(n.id,"/download")},g.a.createElement(O.c,{id:"admin.compliance_table.download",defaultMessage:"Download"})),s=g.a.createElement("span",{style:Us.greenStatus},n.status)):"failed"===n.status&&(s=g.a.createElement("span",{style:Us.redStatus},n.status));var o=n.user_id,l=this.props.users[n.user_id];l&&(o=l.email),t[a]=g.a.createElement("tr",{key:n.id},g.a.createElement("td",{style:Us.dataCell},r),g.a.createElement("td",null,this.getDateTime(n.create_at)),g.a.createElement("td",null,s),g.a.createElement("td",null,n.count),g.a.createElement("td",null,n.type),g.a.createElement("td",{style:Us.dataCell},n.desc),g.a.createElement("td",null,o),g.a.createElement("td",{style:Us.dataCell},i))}e=g.a.createElement("div",{style:Us.content},g.a.createElement("table",{className:"table"},g.a.createElement("thead",null,g.a.createElement("tr",null,g.a.createElement("th",null),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.timestamp",defaultMessage:"Timestamp"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.status",defaultMessage:"Status"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.records",defaultMessage:"Records"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.type",defaultMessage:"Type"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.desc",defaultMessage:"Description"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.userId",defaultMessage:"Requested By"})),g.a.createElement("th",null,g.a.createElement(O.c,{id:"admin.compliance_table.params",defaultMessage:"Params"})))),g.a.createElement("tbody",null,t)))}var c="";return this.props.serverError&&(c=g.a.createElement("div",{className:"form-group has-error",style:Us.serverError},g.a.createElement("label",{className:"control-label"},this.props.serverError))),g.a.createElement("div",{className:"panel compliance-panel"},g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.compliance_reports.title",defaultMessage:"Compliance Reports"})),g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.compliance_reports.desc",defaultMessage:"Job Name:"})),g.a.createElement("input",{type:"text",className:"form-control",id:"desc",ref:"desc",placeholder:P.localizeMessage("admin.compliance_reports.desc_placeholder",'E.g. "Audit 445 for HR"')})),g.a.createElement("div",{className:"col-sm-3 col-md-2 form-group"},g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.compliance_reports.from",defaultMessage:"From:"})),g.a.createElement("input",{type:"text",className:"form-control",id:"from",ref:"from",placeholder:P.localizeMessage("admin.compliance_reports.from_placeholder",'E.g. "2016-03-11"')})),g.a.createElement("div",{className:"col-sm-3 col-md-2 form-group"},g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.compliance_reports.to",defaultMessage:"To:"})),g.a.createElement("input",{type:"text",className:"form-control",id:"to",ref:"to",placeholder:P.localizeMessage("admin.compliance_reports.to_placeholder",'E.g. "2016-03-15"')}))),g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.compliance_reports.emails",defaultMessage:"Emails:"})),g.a.createElement("input",{type:"text",className:"form-control",id:"emails",ref:"emails",placeholder:P.localizeMessage("admin.compliance_reports.emails_placeholder",'E.g. "bill@example.com, bob@example.com"')})),g.a.createElement("div",{className:"col-sm-6 col-md-4 form-group"},g.a.createElement("label",null,g.a.createElement(O.c,{id:"admin.compliance_reports.keywords",defaultMessage:"Keywords:"})),g.a.createElement("input",{type:"text",className:"form-control",id:"keywords",ref:"keywords",placeholder:P.localizeMessage("admin.compliance_reports.keywords_placeholder",'E.g. "shorting stock"')}))),g.a.createElement("div",{className:"clearfix"},g.a.createElement("button",{id:"run-button",type:"submit",className:"btn btn-primary",onClick:this.runReport},g.a.createElement(O.c,{id:"admin.compliance_reports.run",defaultMessage:"Run Compliance Report"}))),c,g.a.createElement("div",{className:"text-right"},g.a.createElement("button",{type:"submit",className:"btn btn-link",disabled:this.state.runningReport,onClick:this.reload},g.a.createElement("i",{className:"fa fa-refresh",title:P.localizeMessage("generic_icons.reload","Reload Icon")}),g.a.createElement(O.c,{id:"admin.compliance_reports.reload",defaultMessage:"Reload Completed Compliance Reports"}))),g.a.createElement("div",{className:"compliance-panel__table"},e))}}]),t}();Ls(Is,"propTypes",{isLicensed:b.a.bool.isRequired,enabled:b.a.bool.isRequired,reports:b.a.arrayOf(b.a.object).isRequired,users:b.a.object.isRequired,serverError:b.a.string,actions:b.a.shape({getComplianceReports:b.a.func.isRequired,createComplianceReport:b.a.func.isRequired}).isRequired});var Us={content:{margin:10},greenStatus:{color:"green"},redStatus:{color:"red"},dataCell:{whiteSpace:"nowrap"},date:{whiteSpace:"nowrap"},serverError:{marginTop:"10px"}},Bs=Object(ks.createSelector)(function(e){return e.entities.users.profiles},function(e){return e.entities.admin.complianceReports},function(e,t){var a={};return Object.values(t).forEach(function(t){var n=e[t.user_id];n&&(a[n.id]=n)}),a});var Fs=Object(n.connect)(function(e){var t,a="true"===Object(c.getLicense)(e).IsLicensed,n=!1,i=Object(o.getConfig)(e);i&&i.ComplianceSettings&&(n=i.ComplianceSettings.Enable);var r=e.requests.admin.createCompliance.error;return r&&(t=r.message),{isLicensed:a,enabled:n,reports:Object.values(Object(o.getComplianceReports)(e)).sort(function(e,t){return t.create_at-e.create_at}),serverError:t,users:Bs(e)}},function(e){return{actions:Object(i.bindActionCreators)({getComplianceReports:r.getComplianceReports,createComplianceReport:r.createComplianceReport},e)}})(Is),qs=a(850);function zs(e){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ws(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Xs=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ws(Hs(Hs(a=function(e,t){return!t||"object"!==zs(t)&&"function"!=typeof t?Hs(e):t}(this,Ys(t).call(this,e)))),"reload",function(){a.setState({loadingAudits:!0}),a.props.actions.getAudits().then(function(){return a.setState({loadingAudits:!1})})}),a.state={loadingAudits:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Gs(e.prototype,t),a&&Gs(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getAudits().then(function(){return e.setState({loadingAudits:!1})})}},{key:"render",value:function(){var e=null;return this.props.isLicensed?(e=this.state.loadingAudits?g.a.createElement(ee.a,null):g.a.createElement("div",{style:Js.auditTable},g.a.createElement(qs.a,{audits:this.props.audits,showUserId:!0,showIp:!0,showSession:!0})),g.a.createElement("div",{className:"wrapper--admin"},g.a.createElement(Fs,null),g.a.createElement("div",{className:"panel audit-panel"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.audits.title",defaultMessage:"User Activity Logs"}),g.a.createElement("button",{type:"submit",className:"btn btn-link pull-right",onClick:this.reload},g.a.createElement("i",{className:"fa fa-refresh",title:Object(P.localizeMessage)("generic_icons.reload","Reload Icon")}),g.a.createElement(O.c,{id:"admin.audits.reload",defaultMessage:"Reload User Activity Logs"}))),g.a.createElement("div",{className:"audit-panel__table"},e)))):g.a.createElement("div",null)}}]),t}();Ws(Xs,"propTypes",{isLicensed:b.a.bool.isRequired,audits:b.a.arrayOf(b.a.object).isRequired,actions:b.a.shape({getAudits:b.a.func.isRequired}).isRequired});var Js={auditTable:{margin:10}};var Ks=Object(n.connect)(function(e){return{isLicensed:"true"===Object(c.getLicense)(e).IsLicensed,audits:Object.values(o.getAudits(e))}},function(e){return{actions:Object(i.bindActionCreators)({getAudits:r.getAudits},e)}})(Xs);function Qs(e){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eo(e,t,a){return t&&$s(e.prototype,t),a&&$s(e,a),e}function to(e,t){return(to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function no(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var io=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),no(ao(ao(a=function(e,t){return!t||"object"!==Qs(t)&&"function"!=typeof t?ao(e):t}(this,Zs(t).call(this,e)))),"stringToArray",function(e){return e.split(",").map(function(e){return e.trim()}).filter(Boolean)}),no(ao(ao(a)),"arrayToString",function(e){return e.join(",")}),no(ao(ao(a)),"handleChange",function(e){var t=a.stringToArray(e.target.value);a.props.onChange(a.props.id,t),a.setState({value:e.target.value})}),a.state={value:a.arrayToString(e.value)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&to(e,t)}(t,g.a.Component),eo(t,null,[{key:"propTypes",get:function(){return{id:b.a.string.isRequired,value:b.a.array.isRequired,onChange:b.a.func.isRequired,disabled:b.a.bool,setByEnv:b.a.bool.isRequired}}}]),eo(t,[{key:"render",value:function(){var e=P.localizeMessage("admin.customization.customUrlSchemes","Custom URL Schemes:"),t=P.localizeMessage("admin.customization.customUrlSchemesDesc",'Allows message text to link if it begins with any of the comma-separated URL schemes listed. By default, the following schemes will create links: "http", "https", "ftp", "tel", and "mailto".'),a=P.localizeMessage("admin.customization.customUrlSchemesPlaceholder",'E.g.: "git,smtp"');return g.a.createElement(H,{label:e,helpText:t,inputId:this.props.id,setByEnv:this.props.setByEnv},g.a.createElement("input",{id:this.props.id,className:"form-control",type:"text",placeholder:a,value:this.state.value,onChange:this.handleChange,disabled:this.props.disabled||this.props.setByEnv}))}}]),t}();function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var uo=Object(O.g)({removing:{id:Object(vt.b)("admin.license.removing"),defaultMessage:"Removing License..."},uploading:{id:Object(vt.b)("admin.license.uploading"),defaultMessage:"Uploading License..."}}),mo=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==ro(t)&&"function"!=typeof t?co(e):t}(this,oo(t).call(this,e))).handleChange=a.handleChange.bind(co(co(a))),a.handleSubmit=a.handleSubmit.bind(co(co(a))),a.handleRemove=a.handleRemove.bind(co(co(a))),a.state={fileSelected:!1,fileName:null,serverError:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,g.a.Component),function(e,t,a){t&&so(e.prototype,t),a&&so(e,a)}(t,[{key:"handleChange",value:function(){var e=yn()(mi.a.findDOMNode(this.refs.fileInput));e.prop("files").length>0&&this.setState({fileSelected:!0,fileName:e.prop("files")[0].name})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=yn()(mi.a.findDOMNode(this.refs.fileInput));if(0!==a.prop("files").length){var n=a.prop("files")[0];yn()("#upload-button").button("loading"),Object(d.F)(n,function(){P.clearFileInput(a[0]),yn()("#upload-button").button("reset"),t.setState({fileSelected:!1,fileName:null,serverError:null}),window.location.reload(!0)},function(e){P.clearFileInput(a[0]),yn()("#upload-button").button("reset"),t.setState({fileSelected:!1,fileName:null,serverError:e.message})})}}},{key:"handleRemove",value:function(e){var t=this;e.preventDefault(),yn()("#remove-button").button("loading"),Object(d.x)(function(){yn()("#remove-button").button("reset"),t.setState({fileSelected:!1,fileName:null,serverError:null}),at.a.clearLastError(!0),window.location.reload(!0)},function(e){yn()("#remove-button").button("reset"),t.setState({fileSelected:!1,fileName:null,serverError:e.message})})}},{key:"render",value:function(){var e="";this.state.serverError&&(e=g.a.createElement("div",{className:"col-sm-12"},g.a.createElement("div",{className:"form-group has-error"},g.a.createElement("label",{className:"control-label"},this.state.serverError))));var t,a,n,i="btn";this.state.fileSelected&&(i="btn btn-primary");var r,s=P.displayDate(parseInt(this.props.license.IssuedAt,10))+" "+P.displayTime(parseInt(this.props.license.IssuedAt,10),!0),o=P.displayDate(parseInt(this.props.license.StartsAt,10)),l=P.displayDate(parseInt(this.props.license.ExpiresAt,10));"true"===this.props.license.IsLicensed?(t="Mattermost Enterprise Edition. Enterprise features on this server have been unlocked with a license key and a valid subscription.",a=g.a.createElement("div",null,g.a.createElement("p",null,"This software is offered under a commercial license.\n\nSee ENTERPRISE-EDITION-LICENSE.txt in your root install directory for details. See NOTICE.txt for information about open source software used in this system.\n\nYour subscription details are as follows:"),"Name: ".concat(this.props.license.Name),g.a.createElement("br",null),"Company or organization name: ".concat(this.props.license.Company),g.a.createElement("br",null),"Number of users: ".concat(this.props.license.Users),g.a.createElement("br",null),"License issued: ".concat(s),g.a.createElement("br",null),"Start date of license: ".concat(o),g.a.createElement("br",null),"Expiry date of license: ".concat(l),g.a.createElement("br",null),g.a.createElement("br",null),"See also ",g.a.createElement("a",{href:"https://about.mattermost.com/enterprise-edition-terms/"},"Enterprise Edition Terms of Service")," and ",g.a.createElement("a",{href:"https://about.mattermost.com/privacy/"},"Privacy Policy.")),n=g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("button",{className:"btn btn-danger",onClick:this.handleRemove,id:"remove-button","data-loading-text":"<span class='fa fa-refresh icon--rotate' title='"+P.localizeMessage("generic_icons.reload","Reload Icon")+"'></span> "+this.props.intl.formatMessage(uo.removing)},g.a.createElement(O.c,{id:"admin.license.keyRemove",defaultMessage:"Remove Enterprise License and Downgrade Server"})),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("p",{className:"help-text"},"If you migrate servers you may need to remove your license key to install it elsewhere. You can remove the key here, which will revert functionality to that of Team Edition."))):(t=g.a.createElement("p",null,"Mattermost Enterprise Edition. Unlock enterprise features in this software through the purchase of a subscription from ",g.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://mattermost.com/"},"https://mattermost.com/")),a="This software is offered under a commercial license.\n\nSee ENTERPRISE-EDITION-LICENSE.txt in your root install directory for details. See NOTICE.txt for information about open source software used in this system.",r=this.state.fileName?this.state.fileName:g.a.createElement(O.c,{id:"admin.license.noFile",defaultMessage:"No file uploaded"}),n=g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("div",{className:"file__upload"},g.a.createElement("button",{className:"btn btn-primary"},g.a.createElement(O.c,{id:"admin.license.choose",defaultMessage:"Choose File"})),g.a.createElement("input",{ref:"fileInput",type:"file",accept:".mattermost-license",onChange:this.handleChange})),g.a.createElement("button",{className:i,disabled:!this.state.fileSelected,onClick:this.handleSubmit,id:"upload-button","data-loading-text":"<span class='fa fa-refresh icon--rotate' title='"+P.localizeMessage("generic_icons.reload","Reload Icon")+"'></span> "+this.props.intl.formatMessage(uo.uploading)},g.a.createElement(O.c,{id:"admin.license.upload",defaultMessage:"Upload"})),g.a.createElement("div",{className:"help-text no-margin"},r),g.a.createElement("br",null),e,g.a.createElement("p",{className:"help-text no-margin"},g.a.createElement(j.a,{id:"admin.license.uploadDesc",defaultMessage:"Upload a license key for Mattermost Enterprise Edition to upgrade this server. [Visit us online](!http://mattermost.com) to learn more about the benefits of Enterprise Edition or to purchase a key."}))));return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.license.title",defaultMessage:"Edition and License"})),g.a.createElement("form",{className:"form-horizontal",role:"form"},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.license.edition",defaultMessage:"Edition: "})),g.a.createElement("div",{className:"col-sm-8"},t)),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.license.type",defaultMessage:"License: "})),g.a.createElement("div",{className:"col-sm-8"},a)),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.license.key",defaultMessage:"License Key: "})),n)))}}]),t}();mo.propTypes={license:b.a.object.isRequired,intl:O.i.isRequired,config:b.a.object};var po=Object(O.h)(mo),fo=a(845),bo=a(846);function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var So=8,To=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_o(Eo(Eo(a=function(e,t){return!t||"object"!==ho(t)&&"function"!=typeof t?Eo(e):t}(this,yo(t).call(this,e)))),"renderConfirmModal",function(){var e=g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.deleteSchemeTitle",defaultMessage:"Delete {scheme} scheme?",values:{scheme:a.props.scheme.display_name}}),t=null;a.state.serverError&&(t=g.a.createElement("div",{className:"permission-scheme-summary-error-message"},g.a.createElement("i",{className:"fa fa-exclamation-circle"})," ",a.state.serverError));var n=g.a.createElement("div",null,g.a.createElement("p",null,g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.deleteConfirmQuestion",defaultMessage:"The permissions in the teams using this scheme will reset to the defaults in the System Scheme. Are you sure you want to delete the {schemeName} scheme?",values:{schemeName:a.props.scheme.display_name}})),t),i=g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.deleteConfirmButton",defaultMessage:"Yes, Delete"});return a.state.deleting&&(i=g.a.createElement("span",null,g.a.createElement("span",{className:"fa fa-refresh icon--rotate"}),g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.deleting",defaultMessage:"Deleting..."}))),g.a.createElement(Ie.a,{show:a.state.showConfirmModal,title:e,message:n,confirmButtonText:i,onConfirm:a.handleDeleteConfirmed,onCancel:a.handleDeleteCanceled})}),_o(Eo(Eo(a)),"stopPropagation",function(e){e.stopPropagation()}),_o(Eo(Eo(a)),"handleDeleteCanceled",function(){a.setState({showConfirmModal:!1})}),_o(Eo(Eo(a)),"handleDeleteConfirmed",function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){go(r,n,i,s,o,"next",e)}function o(e){go(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({deleting:!0,serverError:null}),e.next=3,a.props.actions.deleteScheme(a.props.scheme.id);case 3:(t=e.sent).error?a.setState({deleting:!1,serverError:t.error.message}):a.setState({deleting:!1,showConfirmModal:!1});case 5:case"end":return e.stop()}},e,this)}))),_o(Eo(Eo(a)),"delete",function(e){e.stopPropagation(),a.setState({showConfirmModal:!0,serverError:null})}),_o(Eo(Eo(a)),"goToEdit",function(){a.props.history.push("/admin_console/permissions/team-override-scheme/"+a.props.scheme.id)}),_o(Eo(Eo(a)),"render",function(){var e=a.props.scheme,t=a.props.teams?a.props.teams.map(function(e){return g.a.createElement("span",{className:"team",key:e.id},e.display_name)}):[],n=null;t.length>So&&(n=g.a.createElement(Br.a,{trigger:["hover","focus"],delayShow:A.D.OVERLAY_TIME_DELAY,placement:"bottom",overlay:g.a.createElement(M.a,{className:"team-scheme-extra-teams-overlay",id:e.id+"-extra-teams-overlay"},t.slice(So))},g.a.createElement("span",{className:"team",key:"extra-teams"},g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.moreTeams",defaultMessage:"+{number} more",values:{number:t.length-So}}))),t=t.slice(0,So));var i=a.renderConfirmModal();return g.a.createElement("div",{className:"permissions-scheme-summary",onClick:a.goToEdit},g.a.createElement("div",{onClick:a.stopPropagation},i),g.a.createElement("div",{className:"permissions-scheme-summary--header"},g.a.createElement("div",{className:"title"},e.display_name),g.a.createElement("div",{className:"actions"},g.a.createElement(ns.a,{className:"edit-button",to:"/admin_console/permissions/team-override-scheme/"+e.id},g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.edit",defaultMessage:"Edit"})),"-",g.a.createElement("a",{className:"delete-button",onClick:a.delete},g.a.createElement(O.c,{id:"admin.permissions.permissionsSchemeSummary.delete",defaultMessage:"Delete"})))),g.a.createElement("div",{className:"permissions-scheme-summary--description"},e.description),g.a.createElement("div",{className:"permissions-scheme-summary--teams"},t,n))}),a.state={showConfirmModal:!1,deleting:!1,serverError:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,g.a.Component),t}();_o(To,"propTypes",{scheme:b.a.object.isRequired,teams:b.a.array,actions:b.a.shape({deleteScheme:b.a.func.isRequired}).isRequired});var Oo=Object(n.connect)(function(){var e=Object(bo.makeGetSchemeTeams)();return function(t,a){return{teams:e(t,{schemeId:a.scheme.id})}}},function(e){return{actions:Object(i.bindActionCreators)({deleteScheme:fo.deleteScheme},e)}})(To);function wo(e){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Po(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function jo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ao=30,No=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Co(ko(ko(a=function(e,t){return!t||"object"!==wo(t)&&"function"!=typeof t?ko(e):t}(this,xo(t).call(this,e)))),"loadMoreSchemes",function(){a.setState({loadingMore:!0}),a.props.actions.loadSchemes("team",a.state.page+1,Ao).then(function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var s,o=e.data[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;t.push(a.props.actions.loadSchemeTeams(l.id))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}Promise.all(t).then(function(){return a.setState({loadingMore:!1,page:a.state.page+1})})})}),Co(ko(ko(a)),"teamOverrideSchemesMigrationView",function(){if(a.state.phase2MigrationIsComplete)return null;var e=g.a.createElement("a",{href:"https://docs.mattermost.com/administration/config-settings.html#jobs",rel:"noopener noreferrer",target:"_blank"},g.a.createElement(O.c,{id:"admin.permissions.documentationLinkText",defaultMessage:"documentation"}));return a.props.jobsAreEnabled&&!a.props.clusterIsEnabled?a.teamOverrideUnavalableView(Object(vt.b)("admin.permissions.teamOverrideSchemesInProgress"),"Migration job in progress: Team Override Schemes are not available until the job server completes the permissions migration. Learn more in the {documentationLink}.",e):a.teamOverrideUnavalableView(Object(vt.b)("admin.permissions.teamOverrideSchemesNoJobsEnabled"),"Migration job on hold: Team Override Schemes are not available until the job server can execute the permissions migration. The job will be automatically started when the job server is enabled. Learn more in the {documentationLink}.",e)}),Co(ko(ko(a)),"teamOverrideUnavalableView",function(e,t,a){return g.a.createElement("div",{className:"team-override-unavailable"},g.a.createElement("div",{className:"team-override-unavailable__inner"},g.a.createElement(O.c,{id:e,defaultMessage:t,values:{documentationLink:a}})))}),Co(ko(ko(a)),"render",function(){if(a.state.loading)return g.a.createElement(ee.a,null);var e=Object.values(a.props.schemes).map(function(e){return g.a.createElement(Oo,{scheme:e,history:a.props.history,key:e.id})}),t=a.teamOverrideSchemesMigrationView();return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.permissions.permissionSchemes",defaultMessage:"Permission Schemes"})),g.a.createElement("div",{className:"banner info"},g.a.createElement("div",{className:"banner__content"},g.a.createElement("span",null,g.a.createElement(j.a,{id:"admin.permissions.introBanner",defaultMessage:"Permission Schemes set the default permissions for Team Admins, Channel Admins and everyone else. Learn more about permission schemes in our [documentation](!https://about.mattermost.com/default-advanced-permissions)."})))),g.a.createElement("div",{className:"permissions-block"},g.a.createElement("div",{className:"header"},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemSchemeBannerTitle",defaultMessage:"System Scheme"})),g.a.createElement("span",null,g.a.createElement(j.a,{id:"admin.permissions.systemSchemeBannerText",defaultMessage:"Set the default permissions inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied."}))),g.a.createElement("div",{className:"button"},g.a.createElement(ns.a,{className:"btn btn-primary",to:"/admin_console/permissions/system-scheme"},g.a.createElement(O.c,{id:"admin.permissions.systemSchemeBannerButton",defaultMessage:"Edit Scheme"}))))),g.a.createElement("div",{className:"permissions-block"},g.a.createElement("div",{className:"header"},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.teamOverrideSchemesTitle",defaultMessage:"Team Override Schemes"})),g.a.createElement("span",null,g.a.createElement(j.a,{id:"admin.permissions.teamOverrideSchemesBannerText",defaultMessage:"Use when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme)."}))),g.a.createElement("div",{className:"button"},g.a.createElement(ns.a,{className:"btn btn-primary",to:"/admin_console/permissions/team-override-scheme",disabled:null!==t,onClick:function(e){return null===t||(e.preventDefault(),!1)}},g.a.createElement(O.c,{id:"admin.permissions.teamOverrideSchemesNewButton",defaultMessage:"New Team Override Scheme"})))),0===e.length&&null===t&&g.a.createElement("div",{className:"no-team-schemes"},g.a.createElement(O.c,{id:"admin.permissions.teamOverrideSchemesNoSchemes",defaultMessage:"No team override schemes created."})),t,e.length>0&&e,!a.state.loadingMore&&e.length===Ao*(a.state.page+1)&&g.a.createElement("button",{className:"more-schemes theme style--none color--link",onClick:a.loadMoreSchemes},g.a.createElement(O.c,{id:"admin.permissions.loadMoreSchemes",defaultMessage:"Load more schemes"})),a.state.loadingMore&&g.a.createElement("button",{className:"more-schemes theme style--none color--link"},g.a.createElement("span",{className:"fa fa-refresh icon--rotate"}),g.a.createElement(O.c,{id:"admin.permissions.loadingMoreSchemes",defaultMessage:"Loading..."}))))}),a.state={loading:!0,loadingMore:!1,page:0,phase2MigrationIsComplete:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&jo(e.prototype,t),a&&jo(e,a)}(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Po(r,n,i,s,o,"next",e)}function o(e){Po(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t,a,n,i,r,s,o,l,c,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,e.prev=1,e.next=4,this.props.actions.loadSchemes("team",0,Ao);case 4:for(501===(t=e.sent).error.status_code&&(a=!1),n=[],i=!0,r=!1,s=void 0,e.prev=10,o=t.data[Symbol.iterator]();!(i=(l=o.next()).done);i=!0)c=l.value,n.push(this.props.actions.loadSchemeTeams(c.id));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),r=!0,s=e.t0;case 18:e.prev=18,e.prev=19,i||null==o.return||o.return();case 21:if(e.prev=21,!r){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:Promise.all(n).then(function(){return u.setState({loading:!1,phase2MigrationIsComplete:a})}),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(1),this.setState({loading:!1,phase2MigrationIsComplete:a});case 32:case"end":return e.stop()}},e,this,[[1,29],[10,14,18,26],[19,,21,25]])}));return function(){return e.apply(this,arguments)}}()}]),t}();Co(No,"propTypes",{schemes:b.a.object.isRequired,jobsAreEnabled:b.a.bool,clusterIsEnabled:b.a.bool,actions:b.a.shape({loadSchemes:b.a.func.isRequired,loadSchemeTeams:b.a.func.isRequired})}),Co(No,"defaultProps",{schemes:{}}),Object(vt.b)("admin.permissions.group.delete_posts.description"),Object(vt.b)("admin.permissions.group.delete_posts.name"),Object(vt.b)("admin.permissions.group.integrations.description"),Object(vt.b)("admin.permissions.group.integrations.name"),Object(vt.b)("admin.permissions.group.posts.description"),Object(vt.b)("admin.permissions.group.posts.name"),Object(vt.b)("admin.permissions.group.private_channel.description"),Object(vt.b)("admin.permissions.group.private_channel.name"),Object(vt.b)("admin.permissions.group.public_channel.description"),Object(vt.b)("admin.permissions.group.public_channel.name"),Object(vt.b)("admin.permissions.group.reactions.description"),Object(vt.b)("admin.permissions.group.reactions.name"),Object(vt.b)("admin.permissions.group.send_invites.description"),Object(vt.b)("admin.permissions.group.send_invites.name"),Object(vt.b)("admin.permissions.group.teams.description"),Object(vt.b)("admin.permissions.group.teams.name"),Object(vt.b)("admin.permissions.group.edit_posts.description"),Object(vt.b)("admin.permissions.group.edit_posts.name"),Object(vt.b)("admin.permissions.group.teams_team_scope.description"),Object(vt.b)("admin.permissions.group.teams_team_scope.name"),Object(vt.b)("admin.permissions.permission.assign_system_admin_role.description"),Object(vt.b)("admin.permissions.permission.assign_system_admin_role.name"),Object(vt.b)("admin.permissions.permission.create_direct_channel.description"),Object(vt.b)("admin.permissions.permission.create_direct_channel.name"),Object(vt.b)("admin.permissions.permission.create_group_channel.description"),Object(vt.b)("admin.permissions.permission.create_group_channel.name"),Object(vt.b)("admin.permissions.permission.create_private_channel.description"),Object(vt.b)("admin.permissions.permission.create_private_channel.name"),Object(vt.b)("admin.permissions.permission.create_public_channel.description"),Object(vt.b)("admin.permissions.permission.create_public_channel.name"),Object(vt.b)("admin.permissions.permission.create_team.description"),Object(vt.b)("admin.permissions.permission.create_team.name"),Object(vt.b)("admin.permissions.permission.create_user_access_token.description"),Object(vt.b)("admin.permissions.permission.create_user_access_token.name"),Object(vt.b)("admin.permissions.permission.delete_others_posts.description"),Object(vt.b)("admin.permissions.permission.delete_others_posts.name"),Object(vt.b)("admin.permissions.permission.delete_post.description"),Object(vt.b)("admin.permissions.permission.delete_post.name"),Object(vt.b)("admin.permissions.permission.delete_private_channel.description"),Object(vt.b)("admin.permissions.permission.delete_private_channel.name"),Object(vt.b)("admin.permissions.permission.delete_public_channel.description"),Object(vt.b)("admin.permissions.permission.delete_public_channel.name"),Object(vt.b)("admin.permissions.permission.edit_other_users.description"),Object(vt.b)("admin.permissions.permission.edit_other_users.name"),Object(vt.b)("admin.permissions.permission.edit_post.description"),Object(vt.b)("admin.permissions.permission.edit_post.name"),Object(vt.b)("admin.permissions.permission.import_team.description"),Object(vt.b)("admin.permissions.permission.import_team.name"),Object(vt.b)("admin.permissions.permission.list_team_channels.description"),Object(vt.b)("admin.permissions.permission.list_team_channels.name"),Object(vt.b)("admin.permissions.permission.list_users_without_team.description"),Object(vt.b)("admin.permissions.permission.list_users_without_team.name"),Object(vt.b)("admin.permissions.permission.manage_channel_roles.description"),Object(vt.b)("admin.permissions.permission.manage_channel_roles.name"),Object(vt.b)("admin.permissions.permission.manage_emojis.description"),Object(vt.b)("admin.permissions.permission.manage_emojis.name"),Object(vt.b)("admin.permissions.permission.manage_jobs.description"),Object(vt.b)("admin.permissions.permission.manage_jobs.name"),Object(vt.b)("admin.permissions.permission.manage_oauth.description"),Object(vt.b)("admin.permissions.permission.manage_oauth.name"),Object(vt.b)("admin.permissions.permission.manage_private_channel_members.description"),Object(vt.b)("admin.permissions.permission.manage_private_channel_members.name"),Object(vt.b)("admin.permissions.permission.manage_private_channel_properties.description"),Object(vt.b)("admin.permissions.permission.manage_private_channel_properties.name"),Object(vt.b)("admin.permissions.permission.manage_public_channel_members.description"),Object(vt.b)("admin.permissions.permission.manage_public_channel_members.name"),Object(vt.b)("admin.permissions.permission.manage_public_channel_properties.description"),Object(vt.b)("admin.permissions.permission.manage_public_channel_properties.name"),Object(vt.b)("admin.permissions.permission.manage_roles.description"),Object(vt.b)("admin.permissions.permission.manage_roles.name"),Object(vt.b)("admin.permissions.permission.manage_slash_commands.description"),Object(vt.b)("admin.permissions.permission.manage_slash_commands.name"),Object(vt.b)("admin.permissions.permission.manage_system.description"),Object(vt.b)("admin.permissions.permission.manage_system.name"),Object(vt.b)("admin.permissions.permission.manage_team.description"),Object(vt.b)("admin.permissions.permission.manage_team.name"),Object(vt.b)("admin.permissions.permission.manage_team_roles.description"),Object(vt.b)("admin.permissions.permission.manage_team_roles.name"),Object(vt.b)("admin.permissions.permission.manage_webhooks.description"),Object(vt.b)("admin.permissions.permission.manage_webhooks.name"),Object(vt.b)("admin.permissions.permission.permanent_delete_user.description"),Object(vt.b)("admin.permissions.permission.permanent_delete_user.name"),Object(vt.b)("admin.permissions.permission.read_channel.description"),Object(vt.b)("admin.permissions.permission.read_channel.name"),Object(vt.b)("admin.permissions.permission.read_user_access_token.description"),Object(vt.b)("admin.permissions.permission.read_user_access_token.name"),Object(vt.b)("admin.permissions.permission.remove_user_from_team.description"),Object(vt.b)("admin.permissions.permission.remove_user_from_team.name"),Object(vt.b)("admin.permissions.permission.revoke_user_access_token.description"),Object(vt.b)("admin.permissions.permission.revoke_user_access_token.name"),Object(vt.b)("admin.permissions.permission.upload_file.description"),Object(vt.b)("admin.permissions.permission.upload_file.name"),Object(vt.b)("admin.permissions.permission.view_team.description"),Object(vt.b)("admin.permissions.permission.view_team.name"),Object(vt.b)("admin.permissions.permission.edit_others_posts.description"),Object(vt.b)("admin.permissions.permission.edit_others_posts.name"),Object(vt.b)("admin.permissions.roles.all_users.name"),Object(vt.b)("admin.permissions.roles.channel_admin.name"),Object(vt.b)("admin.permissions.roles.channel_user.name"),Object(vt.b)("admin.permissions.roles.system_admin.name"),Object(vt.b)("admin.permissions.roles.system_user.name"),Object(vt.b)("admin.permissions.roles.team_admin.name"),Object(vt.b)("admin.permissions.roles.team_user.name");var Ro=Object(n.connect)(function(e){var t=Object(bo.getSchemes)(e),a=Object(c.getConfig)(e);return{schemes:t,jobsAreEnabled:"true"===a.RunJobs,clusterIsEnabled:"true"===a.EnableCluster}},function(e){return{actions:Object(i.bindActionCreators)({loadSchemes:fo.getSchemes,loadSchemeTeams:fo.getSchemeTeams},e)}})(No),Do=(a(99),a(249),a(1022));function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uo(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uo(this,Bo(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Io(e.prototype,t),a&&Io(e,a)}(t,[{key:"render",value:function(){return g.a.createElement("span",this.props,g.a.createElement("svg",{width:"30px",height:"30px",viewBox:"0 0 30 30"},g.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{transform:"translate(-995.000000, -1372.000000)",id:"All-Team-Members"},g.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},g.a.createElement("g",{id:"Team-Administrators",transform:"translate(0.000000, 651.000000)"},g.a.createElement("g",{id:"accordion-header"},g.a.createElement("g",{id:"accordion---expanded",transform:"translate(750.000000, 23.000000)"},g.a.createElement("path",{d:"M23.1484532,13.3124932 C23.3437659,13.1171805 23.3437659,12.7968676 23.1484532,12.6015549 L21.8515766,11.3124908 C21.6562639,11.1171781 21.3437635,11.1171781 21.1484508,11.3124908 L15.0000083,17.4609333 L8.8515659,11.3124908 C8.65625317,11.1171781 8.34375279,11.1171781 8.14844006,11.3124908 L6.85156352,12.6015549 C6.65625078,12.7968676 6.65625078,13.1171805 6.85156352,13.3124932 L14.6484454,21.1015626 C14.8437582,21.2968754 15.1562585,21.2968754 15.3515713,21.1015626 L23.1484532,13.3124932 Z",id:"ï¸",fill:"#979797"}),g.a.createElement("circle",{id:"Oval-2",stroke:"#989898",strokeWidth:"2",cx:"15",cy:"15",r:"14"})))))))))}}]),t}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yo(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yo(this,Vo(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Go(e.prototype,t),a&&Go(e,a)}(t,[{key:"render",value:function(){return g.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},g.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},g.a.createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},g.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},g.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},g.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},g.a.createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},g.a.createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},g.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base"},g.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},g.a.createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"})))))))))))}}]),t}();function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e,t){return!t||"object"!==Xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ko(this,Qo(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Jo(e.prototype,t),a&&Jo(e,a)}(t,[{key:"render",value:function(){return g.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},g.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},g.a.createElement("g",{transform:"translate(-298.000000, -1273.000000)",id:"All-Team-Members"},g.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},g.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},g.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},g.a.createElement("g",{id:"row-checkbox---@all-@channel-Mentions",transform:"translate(0.000000, 375.000000)"},g.a.createElement("g",{id:"Stacked-Group"},g.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base",transform:"translate(25.000000, 5.000000)"},g.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},g.a.createElement("path",{d:"M19,3 C20.1,3 21,3.9 21,5 L21,19 C21,20.1 20.1,21 19,21 L5,21 C3.9,21 3,20.1 3,19 L3,5 C3,3.9 3.9,3 5,3 L19,3 Z M7,11 L7,13 L17,13 L17,11 L7,11 Z",id:"checkbox---partial"})))))))))))}}]),t}();function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function al(e,t){return!t||"object"!==el(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function il(e,t){return(il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var sl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),al(this,nl(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&il(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&tl(e.prototype,t),a&&tl(e,a)}(t,[{key:"render",value:function(){var e=this.props.value,t=null,a="";return"checked"===e?(t=g.a.createElement(Wo,null),a="checked"):"intermediate"===e&&(t=g.a.createElement($o,null),a="intermediate"),g.a.createElement("div",{className:"permission-check "+a},t)}}]),t}();function ol(e){return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ll(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}rl(sl,"propTypes",{value:b.a.string.isRequired}),rl(sl,"defaultProps",{value:""});var pl=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dl(ml(ml(a=function(e,t){return!t||"object"!==ol(t)&&"function"!=typeof t?ml(e):t}(this,cl(t).call(this,e)))),"closeTooltip",function(){a.setState({open:!1})}),dl(ml(ml(a)),"openTooltip",function(e){var t=e.currentTarget.querySelector("span"),n=t.offsetWidth<t.scrollWidth;a.setState({open:n})}),dl(ml(ml(a)),"parentPermissionClicked",function(e){var t="inherit-link-wrapper"===e.target.parentElement.parentElement.className;"permission-description"===e.target.parentElement.className||t?t&&(a.props.selectRow(a.props.id),e.stopPropagation()):e.stopPropagation()}),a.id=Object(P.generateId)(),a.state={open:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ul(e,t)}(t,g.a.Component),function(e,t,a){t&&ll(e.prototype,t),a&&ll(e,a)}(t,[{key:"render",value:function(){var e=this.props,t=e.inherited,a=e.id,n=e.rowType,i="";i=t?g.a.createElement("span",{className:"inherit-link-wrapper"},g.a.createElement(O.b,{id:"admin.permissions.inherited_from",values:{name:this.props.intl.formatMessage({id:"admin.permissions.roles."+t.name+".name",defaultMessage:t.display_name})}})):g.a.createElement(O.c,{id:"admin.permissions."+n+"."+a+".description",values:this.props.additionalValues});var r=g.a.createElement(x.a,{show:this.state.open,delayShow:A.D.OVERLAY_TIME_DELAY,placement:"top",target:this.refs.content},g.a.createElement(M.a,{id:this.id},i));return i.props.values&&Object.keys(i.props.values).length>0&&(r=null),i=g.a.createElement("span",{className:"permission-description",onClick:this.parentPermissionClicked,ref:"content",onMouseOver:this.openTooltip,onMouseOut:this.closeTooltip},i,r)}}]),t}();dl(pl,"propTypes",{intl:O.i.isRequired,id:b.a.string.isRequired,rowType:b.a.string.isRequired,inherited:b.a.object,selectRow:b.a.func.isRequired,additionalValues:b.a.object});var fl=Object(O.h)(pl);function bl(e){return(bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gl(e,t){return(gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var El=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return vl(yl(yl(a=function(e,t){return!t||"object"!==bl(t)&&"function"!=typeof t?yl(e):t}(this,(e=hl(t)).call.apply(e,[this].concat(i))))),"toggleSelect",function(){a.props.readOnly||a.props.onChange(a.props.id)}),vl(yl(yl(a)),"render",function(){var e=a.props,t=e.id,n=e.uniqId,i=e.inherited,r=e.value,s=e.readOnly,o=e.selected,l=e.additionalValues,c="permission-row";return s&&(c+=" read-only"),o===t&&(c+=" selected"),g.a.createElement("div",{className:c,onClick:a.toggleSelect,id:n},g.a.createElement(sl,{value:r}),g.a.createElement("span",{className:"permission-name"},g.a.createElement(O.c,{id:"admin.permissions.permission."+t+".name"})),g.a.createElement(fl,{inherited:i,id:t,selectRow:a.props.selectRow,rowType:"permission",additionalValues:l}))}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gl(e,t)}(t,g.a.Component),t}();function _l(e){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sl(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tl(e){return(Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}vl(El,"propTypes",{id:b.a.string.isRequired,uniqId:b.a.string.isRequired,inherited:b.a.object,readOnly:b.a.bool,selected:b.a.string,selectRow:b.a.func.isRequired,value:b.a.string.isRequired,onChange:b.a.func.isRequired,additionalValues:b.a.object});var jl=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pl(wl(wl(a=function(e,t){return!t||"object"!==_l(t)&&"function"!=typeof t?wl(e):t}(this,Tl(t).call(this,e)))),"toggleExpanded",function(e){e.stopPropagation(),a.setState({expanded:!a.state.expanded})}),Pl(wl(wl(a)),"toggleSelectRow",function(e){a.props.readOnly||a.props.onChange([e])}),Pl(wl(wl(a)),"getRecursivePermissions",function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;"string"==typeof l?t.push(l):t=t.concat(a.getRecursivePermissions(l.permissions))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}),Pl(wl(wl(a)),"toggleSelectSubGroup",function(e){a.props.readOnly||a.props.onChange(e)}),Pl(wl(wl(a)),"toggleSelectGroup",function(){var e=a.props,t=e.readOnly,n=e.permissions,i=e.role,r=e.onChange;if(!t)if("checked"===a.getStatus(n)){var s=[],o=!0,l=!1,c=void 0;try{for(var u,m=a.getRecursivePermissions(n)[Symbol.iterator]();!(o=(u=m.next()).done);o=!0){var d=u.value;a.fromParent(d)||s.push(d)}}catch(e){l=!0,c=e}finally{try{o||null==m.return||m.return()}finally{if(l)throw c}}a.setState({expanded:!0}),r(s)}else if(""===a.getStatus(n)){var p=[],f=!0;if(0===a.state.prevPermissions.length){var b=!0,h=!1,g=void 0;try{for(var y,v=a.getRecursivePermissions(n)[Symbol.iterator]();!(b=(y=v.next()).done);b=!0){var E=y.value;a.fromParent(E)||(p.push(E),f=!1)}}catch(e){h=!0,g=e}finally{try{b||null==v.return||v.return()}finally{if(h)throw g}}}else{var _=!0,S=!1,T=void 0;try{for(var O,w=a.getRecursivePermissions(n)[Symbol.iterator]();!(_=(O=w.next()).done);_=!0){var P=O.value;-1===a.state.prevPermissions.indexOf(P)||a.fromParent(P)||p.push(P)}}catch(e){S=!0,T=e}finally{try{_||null==w.return||w.return()}finally{if(S)throw T}}}r(p),a.setState({prevPermissions:[],expanded:f})}else{var j=[],x=!0,M=!1,k=void 0;try{for(var C,A=a.getRecursivePermissions(n)[Symbol.iterator]();!(x=(C=A.next()).done);x=!0){var N=C.value;-1!==i.permissions.indexOf(N)||a.fromParent(N)||j.push(N)}}catch(e){M=!0,k=e}finally{try{x||null==A.return||A.return()}finally{if(M)throw k}}a.setState({prevPermissions:i.permissions,expanded:!1}),r(j)}}),Pl(wl(wl(a)),"isInScope",function(e){return("channel_scope"!==a.props.scope||"channel_scope"===A.o[e])&&("team_scope"!==a.props.scope||"system_scope"!==A.o[e])}),Pl(wl(wl(a)),"renderPermission",function(e,t){if(!a.isInScope(e))return null;var n=a.fromParent(e),i=n||-1!==a.props.role.permissions.indexOf(e);return g.a.createElement(El,{key:e,id:e,uniqId:a.props.uniqId+"-"+e,selected:a.props.selected,selectRow:a.props.selectRow,readOnly:a.props.readOnly||n,inherited:n?a.props.parentRole:null,value:i?"checked":"",onChange:a.toggleSelectRow,additionalValues:t})}),Pl(wl(wl(a)),"renderGroup",function(e){return g.a.createElement(t,{key:e.id,id:e.id,uniqId:a.props.uniqId+"-"+e.id,selected:a.props.selected,selectRow:a.props.selectRow,readOnly:a.props.readOnly,permissions:e.permissions,additionalValues:a.props.additionalValues,role:a.props.role,parentRole:a.props.parentRole,scope:a.props.scope,onChange:a.toggleSelectSubGroup,combined:e.combined,root:!1})}),Pl(wl(wl(a)),"fromParent",function(e){return a.props.parentRole&&-1!==a.props.parentRole.permissions.indexOf(e)}),Pl(wl(wl(a)),"getStatus",function(e){var t=!1,n=!1,i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if("string"==typeof c){if(!a.isInScope(c))continue;t=t||a.fromParent(c)||-1!==a.props.role.permissions.indexOf(c),n=n||!a.fromParent(c)&&-1===a.props.role.permissions.indexOf(c)}else{var u=a.getStatus(c.permissions);if("intermediate"===u)return"intermediate";"checked"===u&&(t=!0),""===u&&(n=!0)}}}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return t&&n?"intermediate":t&&!n?"checked":""}),Pl(wl(wl(a)),"hasPermissionsOnScope",function(){return a.getRecursivePermissions(a.props.permissions).some(function(e){return a.isInScope(e)})}),Pl(wl(wl(a)),"allPermissionsFromParent",function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;if("string"==typeof o){if(a.isInScope(o)&&!a.fromParent(o))return!1}else if(!a.allPermissionsFromParent(o.permissions))return!1}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}return!0}),Pl(wl(wl(a)),"render",function(){var e=a.props,t=e.id,n=e.uniqId,i=e.permissions,r=e.readOnly,s=e.combined,o=e.root,l=e.selected,c=e.additionalValues;if(!a.hasPermissionsOnScope())return null;var u=i.map(function(e){if("string"==typeof e){var t=c&&c[e]?c[e]:{};return a.renderPermission(e,t)}return a.renderGroup(e)});if(o)return g.a.createElement("div",{className:"permission-group-permissions "+(a.state.expanded?"open":"")},u);var m=null;a.allPermissionsFromParent(a.props.permissions)&&a.props.combined&&(m=a.props.parentRole);var d="";return l===t&&(d+=" selected"),(r||a.allPermissionsFromParent(a.props.permissions))&&(d+=" read-only"),s&&(d+=" combined"),g.a.createElement("div",{className:"permission-group"},!o&&g.a.createElement("div",{className:"permission-group-row "+d,onClick:a.toggleSelectGroup,id:n},!s&&g.a.createElement("div",{className:"fa fa-caret-right permission-arrow "+(a.state.expanded?"open":""),onClick:a.toggleExpanded}),g.a.createElement(sl,{value:a.getStatus(a.props.permissions)}),g.a.createElement("span",{className:"permission-name"},g.a.createElement(O.c,{id:"admin.permissions.group."+t+".name"})),g.a.createElement(fl,{inherited:m,id:t,selectRow:a.props.selectRow,rowType:"group"})),!s&&g.a.createElement("div",{className:"permission-group-permissions "+(a.state.expanded?"open":"")},u))}),a.state={expanded:!0,prevPermissions:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(t,g.a.Component),function(e,t,a){t&&Sl(e.prototype,t),a&&Sl(e,a)}(t,[{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.selected!==e.selected&&-1!==this.getRecursivePermissions(this.props.permissions).indexOf(e.selected)&&this.setState({expanded:!0})}}]),t}();function xl(e){return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ml(e){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kl(e,t){return(kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Al(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Pl(jl,"propTypes",{id:b.a.string.isRequired,uniqId:b.a.string.isRequired,permissions:b.a.array.isRequired,readOnly:b.a.bool,role:b.a.object,parentRole:b.a.object,scope:b.a.string.isRequired,combined:b.a.bool,selected:b.a.string,selectRow:b.a.func.isRequired,root:b.a.bool,onChange:b.a.func.isRequired,additionalValues:b.a.object});var Nl=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Al(Cl(Cl(a=function(e,t){return!t||"object"!==xl(t)&&"function"!=typeof t?Cl(e):t}(this,(e=Ml(t)).call.apply(e,[this].concat(i))))),"render",function(){var e;return e=a.props.timeLimit===A.e.UNSET_POST_EDIT_TIME_LIMIT?Object(vt.b)("edit_post.time_limit_button.no_limit"):Object(vt.b)("edit_post.time_limit_button.for_n_seconds"),g.a.createElement("button",{className:"edit-post-time-limit-button",onClick:a.props.onClick},g.a.createElement("i",{className:"fa fa-gear"}),g.a.createElement(O.c,{id:e,values:{n:a.props.timeLimit}}))}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kl(e,t)}(t,g.a.Component),t}();Al(Nl,"propTypes",{timeLimit:b.a.number.isRequired,onClick:b.a.func});var Rl=Object(n.connect)(function(e){var t=Object(c.getConfig)(e).PostEditTimeLimit;return{timeLimit:parseInt(t,10)}})(Nl);function Dl(e){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Il(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ul(e){return(Ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bl(e,t){return(Bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ql(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var zl=2147483647,Gl=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ql(Fl(Fl(a=function(e,t){return!t||"object"!==Dl(t)&&"function"!=typeof t?Fl(e):t}(this,Ul(t).call(this,e)))),"save",function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Ll(r,n,i,s,o,"next",e)}function o(e){Ll(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({saving:!0,errorMessage:""}),(t=parseInt(a.state.postEditTimeLimit,10))===A.e.UNSET_POST_EDIT_TIME_LIMIT){e.next=6;break}if(!("NaN"===t.toString()||t<=0||t>zl)){e.next=6;break}return a.setState({errorMessage:Object(P.localizeMessage)("edit_post.time_limit_modal.invalid_time_limit","Invalid time limit"),saving:!1}),e.abrupt("return",!1);case 6:return(n=JSON.parse(JSON.stringify(a.props.config))).ServiceSettings.PostEditTimeLimit=t,e.next=10,a.props.actions.updateConfig(n);case 10:return i=e.sent,(r=i.error)?a.setState({errorMessage:r,saving:!1}):(a.setState({saving:!1}),a.props.onClose()),e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,this)}))),ql(Fl(Fl(a)),"handleOptionChange",function(e){e.target.value===A.e.ALLOW_EDIT_POST_ALWAYS?a.setState({postEditTimeLimit:A.e.UNSET_POST_EDIT_TIME_LIMIT}):a.setState({postEditTimeLimit:""})}),ql(Fl(Fl(a)),"handleSecondsChange",function(e){var t=e.target.value;a.setState({postEditTimeLimit:t})}),ql(Fl(Fl(a)),"render",function(){return g.a.createElement(Do.a,{dialogClassName:"admin-modal edit-post-time-limit-modal",show:a.props.show},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement("h4",{className:"modal-title"},g.a.createElement(O.c,{id:"edit_post.time_limit_modal.title",defaultMessage:"Configure Global Edit Post Time Limit"}))),g.a.createElement(Do.a.Body,null,g.a.createElement(O.b,{id:"edit_post.time_limit_modal.description",defaultMessage:'Setting a time limit <strong>applies to all users</strong> who have the "Edit Post" permissions in any permission scheme.'}),g.a.createElement("div",{className:"padding-left x2 padding-top padding-bottom"},g.a.createElement("div",{className:"padding-top x2"},g.a.createElement("input",{id:"anytime",type:"radio",name:"limit",value:A.e.ALLOW_EDIT_POST_ALWAYS,checked:a.state.postEditTimeLimit===A.e.UNSET_POST_EDIT_TIME_LIMIT,onChange:a.handleOptionChange}),g.a.createElement("label",{htmlFor:"anytime"},g.a.createElement(O.c,{id:"edit_post.time_limit_modal.option_label_anytime",defaultMessage:"Anytime"}))),g.a.createElement("div",{className:"padding-top"},g.a.createElement("input",{id:"timelimit",type:"radio",name:"limit",value:A.e.ALLOW_EDIT_POST_TIME_LIMIT,checked:a.state.postEditTimeLimit!==A.e.UNSET_POST_EDIT_TIME_LIMIT,onChange:a.handleOptionChange}),g.a.createElement("label",{htmlFor:"timelimit"},g.a.createElement(O.c,{id:"edit_post.time_limit_modal.option_label_time_limit.preinput",defaultMessage:"Can edit for"})),g.a.createElement("input",{type:"number",className:"form-control inline",min:"0",step:"1",max:zl,id:"editPostTimeLimit",readOnly:a.state.postEditTimeLimit===A.e.UNSET_POST_EDIT_TIME_LIMIT,onChange:a.handleSecondsChange,value:a.state.postEditTimeLimit===A.e.UNSET_POST_EDIT_TIME_LIMIT?"":a.state.postEditTimeLimit}),g.a.createElement("label",{htmlFor:"timelimit"},g.a.createElement(O.c,{id:"edit_post.time_limit_modal.option_label_time_limit.postinput",defaultMessage:"seconds after posting"}))),g.a.createElement("div",{className:"padding-top x2 light"},g.a.createElement(O.c,{id:"edit_post.time_limit_modal.subscript",defaultMessage:"Set the length of time users have to edit their messages after posting."})))),g.a.createElement(Do.a.Footer,null,g.a.createElement("div",{className:"edit-post-time-limit-modal__error"},a.state.errorMessage),g.a.createElement("button",{type:"button",className:"btn btn-cancel",onClick:a.props.onClose},g.a.createElement(O.c,{id:"confirm_modal.cancel",defaultMessage:"Cancel"})),g.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-default",onClick:a.save,disabled:a.state.saving},g.a.createElement(O.c,{id:a.state.saving?Object(vt.b)("save_button.saving"):Object(vt.b)("edit_post.time_limit_modal.save_button"),defaultMessage:"Save Edit Time"}))))}),a.state={postEditTimeLimit:parseInt(e.config.ServiceSettings.PostEditTimeLimit,10),saving:!1,errorMessage:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bl(e,t)}(t,g.a.Component),function(e,t,a){t&&Il(e.prototype,t),a&&Il(e,a)}(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getConfig()}}]),t}();ql(Gl,"propTypes",{config:b.a.object.isRequired,show:b.a.bool,onClose:b.a.func.isRequired,actions:b.a.shape({updateConfig:b.a.func.isRequired,getConfig:b.a.func.isRequired}).isRequired});var Yl=Object(n.connect)(function(e){return{config:o.getConfig(e)}},function(e){return{actions:Object(i.bindActionCreators)({updateConfig:r.updateConfig,getConfig:r.getConfig},e)}})(Gl);function Vl(e){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hl(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wl(e){return(Wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ql=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kl(Jl(Jl(a=function(e,t){return!t||"object"!==Vl(t)&&"function"!=typeof t?Jl(e):t}(this,Wl(t).call(this,e)))),"updateGroups",function(){var e=a.props,t=e.config,n=e.scope,i=a.groups[a.groups.length-1];"true"!==t.EnableIncomingWebhooks&&"true"!==t.EnableOutgoingWebhooks||-1!==i.permissions.indexOf("manage_webhooks")||i.permissions.push("manage_webhooks"),"true"===t.EnableOAuthServiceProvider&&-1===i.permissions.indexOf("manage_oauth")&&i.permissions.push("manage_oauth"),"true"===t.EnableCommands&&-1===i.permissions.indexOf("manage_slash_commands")&&i.permissions.push("manage_slash_commands"),"true"===t.EnableCustomEmoji&&-1===i.permissions.indexOf("manage_emojis")&&i.permissions.push("manage_emojis"),"team_scope"===n&&"teams_team_scope"!==a.groups[0].id&&(a.groups[0].id="teams_team_scope")}),Kl(Jl(Jl(a)),"openPostTimeLimitModal",function(){a.setState({editTimeLimitModalIsVisible:!0})}),Kl(Jl(Jl(a)),"closePostTimeLimitModal",function(){a.setState({editTimeLimitModalIsVisible:!1})}),Kl(Jl(Jl(a)),"toggleGroup",function(e){a.props.readOnly||a.props.onToggle(a.props.role.name,e)}),Kl(Jl(Jl(a)),"render",function(){return g.a.createElement("div",{className:"permissions-tree"},g.a.createElement("div",{className:"permissions-tree--header"},g.a.createElement("div",{className:"permission-name"},g.a.createElement(O.c,{id:"admin.permissions.permissionsTree.permission",defaultMessage:"Permission"})),g.a.createElement("div",{className:"permission-description"},g.a.createElement(O.c,{id:"admin.permissions.permissionsTree.description",defaultMessage:"Description"}))),g.a.createElement("div",{className:"permissions-tree--body"},g.a.createElement(jl,{key:"all",id:"all",uniqId:a.props.role.name,selected:a.props.selected,selectRow:a.props.selectRow,readOnly:a.props.readOnly,permissions:a.groups,additionalValues:a.ADDITIONAL_VALUES,role:a.props.role,parentRole:a.props.parentRole,scope:a.props.scope,combined:!1,onChange:a.toggleGroup,root:!0})),g.a.createElement(Yl,{onClose:a.closePostTimeLimitModal,show:a.state.editTimeLimitModalIsVisible}))}),a.state={editTimeLimitModalIsVisible:!1},a.ADDITIONAL_VALUES={edit_post:{editTimeLimitButton:g.a.createElement(Rl,{onClick:a.openPostTimeLimitModal})}},a.groups=[{id:"teams",permissions:[{id:"send_invites",combined:!0,permissions:["invite_user","get_public_link","add_user_to_team"]},"create_team"]},{id:"public_channel",permissions:["create_public_channel","manage_public_channel_properties","manage_public_channel_members","delete_public_channel"]},{id:"private_channel",permissions:["create_private_channel","manage_private_channel_properties","manage_private_channel_members","delete_private_channel"]},{id:"posts",permissions:[{id:"edit_posts",permissions:["edit_post","edit_others_posts"]},{id:"delete_posts",permissions:["delete_post","delete_others_posts"]},{id:"reactions",combined:!0,permissions:["add_reaction","remove_reaction"]}]},{id:"integrations",permissions:[]}],a.updateGroups(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(t,g.a.Component),function(e,t,a){t&&Hl(e.prototype,t),a&&Hl(e,a)}(t,[{key:"componentDidUpdate",value:function(e){this.props.config!==e.config&&this.updateGroups()}}]),t}();Kl(Ql,"propTypes",{scope:b.a.string.isRequired,config:b.a.object.isRequired,role:b.a.object.isRequired,onToggle:b.a.func.isRequired,parentRole:b.a.object,selected:b.a.string,selectRow:b.a.func.isRequired,readOnly:b.a.bool}),Kl(Ql,"defaultProps",{role:{permissions:[]}});var Zl=Object(n.connect)(function(e){return{config:Object(c.getConfig)(e)}})(Ql);function $l(e){return($l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tc(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ac(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function nc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){lc(e,t,a[t])})}return e}function ic(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rc(e){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sc(e,t){return(sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var cc=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lc(oc(oc(a=function(e,t){return!t||"object"!==$l(t)&&"function"!=typeof t?oc(e):t}(this,rc(t).call(this,e)))),"goToSelectedRow",function(){var e=document.querySelector(".permission-row.selected,.permission-group-row.selected");return!!e&&(a.state.openRoles.all_users?e.scrollIntoView({behavior:"smooth",block:"center"}):(a.toggleRole("all_users"),setTimeout(function(){e.scrollIntoView({behavior:"smooth",block:"center"})},300)),!0)}),lc(oc(oc(a)),"selectRow",function(e){a.setState({selectedPermission:e}),setTimeout(a.goToSelectedRow),setTimeout(function(){a.setState({selectedPermission:null})},3e3)}),lc(oc(oc(a)),"deriveRolesFromAllUsers",function(e){return{system_user:nc({},a.props.roles.system_user,{permissions:e.permissions.filter(function(e){return"system_scope"===A.o[e]})}),team_user:nc({},a.props.roles.team_user,{permissions:e.permissions.filter(function(e){return"team_scope"===A.o[e]})}),channel_user:nc({},a.props.roles.channel_user,{permissions:e.permissions.filter(function(e){return"channel_scope"===A.o[e]})})}}),lc(oc(oc(a)),"handleSubmit",function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){ac(r,n,i,s,o,"next",e)}function o(e){ac(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,i,r,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.actions.editRole(a.state.roles.team_admin),n=a.props.actions.editRole(a.state.roles.channel_admin),i=a.deriveRolesFromAllUsers(a.state.roles.all_users),r=a.props.actions.editRole(i.system_user),s=a.props.actions.editRole(i.team_user),o=a.props.actions.editRole(i.channel_user),a.setState({saving:!0}),Promise.all([t,n,r,s,o]).then(function(e){var t=null,n=!1,i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.error){t=c.error.message,n=!0;break}}}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}a.setState({serverError:t,saving:!1,saveNeeded:n}),a.props.actions.setNavigationBlocked(n)});case 8:case"end":return e.stop()}},e,this)}))),lc(oc(oc(a)),"toggleRole",function(e){var t=nc({},a.state.openRoles);t[e]=!t[e],a.setState({openRoles:t})}),lc(oc(oc(a)),"togglePermission",function(e,t){var n=nc({},a.state.roles),i=nc({},n[e]),r=tc(i.permissions),s=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var m=c.value;-1===r.indexOf(m)?r.push(m):r.splice(r.indexOf(m),1)}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}i.permissions=r,n[e]=i,a.setState({roles:n,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),lc(oc(oc(a)),"resetDefaults",function(){var e=JSON.parse(JSON.stringify(nc({},a.state.roles)));Object.entries(A.f).forEach(function(t){var a=ec(t,2),n=a[0],i=a[1];e[n].permissions=i}),a.setState({roles:e,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),lc(oc(oc(a)),"render",function(){var e="true"===a.props.license.CustomPermissionsSchemes;return a.state.loaded?g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header "+(e?"with-back":"")},e&&g.a.createElement(Si,{to:"/admin_console/permissions/schemes",className:"fa fa-chevron-left back"}),g.a.createElement(O.c,{id:"admin.permissions.systemScheme",defaultMessage:"System Scheme"})),g.a.createElement("div",{className:"banner info"},g.a.createElement("div",{className:"banner__content"},g.a.createElement("span",null,g.a.createElement(j.a,{id:"admin.permissions.systemScheme.introBanner",defaultMessage:"Configure the default permissions for Team Admins, Channel Admins and other members. This scheme is inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied in specific teams."})))),g.a.createElement("div",{className:"permissions-block "+(a.state.openRoles.all_users?"":"closed"),id:"all_users"},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("all_users")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.allMembersTitle",defaultMessage:"All Members"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.allMembersDescription",defaultMessage:"Permissions granted to all members, including administrators and newly created users."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{selected:a.state.selectedPermission,role:a.state.roles.all_users,scope:"system_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"permissions-block "+(a.state.openRoles.channel_admin?"":"closed")},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("channel_admin")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.channelAdminsTitle",defaultMessage:"Channel Administrators"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.channelAdminsDescription",defaultMessage:"Permissions granted to channel creators and any users promoted to Channel Administrator."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{parentRole:a.state.roles.all_users,role:a.state.roles.channel_admin,scope:"channel_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"permissions-block "+(a.state.openRoles.team_admin?"":"closed")},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("team_admin")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.teamAdminsTitle",defaultMessage:"Team Administrators"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.teamAdminsDescription",defaultMessage:"Permissions granted to team creators and any users promoted to Team Administrator."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{parentRole:a.state.roles.all_users,role:a.state.roles.team_admin,scope:"team_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"permissions-block "+(a.state.openRoles.system_admin?"":"closed")},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("system_admin")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.systemAdminsTitle",defaultMessage:"System Administrators"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.systemAdminsDescription",defaultMessage:"Full permissions granted to System Administrators."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{readOnly:!0,role:a.state.roles.system_admin,scope:"system_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"admin-console-save"},g.a.createElement(k.a,{saving:a.state.saving,disabled:!a.state.saveNeeded||a.canSave&&!a.canSave(),onClick:a.handleSubmit,savingMessage:Object(P.localizeMessage)("admin.saving","Saving Config...")}),g.a.createElement(Si,{className:"cancel-button",to:"/admin_console/permissions/schemes"},g.a.createElement(O.c,{id:"admin.permissions.permissionSchemes.cancel",defaultMessage:"Cancel"})),g.a.createElement("a",{onClick:function(){return a.setState({showResetDefaultModal:!0})},className:"cancel-button reset-defaults-btn"},g.a.createElement(O.c,{id:"admin.permissions.systemScheme.resetDefaultsButton",defaultMessage:"Reset to Defaults"})),g.a.createElement("div",{className:"error-message"},g.a.createElement(C.a,{error:a.state.serverError}))),g.a.createElement(Do.a,{dialogClassName:"admin-modal",show:a.state.showResetDefaultModal,onHide:function(){return a.setState({showResetDefaultModal:!1})}},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement("h4",{className:"modal-title"},g.a.createElement(O.c,{id:"admin.permissions.systemScheme.resetDefaultsButtonModalTitle",defaultMessage:"Reset to Default?"}))),g.a.createElement(Do.a.Body,null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.resetDefaultsButtonModalBody",defaultMessage:"This will reset all selections on this page to their default settings. Are you sure you want to reset?"})),g.a.createElement(Do.a.Footer,null,g.a.createElement("button",{type:"button",className:"btn btn-cancel",onClick:function(){return a.setState({showResetDefaultModal:!1})}},g.a.createElement(O.c,{id:"confirm_modal.cancel",defaultMessage:"Cancel"})),g.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-default",onClick:function(){a.resetDefaults(),a.setState({showResetDefaultModal:!1})}},g.a.createElement(O.c,{id:"admin.permissions.systemScheme.resetDefaultsConfirmationButton",defaultMessage:"Yes, Reset"}))))):g.a.createElement(ee.a,null)}),a.state={showResetDefaultModal:!1,loaded:!1,saving:!1,saveNeeded:!1,serverError:null,roles:{},openRoles:{all_users:!0,system_admin:!0,team_admin:!0,channel_admin:!0}},a.rolesNeeded=["system_admin","system_user","team_admin","team_user","channel_admin","channel_user"],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(t,g.a.Component),function(e,t,a){t&&ic(e.prototype,t),a&&ic(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadRolesIfNeeded(this.rolesNeeded),this.rolesNeeded.every(function(t){return e.props.roles[t]})&&this.loadRolesIntoState(this.props)}},{key:"componentWillReceiveProps",value:function(e){!this.state.loaded&&this.rolesNeeded.every(function(t){return e.roles[t]})&&this.loadRolesIntoState(e)}},{key:"loadRolesIntoState",value:function(e){var t=e.roles,a=t.system_admin,n=t.team_admin,i=t.channel_admin,r=t.system_user,s=t.team_user,o=t.channel_user;this.setState({selectedPermission:null,loaded:!0,roles:{system_admin:a,team_admin:n,channel_admin:i,all_users:{name:"all_users",displayName:"All members",permissions:r.permissions.concat(s.permissions).concat(o.permissions)}}})}}]),t}();lc(cc,"propTypes",{roles:b.a.object.isRequired,license:b.a.object.isRequired,actions:b.a.shape({loadRolesIfNeeded:b.a.func.isRequired,editRole:b.a.func.isRequired,setNavigationBlocked:b.a.func.isRequired}).isRequired});var uc=Object(n.connect)(function(e){return{roles:Object(u.getRoles)(e),rolesRequest:e.requests.roles.getRolesByNames}},function(e){return{actions:Object(i.bindActionCreators)({loadRolesIfNeeded:s.loadRolesIfNeeded,editRole:s.editRole,setNavigationBlocked:d.B},e)}})(cc),mc=(a(147),a(139),a(136),a(673)),dc=a(762);function pc(e){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fc(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bc(e,t){return!t||"object"!==pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hc(e){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gc(e,t){return(gc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bc(this,hc(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gc(e,t)}(t,g.a.Component),function(e,t,a){t&&fc(e.prototype,t),a&&fc(e,a)}(t,[{key:"render",value:function(){var e=this.props.team,t=Object(P.imageURLForTeam)(e),a=null;return a=t?g.a.createElement("div",{className:"team-btn__image",style:{backgroundImage:"url('".concat(t,"')")}}):g.a.createElement("div",{className:"team-btn__initials"},e.display_name?e.display_name.replace(/\s/g,"").substring(0,2):"??"),g.a.createElement("div",{className:"team-info-block"},g.a.createElement("span",{className:"icon"},a),g.a.createElement("div",{className:"team-data"},g.a.createElement("div",{className:"title"},e.display_name)))}}]),t}();function vc(e){return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ec(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function _c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sc(e){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(yc,"propTypes",{team:b.a.object.isRequired});var Pc=50,jc=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wc(Oc(Oc(a=function(e,t){return!t||"object"!==vc(t)&&"function"!=typeof t?Oc(e):t}(this,Sc(t).call(this,e)))),"handleHide",function(){a.props.actions.setModalSearchTerm(""),a.setState({show:!1})}),wc(Oc(Oc(a)),"handleExit",function(){a.props.onModalDismissed&&a.props.onModalDismissed()}),wc(Oc(Oc(a)),"handleSubmit",function(e){e&&e.preventDefault(),0!==a.state.values.length&&(a.props.onTeamsSelected(a.state.values),a.handleHide())}),wc(Oc(Oc(a)),"addValue",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e.scheme_id||""===e.scheme_id||t){var n=Object.assign([],a.state.values),i=n.map(function(e){return e.id});e&&e.id&&-1===i.indexOf(e.id)&&n.push(e),a.setState({values:n,confirmAddModal:!1,confirmAddTeam:null})}else a.setState({confirmAddModal:!0,confirmAddTeam:e})}),wc(Oc(Oc(a)),"setTeamsLoadingState",function(e){a.setState({loadingTeams:e})}),wc(Oc(Oc(a)),"handlePageChange",function(e,t){e>t&&(a.setTeamsLoadingState(!0),a.props.actions.loadTeams(e+1,Pc).then(function(){a.setTeamsLoadingState(!1)}))}),wc(Oc(Oc(a)),"handleDelete",function(e){a.setState({values:e})}),wc(Oc(Oc(a)),"search",function(e){a.props.actions.setModalSearchTerm(e)}),a.searchTimeoutId=0,a.state={values:[],show:!0,search:!1,loadingTeams:!0,confirmAddModal:!1,confirmAddTeam:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(t,g.a.Component),function(e,t,a){t&&_c(e.prototype,t),a&&_c(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadTeams(0,2*Pc).then(function(){e.setTeamsLoadingState(!1)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var a=e.searchTerm;if(""===a)return;this.searchTimeoutId=setTimeout(function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Ec(r,n,i,s,o,"next",e)}function o(e){Ec(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setTeamsLoadingState(!0),e.next=3,t.props.actions.searchTeams(a);case 3:t.setTeamsLoadingState(!1);case 4:case"end":return e.stop()}},e,this)})),A.D.SEARCH_TIMEOUT_MILLISECONDS)}}},{key:"renderOption",value:function(e,t,a){var n="";return t&&(n="more-modal__row--selected"),g.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+n,onClick:function(){return a(e)}},g.a.createElement("div",{className:"more-modal__details"},g.a.createElement(yc,{team:e})),g.a.createElement("div",{className:"more-modal__actions"},g.a.createElement("div",{className:"more-modal__actions--round"},g.a.createElement("i",{className:"fa fa-plus"}))))}},{key:"renderValue",value:function(e){return e.data.display_name}},{key:"renderConfirmModal",value:function(e,t){var a=this,n=g.a.createElement(O.c,{id:"add_teams_to_scheme.confirmation.title",defaultMessage:"Team Override Scheme Change?"}),i=g.a.createElement(O.c,{id:"add_teams_to_scheme.confirmation.message",defaultMessage:"This team is already selected in another team scheme, are you sure you want to move it to this team scheme?"}),r=g.a.createElement(O.c,{id:"add_teams_to_scheme.confirmation.accept",defaultMessage:"Yes, Move Team"});return g.a.createElement(Ie.a,{show:e,title:n,message:i,confirmButtonText:r,onCancel:function(){return a.setState({confirmAddModal:!1,confirmAddTeam:null})},onConfirm:function(){return a.addValue(t,!0)}})}},{key:"render",value:function(){var e=this,t=this.renderConfirmModal(this.state.confirmAddModal,this.state.confirmAddTeam),a=g.a.createElement(O.c,{id:"multiselect.selectTeams",defaultMessage:"Use â†‘â†“ to browse, â†µ to select."}),n=Object(P.localizeMessage)("multiselect.add","Add"),i=[];return this.props.teams&&(i=(i=(i=this.props.teams.filter(function(e){return 0===e.delete_at})).filter(function(t){return t.scheme_id!==e.currentSchemeId})).filter(function(t){return-1===e.props.alreadySelected.indexOf(t.id)})).sort(function(e,t){var a=e.display_name.toUpperCase(),n=t.display_name.toUpperCase();return a===n?0:a>n?1:-1}),g.a.createElement(Do.a,{dialogClassName:"more-modal more-direct-channels team-selector-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,g.a.createElement(j.a,{id:"add_teams_to_scheme.title",defaultMessage:"Add Teams To **Team Selection** List"}))),g.a.createElement(Do.a.Body,null,t,g.a.createElement(dc.a,{key:"addTeamsToSchemeKey",options:i,optionRenderer:this.renderOption,values:this.state.values,valueKey:"id",valueRenderer:this.renderValue,perPage:Pc,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,numRemainingText:a,buttonSubmitText:n,saving:!1,loading:this.state.loadingTeams})))}}]),t}();wc(jc,"propTypes",{currentSchemeId:b.a.string,alreadySelected:b.a.array,searchTerm:b.a.string.isRequired,teams:b.a.array.isRequired,onModalDismissed:b.a.func,onTeamsSelected:b.a.func,actions:b.a.shape({loadTeams:b.a.func.isRequired,setModalSearchTerm:b.a.func.isRequired,searchTeams:b.a.func.isRequired}).isRequired});var xc=Object(n.connect)(function(e){var t=e.views.search.modalSearch,a=Object.values(Object(li.getTeams)(e)||{}).filter(function(e){return e.display_name.toLowerCase().startsWith(t.toLowerCase())||e.description.toLowerCase().startsWith(t.toLowerCase())});return{searchTerm:t,teams:a}},function(e){return{actions:Object(i.bindActionCreators)({loadTeams:Rr.getTeams,setModalSearchTerm:mc.a,searchTeams:Rr.searchTeams},e)}})(jc);function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kc(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cc(e,t){return!t||"object"!==Mc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ac(e){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nc(e,t){return(Nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cc(this,Ac(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nc(e,t)}(t,g.a.Component),function(e,t,a){t&&kc(e.prototype,t),a&&kc(e,a)}(t,[{key:"render",value:function(){var e=this,t=this.props.team;return g.a.createElement("div",{className:"team",key:t.id},g.a.createElement(yc,{team:t}),g.a.createElement("a",{className:"remove",onClick:function(){return e.props.onRemoveTeam(t.id)}},g.a.createElement(O.c,{id:"admin.permissions.teamScheme.removeTeam",defaultMessage:"Remove"})))}}]),t}();!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Rc,"propTypes",{team:b.a.object.isRequired,onRemoveTeam:b.a.func});var Dc=Object(n.connect)(function(e){return{stats:Object(li.getTeamStats)(e)}},function(e){return{actions:Object(i.bindActionCreators)({loadTeamStats:Rr.getTeamStats},e)}})(Rc);function Lc(e){return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ic(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Uc(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Bc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Yc(e,t,a[t])})}return e}function Fc(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zc(e,t){return(zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Vc=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yc(Gc(Gc(a=function(e,t){return!t||"object"!==Lc(t)&&"function"!=typeof t?Gc(e):t}(this,qc(t).call(this,e)))),"isLoaded",function(e){return e.schemeId?!!(null!==e.scheme&&null!==e.teams&&e.roles[e.scheme.default_team_user_role]&&e.roles[e.scheme.default_team_admin_role]&&e.roles[e.scheme.default_channel_user_role]&&e.roles[e.scheme.default_channel_admin_role]):!!(e.roles.team_user&&e.roles.team_admin&&e.roles.channel_user&&e.roles.channel_admin)}),Yc(Gc(Gc(a)),"goToSelectedRow",function(){var e=document.querySelector(".permission-row.selected,.permission-group-row.selected");return!!e&&(a.state.openRoles.all_users?e.scrollIntoView({behavior:"smooth",block:"center"}):(a.toggleRole("all_users"),setTimeout(function(){e.scrollIntoView({behavior:"smooth",block:"center"})},300)),!0)}),Yc(Gc(Gc(a)),"selectRow",function(e){a.setState({selectedPermission:e}),setTimeout(a.goToSelectedRow),setTimeout(function(){a.setState({selectedPermission:null})},3e3)}),Yc(Gc(Gc(a)),"getStateRoles",function(){if(null!==a.state.roles)return a.state.roles;var e=null,t=null,n=null,i=null;if(a.props.schemeId)a.isLoaded(a.props)&&(e=a.props.roles[a.props.scheme.default_team_user_role],t=a.props.roles[a.props.scheme.default_team_admin_role],n=a.props.roles[a.props.scheme.default_channel_user_role],i=a.props.roles[a.props.scheme.default_channel_admin_role]);else{if(!a.isLoaded(a.props))return null;e=a.props.roles.team_user,t=a.props.roles.team_admin,n=a.props.roles.channel_user,i=a.props.roles.channel_admin}return{team_admin:t,channel_admin:i,all_users:{name:"all_users",displayName:"All members",permissions:e.permissions.concat(n.permissions)}}}),Yc(Gc(Gc(a)),"deriveRolesFromAllUsers",function(e,t,a){return{team_user:Bc({},e,{permissions:a.permissions.filter(function(e){return"team_scope"===A.o[e]})}),channel_user:Bc({},t,{permissions:a.permissions.filter(function(e){return"channel_scope"===A.o[e]})})}}),Yc(Gc(Gc(a)),"handleNameChange",function(e){a.setState({schemeName:e.target.value,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),Yc(Gc(Gc(a)),"handleDescriptionChange",function(e){a.setState({schemeDescription:e.target.value,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),Yc(Gc(Gc(a)),"handleSubmit",function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Uc(r,n,i,s,o,"next",e)}function o(e){Uc(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,i,r,s,o,l,c,u,m,d,p,f,b,h,g,y,v,E,_,S,T,O,w,P,j,x,M,k,C,A,N,R,D,L,I,U,B,F,q,z,G,Y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.getStateRoles(),n=t.team_admin,i=t.channel_admin,r=t.all_users,s=a.state.schemeName||a.props.scheme&&a.props.scheme.display_name||"",o=a.state.schemeDescription||a.props.scheme&&a.props.scheme.description||"",l=null,c=null,u=null,a.setState({saving:!0}),!a.props.schemeId){e.next=19;break}return m=a.deriveRolesFromAllUsers(a.props.roles[a.props.scheme.default_team_user_role],a.props.roles[a.props.scheme.default_channel_user_role],r),l=m.team_user,c=m.channel_user,e.next=16,a.props.actions.patchScheme(a.props.schemeId,{display_name:s,description:o});case 16:u=a.props.schemeId,e.next=37;break;case 19:return d=a.deriveRolesFromAllUsers(a.props.roles.team_user,a.props.roles.channel_user,r),l=d.team_user,c=d.channel_user,e.next=24,a.props.actions.createScheme({display_name:s,description:o,scope:"team"});case 24:if(!(p=e.sent).error){e.next=29;break}return a.setState({serverError:p.error.message,saving:!1,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0),e.abrupt("return");case 29:return f=p.data,u=f.id,e.next=33,a.props.actions.loadRolesIfNeeded([f.default_team_user_role,f.default_team_admin_role,f.default_channel_user_role,f.default_channel_admin_role]);case 33:l=Bc({},l,{id:a.props.roles[f.default_team_user_role].id}),n=Bc({},n,{id:a.props.roles[f.default_team_admin_role].id}),c=Bc({},c,{id:a.props.roles[f.default_channel_user_role].id}),i=Bc({},i,{id:a.props.roles[f.default_channel_admin_role].id});case 37:for(b=a.props.actions.editRole(n),h=a.props.actions.editRole(i),g=a.props.actions.editRole(l),y=a.props.actions.editRole(c),v=[],E=new Set((a.state.teams||a.props.teams||[]).map(function(e){return e.id})),_=new Set((a.props.teams||[]).map(function(e){return e.id})),S=new Set(Ic(E).filter(function(e){return!_.has(e)})),T=new Set(Ic(_).filter(function(e){return!E.has(e)})),O=!0,w=!1,P=void 0,e.prev=49,j=S[Symbol.iterator]();!(O=(x=j.next()).done);O=!0)M=x.value,v.push(a.props.actions.updateTeamScheme(M,u));e.next=57;break;case 53:e.prev=53,e.t0=e.catch(49),w=!0,P=e.t0;case 57:e.prev=57,e.prev=58,O||null==j.return||j.return();case 60:if(e.prev=60,!w){e.next=63;break}throw P;case 63:return e.finish(60);case 64:return e.finish(57);case 65:for(k=!0,C=!1,A=void 0,e.prev=68,N=T[Symbol.iterator]();!(k=(R=N.next()).done);k=!0)D=R.value,v.push(a.props.actions.updateTeamScheme(D,""));e.next=76;break;case 72:e.prev=72,e.t1=e.catch(68),C=!0,A=e.t1;case 76:e.prev=76,e.prev=77,k||null==N.return||N.return();case 79:if(e.prev=79,!C){e.next=82;break}throw A;case 82:return e.finish(79);case 83:return e.finish(76);case 84:return e.next=86,Promise.all([b,h,g,y].concat(v));case 86:L=e.sent,I=null,U=!1,B=!0,F=!1,q=void 0,e.prev=92,z=L[Symbol.iterator]();case 94:if(B=(G=z.next()).done){e.next=103;break}if(!(Y=G.value).error){e.next=100;break}return I=Y.error.message,U=!0,e.abrupt("break",103);case 100:B=!0,e.next=94;break;case 103:e.next=109;break;case 105:e.prev=105,e.t2=e.catch(92),F=!0,q=e.t2;case 109:e.prev=109,e.prev=110,B||null==z.return||z.return();case 112:if(e.prev=112,!F){e.next=115;break}throw q;case 115:return e.finish(112);case 116:return e.finish(109);case 117:a.setState({serverError:I,saving:!1,saveNeeded:U}),a.props.actions.setNavigationBlocked(U),a.props.history.push("/admin_console/permissions/schemes");case 120:case"end":return e.stop()}},e,this,[[49,53,57,65],[58,,60,64],[68,72,76,84],[77,,79,83],[92,105,109,117],[110,,112,116]])}))),Yc(Gc(Gc(a)),"toggleRole",function(e){var t=Bc({},a.state.openRoles);t[e]=!t[e],a.setState({openRoles:t})}),Yc(Gc(Gc(a)),"togglePermission",function(e,t){var n=Bc({},a.getStateRoles()),i=null;n.team_admin.name===e?i=Bc({},n.team_admin):n.channel_admin.name===e?i=Bc({},n.channel_admin):n.all_users.name===e&&(i=Bc({},n.all_users));var r=Ic(i.permissions),s=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var m=c.value;-1===r.indexOf(m)?r.push(m):r.splice(r.indexOf(m),1)}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}i.permissions=r,n.team_admin.name===e?n.team_admin=i:n.channel_admin.name===e?n.channel_admin=i:n.all_users.name===e&&(n.all_users=i),a.setState({roles:n,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),Yc(Gc(Gc(a)),"openAddTeam",function(){a.setState({addTeamOpen:!0})}),Yc(Gc(Gc(a)),"removeTeam",function(e){var t=(a.state.teams||a.props.teams).filter(function(t){return t.id!==e});a.setState({teams:t,saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),Yc(Gc(Gc(a)),"addTeams",function(e){var t=a.state.teams||a.props.teams||[];a.setState({teams:Ic(t).concat(Ic(e)),saveNeeded:!0}),a.props.actions.setNavigationBlocked(!0)}),Yc(Gc(Gc(a)),"closeAddTeam",function(){a.setState({addTeamOpen:!1})}),Yc(Gc(Gc(a)),"render",function(){if(!a.isLoaded(a.props))return g.a.createElement(ee.a,null);var e=a.getStateRoles(),t=a.state.teams||a.props.teams||[],n=a.state.schemeName||a.props.scheme&&a.props.scheme.display_name||"",i=a.state.schemeDescription||a.props.scheme&&a.props.scheme.description||"";return g.a.createElement("div",{className:"wrapper--fixed"},a.state.addTeamOpen&&g.a.createElement(xc,{onModalDismissed:a.closeAddTeam,onTeamsSelected:a.addTeams,currentSchemeId:a.props.schemeId,alreadySelected:t.map(function(e){return e.id})}),g.a.createElement("h3",{className:"admin-console-header with-back"},g.a.createElement(Si,{to:"/admin_console/permissions/schemes",className:"fa fa-chevron-left back"}),g.a.createElement(O.c,{id:"admin.permissions.teamScheme",defaultMessage:"Team Scheme"})),g.a.createElement("div",{className:"banner info"},g.a.createElement("div",{className:"banner__content"},g.a.createElement("span",null,g.a.createElement(j.a,{id:"admin.permissions.teamScheme.introBanner",defaultMessage:"[Team Override Schemes](!https://about.mattermost.com/default-team-override-scheme) set the permissions for Team Admins, Channel Admins and other members in specific teams. Use a Team Override Scheme when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme)."})))),g.a.createElement("div",{className:"permissions-block"},g.a.createElement("div",{className:"header"},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.teamScheme.schemeDetailsTitle",defaultMessage:"Scheme Details"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.teamScheme.schemeDetailsDescription",defaultMessage:"Set the name and description for this scheme."})))),g.a.createElement("div",{className:"team-scheme-details"},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label",htmlFor:"scheme-name"},g.a.createElement(O.c,{id:"admin.permissions.teamScheme.schemeNameLabel",defaultMessage:"Scheme Name:"})),g.a.createElement("input",{id:"scheme-name",className:"form-control",type:"text",value:n,placeholder:Object(P.localizeMessage)("admin.permissions.teamScheme.schemeNamePlaceholder","Scheme Name"),onChange:a.handleNameChange})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label",htmlFor:"scheme-description"},g.a.createElement(O.c,{id:"admin.permissions.teamScheme.schemeDescriptionLabel",defaultMessage:"Scheme Description:"})),g.a.createElement("textarea",{id:"scheme-description",className:"form-control",rows:"5",value:i,placeholder:Object(P.localizeMessage)("admin.permissions.teamScheme.schemeDescriptionPlaceholder","Scheme Description"),onChange:a.handleDescriptionChange})))),g.a.createElement("div",{className:"permissions-block"},g.a.createElement("div",{className:"header"},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.teamScheme.selectTeamsTitle",defaultMessage:"Select teams to override permissions"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.teamScheme.selectTeamsDescription",defaultMessage:"Select teams where permission exceptions are required."}))),g.a.createElement("div",{className:"button"},g.a.createElement("a",{className:"btn btn-primary",onClick:a.openAddTeam},g.a.createElement(O.c,{id:"admin.permissions.teamScheme.addTeams",defaultMessage:"Add Teams"})))),g.a.createElement("div",{className:"teams-list"},0===t.length&&g.a.createElement("div",{className:"no-team-schemes"},g.a.createElement(O.c,{id:"admin.permissions.teamScheme.noTeams",defaultMessage:"No team selected. Please add teams to this list."})),t.map(function(e){return g.a.createElement(Dc,{key:e.id,team:e,onRemoveTeam:a.removeTeam})}))),g.a.createElement("div",{className:"permissions-block all_users "+(a.state.openRoles.all_users?"":"closed"),id:"all_users"},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("all_users")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.allMembersTitle",defaultMessage:"All Members"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.allMembersDescription",defaultMessage:"Permissions granted to all members, including administrators and newly created users."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{selected:a.state.selectedPermission,role:e.all_users,scope:"team_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"permissions-block channel_admin "+(a.state.openRoles.channel_admin?"":"closed")},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("channel_admin")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.channelAdminsTitle",defaultMessage:"Channel Administrators"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.channelAdminsDescription",defaultMessage:"Permissions granted to channel creators and any users promoted to Channel Administrator."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{parentRole:e.all_users,role:e.channel_admin,scope:"channel_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"permissions-block team_admin "+(a.state.openRoles.team_admin?"":"closed")},g.a.createElement("div",{className:"header",onClick:function(){return a.toggleRole("team_admin")}},g.a.createElement("div",null,g.a.createElement("h3",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.teamAdminsTitle",defaultMessage:"Team Administrators"})),g.a.createElement("span",null,g.a.createElement(O.c,{id:"admin.permissions.systemScheme.teamAdminsDescription",defaultMessage:"Permissions granted to team creators and any users promoted to Team Administrator."}))),g.a.createElement("div",{className:"button"},g.a.createElement(qo,null))),g.a.createElement(Zl,{parentRole:e.all_users,role:e.team_admin,scope:"team_scope",onToggle:a.togglePermission,selectRow:a.selectRow})),g.a.createElement("div",{className:"admin-console-save"},g.a.createElement(k.a,{saving:a.state.saving,disabled:!a.state.saveNeeded||a.canSave&&!a.canSave(),onClick:a.handleSubmit,savingMessage:Object(P.localizeMessage)("admin.saving","Saving Config...")}),g.a.createElement(Si,{className:"cancel-button",to:"/admin_console/permissions/schemes"},g.a.createElement(O.c,{id:"admin.permissions.permissionSchemes.cancel",defaultMessage:"Cancel"})),g.a.createElement("div",{className:"error-message"},g.a.createElement(C.a,{error:a.state.serverError}))))}),a.state={saving:!1,saveNeeded:!1,serverError:null,roles:null,teams:null,addTeamOpen:!1,selectedPermission:null,openRoles:{all_users:!0,team_admin:!0,channel_admin:!0}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zc(e,t)}(t,g.a.Component),function(e,t,a){t&&Fc(e.prototype,t),a&&Fc(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadRolesIfNeeded(["team_admin","team_user","channel_admin","channel_user"]),this.props.schemeId&&(this.props.actions.loadScheme(this.props.schemeId).then(function(t){e.props.actions.loadRolesIfNeeded([t.data.default_team_user_role,t.data.default_team_admin_role,t.data.default_channel_user_role,t.data.default_channel_admin_role])}),this.props.actions.loadSchemeTeams(this.props.schemeId))}}]),t}();Yc(Vc,"propTypes",{schemeId:b.a.string,scheme:b.a.object,roles:b.a.object,teams:b.a.array,actions:b.a.shape({loadRolesIfNeeded:b.a.func.isRequired,loadScheme:b.a.func.isRequired,loadSchemeTeams:b.a.func.isRequired,editRole:b.a.func.isRequired,patchScheme:b.a.func.isRequired,createScheme:b.a.func.isRequired,updateTeamScheme:b.a.func.isRequired,setNavigationBlocked:b.a.func.isRequired}).isRequired}),Yc(Vc,"defaultProps",{scheme:null});var Hc=Object(n.connect)(function(){var e=Object(bo.makeGetSchemeTeams)();return function(t,a){var n=a.match.params.scheme_id;return{schemeId:n,scheme:n?Object(bo.getScheme)(t,n):null,teams:n?e(t,{schemeId:n}):null,roles:Object(u.getRoles)(t),rolesRequest:t.requests.roles.getRolesByNames}}},function(e){return{actions:Object(i.bindActionCreators)({loadRolesIfNeeded:s.loadRolesIfNeeded,loadScheme:fo.getScheme,loadSchemeTeams:fo.getSchemeTeams,editRole:s.editRole,patchScheme:fo.patchScheme,updateTeamScheme:Rr.updateTeamScheme,createScheme:fo.createScheme,setNavigationBlocked:d.B},e)}})(Vc),Wc=a(553),Xc=a(143);function Jc(e){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Qc(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zc(e){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $c(e,t){return($c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function au(e){var t=e.user&&e.user.roles?e.user.roles:"";return{error:null,hasPostAllRole:Xc.hasPostAllRole(t),hasPostAllPublicRole:Xc.hasPostAllPublicRole(t),hasUserAccessTokenRole:Xc.hasUserAccessTokenRole(t),isSystemAdmin:Xc.isSystemAdmin(t)}}var nu=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tu(eu(eu(a=function(e,t){return!t||"object"!==Jc(t)&&"function"!=typeof t?eu(e):t}(this,Zc(t).call(this,e)))),"handleError",function(e){a.setState({error:e})}),tu(eu(eu(a)),"handleSystemAdminChange",function(e){"systemadmin"===e.target.name?a.setState({isSystemAdmin:!0}):"systemmember"===e.target.name&&a.setState({isSystemAdmin:!1})}),tu(eu(eu(a)),"handleUserAccessTokenChange",function(e){a.setState({hasUserAccessTokenRole:e.target.checked})}),tu(eu(eu(a)),"handlePostAllChange",function(e){a.setState({hasPostAllRole:e.target.checked})}),tu(eu(eu(a)),"handlePostAllPublicChange",function(e){a.setState({hasPostAllPublicRole:e.target.checked})}),tu(eu(eu(a)),"trackRoleChanges",function(e,t){Xc.hasUserAccessTokenRole(e)&&!Xc.hasUserAccessTokenRole(t)?Object(Ms.d)("actions","add_roles",{role:Ir.General.SYSTEM_USER_ACCESS_TOKEN_ROLE}):!Xc.hasUserAccessTokenRole(e)&&Xc.hasUserAccessTokenRole(t)&&Object(Ms.d)("actions","remove_roles",{role:Ir.General.SYSTEM_USER_ACCESS_TOKEN_ROLE}),Xc.hasPostAllRole(e)&&!Xc.hasPostAllRole(t)?Object(Ms.d)("actions","add_roles",{role:Ir.General.SYSTEM_POST_ALL_ROLE}):!Xc.hasPostAllRole(e)&&Xc.hasPostAllRole(t)&&Object(Ms.d)("actions","remove_roles",{role:Ir.General.SYSTEM_POST_ALL_ROLE}),Xc.hasPostAllPublicRole(e)&&!Xc.hasPostAllPublicRole(t)?Object(Ms.d)("actions","add_roles",{role:Ir.General.SYSTEM_POST_ALL_PUBLIC_ROLE}):!Xc.hasPostAllPublicRole(e)&&Xc.hasPostAllPublicRole(t)&&Object(Ms.d)("actions","remove_roles",{role:Ir.General.SYSTEM_POST_ALL_PUBLIC_ROLE})}),tu(eu(eu(a)),"handleSave",function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Kc(r,n,i,s,o,"next",e)}function o(e){Kc(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({error:null}),t=Ir.General.SYSTEM_USER_ROLE,a.state.isSystemAdmin?t+=" "+Ir.General.SYSTEM_ADMIN_ROLE:a.state.hasUserAccessTokenRole&&(t+=" "+Ir.General.SYSTEM_USER_ACCESS_TOKEN_ROLE,a.state.hasPostAllRole?t+=" "+Ir.General.SYSTEM_POST_ALL_ROLE:a.state.hasPostAllPublicRole&&(t+=" "+Ir.General.SYSTEM_POST_ALL_PUBLIC_ROLE)),e.next=5,a.props.actions.updateUserRoles(a.props.user.id,t);case 5:n=e.sent,i=n.data,a.trackRoleChanges(t,a.props.user.roles),i?a.props.onModalDismissed():a.handleError(g.a.createElement(O.c,{id:"admin.manage_roles.saveError",defaultMessage:"Unable to save roles."}));case 9:case"end":return e.stop()}},e,this)}))),tu(eu(eu(a)),"renderContents",function(){var e=a.props.user;if(null==e)return g.a.createElement("div",null);var t,n,i=Xc.getFullName(e);return i?i+=" (@".concat(e.username,")"):i="@".concat(e.username),(a.state.hasUserAccessTokenRole||a.state.isSystemAdmin)&&(t=g.a.createElement("div",null,g.a.createElement("p",null,g.a.createElement(j.a,{id:"admin.manage_roles.additionalRoles",defaultMessage:"Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions)."})),g.a.createElement("div",{className:"checkbox"},g.a.createElement("label",null,g.a.createElement("input",{type:"checkbox",ref:"postall",checked:a.state.hasPostAllRole||a.state.isSystemAdmin,disabled:a.state.isSystemAdmin,onChange:a.handlePostAllChange}),g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.manage_roles.postAllRoleTitle",defaultMessage:"post:all"})),g.a.createElement(O.c,{id:"admin.manage_roles.postAllRole",defaultMessage:"Access to post to all Mattermost channels including direct messages."}))),g.a.createElement("div",{className:"checkbox"},g.a.createElement("label",null,g.a.createElement("input",{type:"checkbox",ref:"postallpublic",checked:a.state.hasPostAllPublicRole||a.state.hasPostAllRole||a.state.isSystemAdmin,disabled:a.state.hasPostAllRole||a.state.isSystemAdmin,onChange:a.handlePostAllPublicChange}),g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.manage_roles.postAllPublicRoleTitle",defaultMessage:"post:channels"})),g.a.createElement(O.c,{id:"admin.manage_roles.postAllPublicRole",defaultMessage:"Access to post to all Mattermost public channels."}))))),a.props.userAccessTokensEnabled&&(n=g.a.createElement("div",null,g.a.createElement("div",{className:"checkbox"},g.a.createElement("label",null,g.a.createElement("input",{type:"checkbox",ref:"postall",checked:a.state.hasUserAccessTokenRole||a.state.isSystemAdmin,disabled:a.state.isSystemAdmin,onChange:a.handleUserAccessTokenChange}),g.a.createElement(j.a,{id:"admin.manage_roles.allowUserAccessTokens",defaultMessage:"Allow this account to generate [personal access tokens](!https://about.mattermost.com/default-user-access-tokens)."}),g.a.createElement("span",{className:"d-block padding-top padding-bottom light"},g.a.createElement(O.b,{id:"admin.manage_roles.allowUserAccessTokensDesc",defaultMessage:"Removing this permission doesn't delete existing tokens. To delete them, go to the user's Manage Tokens menu."})))),g.a.createElement("div",{className:"member-row--padded"},t))),g.a.createElement("div",null,g.a.createElement("div",{className:"manage-teams__user"},g.a.createElement("img",{className:"manage-teams__profile-picture",src:w.Client4.getProfilePictureUrl(e.id,e.last_picture_update)}),g.a.createElement("div",{className:"manage-teams__info"},g.a.createElement("div",{className:"manage-teams__name"},i),g.a.createElement("div",{className:"manage-teams__email"},e.email))),g.a.createElement("div",null,g.a.createElement("div",{className:"manage-row--inner"},g.a.createElement("div",{className:"radio-inline"},g.a.createElement("label",null,g.a.createElement("input",{name:"systemadmin",type:"radio",checked:a.state.isSystemAdmin,onChange:a.handleSystemAdminChange}),g.a.createElement(O.c,{id:"admin.manage_roles.systemAdmin",defaultMessage:"System Admin"}))),g.a.createElement("div",{className:"radio-inline"},g.a.createElement("label",null,g.a.createElement("input",{name:"systemmember",type:"radio",checked:!a.state.isSystemAdmin,onChange:a.handleSystemAdminChange}),g.a.createElement(O.c,{id:"admin.manage_roles.systemMember",defaultMessage:"Member"})))),n))}),a.state=au(e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$c(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Qc(e.prototype,t),a&&Qc(e,a)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.user||{},a=e.user||{};t.id!==a.id&&this.setState(au(e))}},{key:"render",value:function(){return g.a.createElement(Do.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"manage-teams"},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,g.a.createElement(O.c,{id:"admin.manage_roles.manageRolesTitle",defaultMessage:"Manage Roles"}))),g.a.createElement(Do.a.Body,null,this.renderContents(),this.state.error),g.a.createElement(Do.a.Footer,null,g.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.props.onModalDismissed},g.a.createElement(O.c,{id:"admin.manage_roles.cancel",defaultMessage:"Cancel"})),g.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSave},g.a.createElement(O.c,{id:"admin.manage_roles.save",defaultMessage:"Save"}))))}}]),t}();tu(nu,"propTypes",{show:b.a.bool.isRequired,user:b.a.object,userAccessTokensEnabled:b.a.bool.isRequired,onModalDismissed:b.a.func.isRequired,actions:b.a.shape({updateUserRoles:b.a.func.isRequired}).isRequired});var iu=Object(n.connect)(function(e){return{userAccessTokensEnabled:e.entities.admin.config.ServiceSettings.EnableUserAccessTokens}},function(e){return{actions:Object(i.bindActionCreators)({updateUserRoles:Dr.updateUserRoles},e)}})(nu),ru=a(1059),su=a(708),ou=a(610);function lu(e){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cu(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function uu(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){cu(r,n,i,s,o,"next",e)}function o(e){cu(r,n,i,s,o,"throw",e)}s(void 0)})}}function mu(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var hu=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bu(fu(fu(a=function(e,t){return!t||"object"!==lu(t)&&"function"!=typeof t?fu(e):t}(this,du(t).call(this,e)))),"makeTeamAdmin",uu(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.updateTeamMemberSchemeRoles(a.props.teamMember.team_id,a.props.user.id,!0,!0);case 2:t=e.sent,(n=t.error)?a.props.onError(n.message):a.handleMemberChange();case 5:case"end":return e.stop()}},e,this)}))),bu(fu(fu(a)),"makeMember",uu(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.updateTeamMemberSchemeRoles(a.props.teamMember.team_id,a.props.user.id,!0,!1);case 2:t=e.sent,(n=t.error)?a.props.onError(n.message):a.handleMemberChange();case 5:case"end":return e.stop()}},e,this)}))),a.toggleDropdown=a.toggleDropdown.bind(fu(fu(a))),a.removeFromTeam=a.removeFromTeam.bind(fu(fu(a))),a.handleMemberChange=a.handleMemberChange.bind(fu(fu(a))),a.handleMemberRemove=a.handleMemberRemove.bind(fu(fu(a))),a.state={show:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(t,g.a.Component),function(e,t,a){t&&mu(e.prototype,t),a&&mu(e,a)}(t,[{key:"toggleDropdown",value:function(){this.setState(function(e){return{show:!e.show}})}},{key:"removeFromTeam",value:function(){Object(ou.e)(this.props.teamMember.team_id,this.props.user.id,this.handleMemberRemove,this.props.onError)}},{key:"handleMemberChange",value:function(){this.props.onMemberChange(this.props.teamMember.team_id)}},{key:"handleMemberRemove",value:function(){this.props.onMemberRemove(this.props.teamMember.team_id)}},{key:"render",value:function(){var e,t=P.isAdmin(this.props.teamMember.roles)||this.props.teamMember.scheme_admin;e=t?P.localizeMessage("admin.user_item.teamAdmin","Team Admin"):P.localizeMessage("admin.user_item.teamMember","Team Member");var a=null;t||(a=g.a.createElement(ru.a,{id:"makeTeamAdmin",onSelect:this.makeTeamAdmin},g.a.createElement(O.c,{id:"admin.user_item.makeTeamAdmin",defaultMessage:"Make Team Admin"})));var n=null;return t&&(n=g.a.createElement(ru.a,{id:"makeMember",onSelect:this.makeMember},g.a.createElement(O.c,{id:"admin.user_item.makeMember",defaultMessage:"Make Member"}))),g.a.createElement(su.a,{id:"manage-teams-".concat(this.props.user.id,"-").concat(this.props.teamMember.team_id),open:this.state.show,onToggle:this.toggleDropdown},g.a.createElement(su.a.Toggle,{useAnchor:!0},e),g.a.createElement(su.a.Menu,null,a,n,g.a.createElement(ru.a,{id:"removeFromTeam",onSelect:this.removeFromTeam},g.a.createElement(O.c,{id:"team_members_dropdown.leave_team",defaultMessage:"Remove from Team"}))))}}]),t}();function gu(e){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yu(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vu(e){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}bu(hu,"propTypes",{user:b.a.object.isRequired,teamMember:b.a.object.isRequired,onError:b.a.func.isRequired,onMemberChange:b.a.func.isRequired,onMemberRemove:b.a.func.isRequired,updateTeamMemberSchemeRoles:b.a.func.isRequired});var Su=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==gu(t)&&"function"!=typeof t?_u(e):t}(this,vu(t).call(this,e))).handleClick=a.handleClick.bind(_u(_u(a))),a.handleMemberRemove=a.handleMemberRemove.bind(_u(_u(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&yu(e.prototype,t),a&&yu(e,a)}(t,[{key:"handleClick",value:function(e){e.preventDefault(),Object(ou.e)(this.props.team.id,this.props.user.id,this.handleMemberRemove,this.props.onError)}},{key:"handleMemberRemove",value:function(){this.props.onMemberRemove(this.props.team.id)}},{key:"render",value:function(){return g.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClick},g.a.createElement(O.c,{id:"team_members_dropdown.leave_team",defaultMessage:"Remove from Team"}))}}]),t}();function Tu(e){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function wu(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Ou(r,n,i,s,o,"next",e)}function o(e){Ou(r,n,i,s,o,"throw",e)}s(void 0)})}}function Pu(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ju(e){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xu(e,t){return(xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ku(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Su,"propTypes",{onError:b.a.func.isRequired,onMemberRemove:b.a.func.isRequired,team:b.a.object.isRequired,user:b.a.object.isRequired});var Cu=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ku(Mu(Mu(a=function(e,t){return!t||"object"!==Tu(t)&&"function"!=typeof t?Mu(e):t}(this,ju(t).call(this,e)))),"loadTeamsAndTeamMembers",wu(regeneratorRuntime.mark(function e(){var t,n,i,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:a.props.user,a.getTeamMembers(t.id),e.next=4,a.props.actions.getTeamsForUser(t.id);case 4:n=e.sent,i=n.data,a.setState({teams:Object(di.a)(i,a.props.locale)});case 7:case"end":return e.stop()}},e,this)}))),ku(Mu(Mu(a)),"handleError",function(e){a.setState({error:e})}),ku(Mu(Mu(a)),"getTeamMembers",wu(regeneratorRuntime.mark(function e(){var t,n,i,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:a.props.user.id,e.next=3,a.props.actions.getTeamMembersForUser(t);case 3:n=e.sent,(i=n.data)&&a.setState({teamMembers:i});case 6:case"end":return e.stop()}},e,this)}))),ku(Mu(Mu(a)),"handleMemberRemove",function(e){a.setState({teams:a.state.teams.filter(function(t){return t.id!==e}),teamMembers:a.state.teamMembers.filter(function(t){return t.team_id!==e})})}),ku(Mu(Mu(a)),"renderContents",function(){var e=a.props.user,t=a.state,n=t.teams,i=t.teamMembers;if(!e)return g.a.createElement(ee.a,null);var r,s=P.isAdmin(e.roles),o=P.getFullName(e);o?o+=" (@".concat(e.username,")"):o="@".concat(e.username),r=n&&i?n.map(function(t){var n,r=i.find(function(e){return e.team_id===t.id});return r?(n=s?g.a.createElement(Su,{user:e,team:t,onError:a.handleError,onMemberRemove:a.handleMemberRemove}):g.a.createElement(hu,{user:e,team:t,teamMember:r,onError:a.handleError,onMemberChange:a.getTeamMembers,onMemberRemove:a.handleMemberRemove,updateTeamMemberSchemeRoles:a.props.actions.updateTeamMemberSchemeRoles}),g.a.createElement("div",{key:t.id,className:"manage-teams__team"},g.a.createElement("div",{className:"manage-teams__team-name"},t.display_name),g.a.createElement("div",{className:"manage-teams__team-actions"},n))):null}):g.a.createElement(ee.a,null);var l=null;return s&&(l=g.a.createElement("div",{className:"manage-teams__system-admin"},g.a.createElement(O.c,{id:"admin.user_item.sysAdmin",defaultMessage:"System Admin"}))),g.a.createElement("div",null,g.a.createElement("div",{className:"manage-teams__user"},g.a.createElement("img",{className:"manage-teams__profile-picture",src:w.Client4.getProfilePictureUrl(e.id,e.last_picture_update)}),g.a.createElement("div",{className:"manage-teams__info"},g.a.createElement("div",{className:"manage-teams__name"},o),g.a.createElement("div",{className:"manage-teams__email"},e.email)),l),g.a.createElement("div",{className:"manage-teams__teams"},r))}),a.state={error:null,teams:null,teamMembers:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xu(e,t)}(t,g.a.Component),function(e,t,a){t&&Pu(e.prototype,t),a&&Pu(e,a)}(t,[{key:"componentDidMount",value:function(){this.props.user&&this.loadTeamsAndTeamMembers()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(this.props.user?this.props.user.id:"")!==(e.user?e.user.id:"")&&(this.setState({teams:null,teamMembers:null}),e.user&&this.loadTeamsAndTeamMembers(e.user))}},{key:"render",value:function(){return g.a.createElement(Do.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"manage-teams"},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,g.a.createElement(O.c,{id:"admin.user_item.manageTeams",defaultMessage:"Manage Teams"}))),g.a.createElement(Do.a.Body,null,this.renderContents()))}}]),t}();ku(Cu,"propTypes",{locale:b.a.string.isRequired,onModalDismissed:b.a.func.isRequired,show:b.a.bool.isRequired,user:b.a.object,actions:b.a.shape({getTeamMembersForUser:b.a.func.isRequired,getTeamsForUser:b.a.func.isRequired,updateTeamMemberSchemeRoles:b.a.func.isRequired}).isRequired});var Au=Object(n.connect)(function(e){return{locale:Object(ci.a)(e)}},function(e){return{actions:Object(i.bindActionCreators)({getTeamMembersForUser:Rr.getTeamMembersForUser,getTeamsForUser:Rr.getTeamsForUser,updateTeamMemberSchemeRoles:Rr.updateTeamMemberSchemeRoles},e)}})(Cu);function Nu(e){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ru(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Du(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lu(e){return(Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iu(e,t){return(Iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Fu=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Bu(Uu(Uu(a=function(e,t){return!t||"object"!==Nu(t)&&"function"!=typeof t?Uu(e):t}(this,(e=Lu(t)).call.apply(e,[this].concat(i))))),"handleClick",function(){var e=function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Ru(r,n,i,s,o,"next",e)}function o(e){Ru(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.props.actions.revokeUserAccessToken(a.props.tokenId);case 3:n=e.sent,i=n.error,Object(Ms.d)("system_console","revoke_user_access_token"),i&&a.props.onError(i.message);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iu(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Du(e.prototype,t),a&&Du(e,a)}(t,[{key:"render",value:function(){return g.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClick},g.a.createElement(O.c,{id:"admin.revoke_token_button.delete",defaultMessage:"Delete"}))}}]),t}();Bu(Fu,"propTypes",{tokenId:b.a.string.isRequired,onError:b.a.func.isRequired,actions:b.a.shape({revokeUserAccessToken:b.a.func.isRequired}).isRequired});var qu=Object(n.connect)(null,function(e){return{actions:Object(i.bindActionCreators)({revokeUserAccessToken:Dr.revokeUserAccessToken},e)}})(Fu);function zu(e){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gu(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yu(e){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vu(e,t){return(Vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Xu=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wu(Hu(Hu(a=function(e,t){return!t||"object"!==zu(t)&&"function"!=typeof t?Hu(e):t}(this,Yu(t).call(this,e)))),"handleError",function(e){a.setState({error:e})}),Wu(Hu(Hu(a)),"renderContents",function(){var e=a.props,t=e.user,n=e.userAccessTokens;if(!t)return g.a.createElement(ee.a,null);var i,r=Xc.getFullName(t);if(r?r+=" (@".concat(t.username,")"):r="@".concat(t.username),n){var s=Object.values(n);i=0===s.length?g.a.createElement("div",{className:"manage-row__empty"},g.a.createElement(O.c,{id:"admin.manage_tokens.userAccessTokensNone",defaultMessage:"No personal access tokens."})):s.map(function(e){return g.a.createElement("div",{key:e.id,className:"manage-teams__team"},g.a.createElement("div",{className:"manage-teams__team-name"},g.a.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},g.a.createElement(O.c,{id:"admin.manage_tokens.userAccessTokensNameLabel",defaultMessage:"Token Description: "}),e.description),g.a.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},g.a.createElement(O.c,{id:"admin.manage_tokens.userAccessTokensIdLabel",defaultMessage:"Token ID: "}),e.id)),g.a.createElement("div",{className:"manage-teams__team-actions"},g.a.createElement(qu,{tokenId:e.id,onError:a.handleError})))})}else i=g.a.createElement(ee.a,null);return g.a.createElement("div",null,g.a.createElement("div",{className:"manage-teams__user"},g.a.createElement("img",{className:"manage-teams__profile-picture",src:w.Client4.getProfilePictureUrl(t.id,t.last_picture_update)}),g.a.createElement("div",{className:"manage-teams__info"},g.a.createElement("div",{className:"manage-teams__name"},r),g.a.createElement("div",{className:"manage-teams__email"},t.email))),g.a.createElement("div",{className:"padding-top x2"},g.a.createElement(j.a,{id:"admin.manage_tokens.userAccessTokensDescription",defaultMessage:"Personal access tokens function similarly to session tokens and can be used by integrations to [interact with this Mattermost server](!https://about.mattermost.com/default-api-authentication). Tokens are disabled if the user is deactivated. Learn more about [personal access tokens](!https://about.mattermost.com/default-user-access-tokens)."})),g.a.createElement("div",{className:"manage-teams__teams"},i))}),a.state={error:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vu(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&Gu(e.prototype,t),a&&Gu(e,a)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.user?this.props.user.id:null,a=e.user?e.user.id:null;a&&a!==t&&this.props.actions.getUserAccessTokensForUser(a,0,200)}},{key:"render",value:function(){return g.a.createElement(Do.a,{show:this.props.show,onHide:this.props.onModalDismissed,dialogClassName:"manage-teams"},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,g.a.createElement(O.c,{id:"admin.manage_tokens.manageTokensTitle",defaultMessage:"Manage Personal Access Tokens"}))),g.a.createElement(Do.a.Body,null,this.renderContents(),this.state.error))}}]),t}();Wu(Xu,"propTypes",{show:b.a.bool.isRequired,user:b.a.object,userAccessTokens:b.a.object,onModalDismissed:b.a.func.isRequired,actions:b.a.shape({getUserAccessTokensForUser:b.a.func.isRequired}).isRequired});var Ju=Object(n.connect)(function(e,t){var a=t.user?t.user.id:"";return{userAccessTokens:e.entities.admin.userAccessTokensByUser[a]}},function(e){return{actions:Object(i.bindActionCreators)({getUserAccessTokensForUser:Dr.getUserAccessTokensForUser},e)}})(Xu);function Ku(e){return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qu(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zu(e){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $u(e,t){return($u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function em(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var am=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Ku(t)&&"function"!=typeof t?em(e):t}(this,Zu(t).call(this,e))).doSubmit=a.doSubmit.bind(em(em(a))),a.doCancel=a.doCancel.bind(em(em(a))),a.state={serverErrorNewPass:null,serverErrorCurrentPass:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$u(e,t)}(t,g.a.Component),function(e,t,a){t&&Qu(e.prototype,t),a&&Qu(e,a)}(t,[{key:"componentWillUnmount",value:function(){this.setState({serverErrorNewPass:null,serverErrorCurrentPass:null})}},{key:"doSubmit",value:function(e){var t=this;e.preventDefault();var a="";if(this.refs.currentPassword&&""===(a=this.refs.currentPassword.value)){var n;return n=g.a.createElement(O.c,{id:"admin.reset_password.missing_current",defaultMessage:"Please enter your current password."}),void this.setState({serverErrorCurrentPass:n})}var i=this.refs.password.value,r=P.isValidPassword(i,this.props.passwordConfig),s=r.valid,o=r.error;s||!o?(this.setState({serverErrorNewPass:null}),Object(d.c)(this.props.user.id,a,i,function(){t.props.onModalSubmit(t.props.user)},function(e){t.setState({serverErrorCurrentPass:e.message})})):this.setState({serverErrorNewPass:o})}},{key:"doCancel",value:function(){this.setState({serverErrorNewPass:null,serverErrorCurrentPass:null}),this.props.onModalDismissed()}},{key:"render",value:function(){var e=this.props.user;if(null==e)return g.a.createElement("div",null);var t,a="input-group input-group--limit",n=null;this.state.serverErrorNewPass&&(a+=" has-error",n=g.a.createElement("div",{className:"has-error"},g.a.createElement("p",{className:"input__help error"},this.state.serverErrorNewPass))),t=e.auth_service?g.a.createElement(O.c,{id:"admin.reset_password.titleSwitch",defaultMessage:"Switch Account to Email/Password"}):g.a.createElement(O.c,{id:"admin.reset_password.titleReset",defaultMessage:"Reset Password"});var i=null,r=null,s=!0;if(this.props.currentUserId===e.id){s=!1;var o="input-group input-group--limit";this.state.serverErrorCurrentPass&&(o+=" has-error",r=g.a.createElement("div",{className:"has-error"},g.a.createElement("p",{className:"input__help error"},this.state.serverErrorCurrentPass))),i=g.a.createElement("div",{className:"col-sm-10 password__group-addon-space"},g.a.createElement("div",{className:o},g.a.createElement("span",{"data-toggle":"tooltip",title:"Current Password",className:"input-group-addon password__group-addon"},g.a.createElement(O.c,{id:"admin.reset_password.curentPassword",defaultMessage:"Current Password"})),g.a.createElement("input",{type:"password",ref:"currentPassword",className:"form-control",maxLength:"22",autoFocus:!0,tabIndex:"1"})))}return g.a.createElement(Do.a,{show:this.props.show,onHide:this.doCancel},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,t)),g.a.createElement("form",{role:"form",className:"form-horizontal"},g.a.createElement(Do.a.Body,null,g.a.createElement("div",{className:"form-group"},i,g.a.createElement("div",{className:"col-sm-10"},g.a.createElement("div",{className:a},g.a.createElement("span",{"data-toggle":"tooltip",title:"New Password",className:"input-group-addon password__group-addon"},g.a.createElement(O.c,{id:"admin.reset_password.newPassword",defaultMessage:"New Password"})),g.a.createElement("input",{type:"password",ref:"password",className:"form-control",maxLength:"22",autoFocus:s,tabIndex:"1"})),n,r))),g.a.createElement(Do.a.Footer,null,g.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},g.a.createElement(O.c,{id:"admin.reset_password.cancel",defaultMessage:"Cancel"})),g.a.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},g.a.createElement(O.c,{id:"admin.reset_password.reset",defaultMessage:"Reset"})))))}}]),t}();tm(am,"propTypes",{user:b.a.object,currentUserId:b.a.string.isRequired,show:b.a.bool.isRequired,onModalSubmit:b.a.func,onModalDismissed:b.a.func,passwordConfig:b.a.object}),tm(am,"defaultProps",{show:!1});var nm=Object(n.connect)(function(e){var t=Object(c.getConfig)(e);return{currentUserId:Object(m.getCurrentUserId)(e),passwordConfig:Object(P.getPasswordConfig)(t)}})(am),im=a(76);function rm(e){return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function om(e){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lm(e,t){return(lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function um(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var mm=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),um(cm(cm(a=function(e,t){return!t||"object"!==rm(t)&&"function"!=typeof t?cm(e):t}(this,om(t).call(this,e)))),"doSubmit",function(e){if(e.preventDefault(),a.refs.email){var t=a.refs.email.value;if(!Object(im.isEmail)(t)){var n=g.a.createElement(O.c,{id:"user.settings.general.validEmail",defaultMessage:"Please enter a valid email address."});return void a.setState({error:n})}}var i=Object.assign({},a.props.user),r=a.refs.email.value.trim().toLowerCase();i.email=r,a.setState({error:null}),Object(d.a)(i,function(){a.props.onModalSubmit(a.props.user)},function(e){var t=e.message?e.message:e;a.setState({error:t})})}),um(cm(cm(a)),"doCancel",function(){a.setState({error:null}),a.props.onModalDismissed()}),a.state={error:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lm(e,t)}(t,g.a.Component),function(e,t,a){t&&sm(e.prototype,t),a&&sm(e,a)}(t,[{key:"render",value:function(){if(!this.props.user)return g.a.createElement("div",null);var e="input-group input-group--limit",t=null;this.state.error&&(e+=" has-error",t=g.a.createElement("div",{className:"has-error"},g.a.createElement("p",{className:"input__help error"},this.state.error)));var a=g.a.createElement(O.c,{id:"admin.reset_email.titleReset",defaultMessage:"Update Email"});return g.a.createElement(Do.a,{show:this.props.show,onHide:this.doCancel},g.a.createElement(Do.a.Header,{closeButton:!0},g.a.createElement(Do.a.Title,null,a)),g.a.createElement("form",{role:"form",className:"form-horizontal"},g.a.createElement(Do.a.Body,null,g.a.createElement("div",{className:"form-group"},g.a.createElement("div",{className:"col-sm-10"},g.a.createElement("div",{className:e},g.a.createElement("span",{"data-toggle":"tooltip",title:"New Email",className:"input-group-addon email__group-addon"},g.a.createElement(O.c,{id:"admin.reset_email.newEmail",defaultMessage:"New Email"})),g.a.createElement("input",{type:"email",ref:"email",className:"form-control",maxLength:"128",autoFocus:!0,tabIndex:"1"})),t))),g.a.createElement(Do.a.Footer,null,g.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},g.a.createElement(O.c,{id:"admin.reset_email.cancel",defaultMessage:"Cancel"})),g.a.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},g.a.createElement(O.c,{id:"admin.reset_email.reset",defaultMessage:"Reset"})))))}}]),t}();um(mm,"propTypes",{user:b.a.object,show:b.a.bool.isRequired,onModalSubmit:b.a.func,onModalDismissed:b.a.func,passwordConfig:b.a.object}),um(mm,"defaultProps",{show:!1});var dm=a(1168),pm=a(635);function fm(e){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bm(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hm(e){return(hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gm(e,t){return(gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Em=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==fm(t)&&"function"!=typeof t?ym(e):t}(this,hm(t).call(this,e))).state={},a.onError=a.onError.bind(ym(ym(a))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gm(e,t)}(t,g.a.Component),function(e,t,a){t&&bm(e.prototype,t),a&&bm(e,a)}(t,[{key:"onError",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this,t=null;this.props.actions&&(t=this.props.actions.map(function(t,a){return g.a.createElement(t,Object.assign({key:a.toString(),user:e.props.user},e.props.actionProps,e.props.actionUserProps,{onError:e.onError}))}));var a,n=this.props.user.email,i="more-modal__description";this.props.extraInfo&&this.props.extraInfo.length>0?(n=g.a.createElement(j.a,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),i=""):a=this.props.user.status?this.props.user.status:this.props.status;var r=null,s=null;this.props.userCount>=0&&(r=P.createSafeId("userListRowName"+this.props.userCount),s=P.createSafeId("userListRowEmail"+this.props.userCount));var o=null;return this.state.error&&(o=g.a.createElement("div",{className:"has-error"},g.a.createElement("label",{className:"has-error control-label"},this.state.error.message))),g.a.createElement("div",{key:this.props.user.id,className:"more-modal__row"},g.a.createElement(pm.a,{src:w.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:a,width:"32",height:"32"}),g.a.createElement("div",{className:"more-modal__right"},g.a.createElement("div",{className:"more-modal__top"},g.a.createElement("div",{className:"more-modal__details"},g.a.createElement("div",{id:r,className:"more-modal__name"},P.displayEntireNameForUser(this.props.user)),g.a.createElement("div",{id:s,className:i},n),this.props.extraInfo),g.a.createElement("div",{className:"more-modal__actions"},t)),g.a.createElement("div",{className:"more-modal__bottom"},o)))}}]),t}();vm(Em,"propTypes",{user:b.a.object.isRequired,status:b.a.string,extraInfo:b.a.arrayOf(b.a.object),actions:b.a.arrayOf(b.a.func),actionProps:b.a.object,actionUserProps:b.a.object,userCount:b.a.number}),vm(Em,"defaultProps",{extraInfo:[],actions:[],actionProps:{},actionUserProps:{}});var _m=Object(n.connect)(function(e,t){var a=t.user||{};return{status:Object(m.getStatusForUserId)(e,a.id)}})(Em),Sm=a(640);function Tm(e){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Om(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wm(e){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pm(e,t){return(Pm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Mm=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xm(jm(jm(a=function(e,t){return!t||"object"!==Tm(t)&&"function"!=typeof t?jm(e):t}(this,wm(t).call(this,e)))),"handleMakeActive",function(e){e.preventDefault(),Object(Wc.G)(a.props.user.id,!0,null,a.props.onError)}),xm(jm(jm(a)),"handleManageTeams",function(e){e.preventDefault(),a.props.doManageTeams(a.props.user)}),xm(jm(jm(a)),"handleManageRoles",function(e){e.preventDefault(),a.props.doManageRoles(a.props.user)}),xm(jm(jm(a)),"handleManageTokens",function(e){e.preventDefault(),a.props.doManageTokens(a.props.user)}),xm(jm(jm(a)),"handleResetPassword",function(e){e.preventDefault(),a.props.doPasswordReset(a.props.user)}),xm(jm(jm(a)),"handleResetEmail",function(e){e.preventDefault(),a.props.doEmailReset(a.props.user)}),xm(jm(jm(a)),"handleResetMfa",function(e){e.preventDefault(),Object(d.b)(a.props.user.id,null,a.props.onError)}),xm(jm(jm(a)),"handleDemoteSystemAdmin",function(e,t){a.setState({showDemoteModal:!0,user:e,role:t})}),xm(jm(jm(a)),"handleDemoteCancel",function(){a.setState({showDemoteModal:!1,user:null,role:null}),a.props.onError(null)}),xm(jm(jm(a)),"handleDemoteSubmit",function(){"member"===a.state.role&&a.doMakeMember();var e=a.props.teamUrl;e?fi.a.push(e+"/channels/".concat(A.e.DEFAULT_CHANNEL)):fi.a.push("/")}),xm(jm(jm(a)),"handleShowDeactivateMemberModal",function(e){e.preventDefault(),a.setState({showDeactivateMemberModal:!0})}),xm(jm(jm(a)),"handleDeactivateMember",function(){Object(Wc.G)(a.props.user.id,!1,null,a.props.onError),a.setState({showDeactivateMemberModal:!1})}),xm(jm(jm(a)),"handleDeactivateCancel",function(){a.setState({showDeactivateMemberModal:!1})}),xm(jm(jm(a)),"renderDeactivateMemberModal",function(){var e,t=a.props.user,n=g.a.createElement(O.c,{id:"deactivate_member_modal.title",defaultMessage:"Deactivate {username}",values:{username:a.props.user.username}});""!==t.auth_service&&t.auth_service!==A.e.EMAIL_SERVICE&&(e=g.a.createElement("strong",null,g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement(O.c,{id:"deactivate_member_modal.sso_warning",defaultMessage:"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync."})));var i=g.a.createElement("div",null,g.a.createElement(O.c,{id:"deactivate_member_modal.desc",defaultMessage:"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system. Are you sure you want to deactivate {username}?",values:{username:t.username}}),e),r=g.a.createElement(O.c,{id:"deactivate_member_modal.deactivate",defaultMessage:"Deactivate"});return g.a.createElement(Ie.a,{show:a.state.showDeactivateMemberModal,title:n,message:i,confirmButtonClass:"btn btn-danger",confirmButtonText:r,onConfirm:a.handleDeactivateMember,onCancel:a.handleDeactivateCancel})}),xm(jm(jm(a)),"handleShowRevokeSessionsModal",function(e){e.preventDefault(),a.setState({showRevokeSessionsModal:!0})}),xm(jm(jm(a)),"handleRevokeSessions",function(){var e=a.props.currentUser;Object(Wc.z)(a.props.user.id,function(){a.props.user.id===e.id&&Object(T.p)()},a.props.onError),a.setState({showRevokeSessionsModal:!1})}),xm(jm(jm(a)),"handleRevokeSessionsCancel",function(){a.setState({showRevokeSessionsModal:!1})}),xm(jm(jm(a)),"renderRevokeSessionsModal",function(){var e=g.a.createElement(O.c,{id:"revoke_user_sessions_modal.title",defaultMessage:"Revoke Sessions for {username}",values:{username:a.props.user.username}}),t=g.a.createElement(O.c,{id:"revoke_user_sessions_modal.desc",defaultMessage:"This action revokes all sessions for {username}. They will be logged out from all devices. Are you sure you want to revoke all sessions for {username}?",values:{username:a.props.user.username}}),n=g.a.createElement(O.c,{id:"revoke_user_sessions_modal.revoke",defaultMessage:"Revoke"});return g.a.createElement(Ie.a,{show:a.state.showRevokeSessionsModal,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:n,onConfirm:a.handleRevokeSessions,onCancel:a.handleRevokeSessionsCancel})}),xm(jm(jm(a)),"renderAccessToken",function(){if(!a.props.enableUserAccessTokens)return null;var e=a.props.user,t=Xc.hasPostAllRole(e.roles),n=Xc.hasPostAllPublicRole(e.roles),i=Xc.hasUserAccessTokenRole(e.roles),r=Xc.isSystemAdmin(e.roles),s="";return(i||r)&&(s=t?Object(vt.b)("admin.user_item.userAccessTokenPostAll"):n?Object(vt.b)("admin.user_item.userAccessTokenPostAllPublic"):Object(vt.b)("admin.user_item.userAccessTokenYes")),s?g.a.createElement("div",{className:"light margin-top half"},g.a.createElement(O.c,{key:"admin.user_item.userAccessToken",id:s})):null}),a.state={showDemoteModal:!1,showDeactivateMemberModal:!1,showRevokeSessionsModal:!1,user:null,role:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pm(e,t)}(t,g.a.Component),function(e,t,a){t&&Om(e.prototype,t),a&&Om(e,a)}(t,[{key:"render",value:function(){var e=this.props.user;if(!e)return g.a.createElement("div",null);var t=g.a.createElement(O.c,{id:"admin.user_item.member",defaultMessage:"Member"});e.roles.length>0&&P.isSystemAdmin(e.roles)&&(t=g.a.createElement(O.c,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"}));var a=this.props.currentUser,n=!1,i=!P.isSystemAdmin(e.roles),r=!0,s=!0,o=this.props.mfaEnabled&&e.mfa_active;e.delete_at>0&&(t=g.a.createElement(O.c,{id:"admin.user_item.inactive",defaultMessage:"Inactive"}),n=!0,i=!1,r=!1,s=!1);var l=!1;e.auth_service===A.e.LDAP_SERVICE&&(l=!0);var c="";l&&(c="disabled");var u=null;n&&(u=g.a.createElement("li",{role:"presentation",className:c},g.a.createElement("a",{id:"activate",role:"menuitem",href:"#",onClick:this.handleMakeActive},g.a.createElement(O.c,{id:"admin.user_item.makeActive",defaultMessage:"Activate"}))));var m=null;i&&(m=g.a.createElement("li",{role:"presentation",className:c},g.a.createElement("a",{id:"deactivate",role:"menuitem",href:"#",onClick:this.handleShowDeactivateMemberModal},g.a.createElement(O.c,{id:"admin.user_item.makeInactive",defaultMessage:"Deactivate"}))));var d=null;r&&(d=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"manageTeams",role:"menuitem",href:"#",onClick:this.handleManageTeams},g.a.createElement(O.c,{id:"admin.user_item.manageTeams",defaultMessage:"Manage Teams"}))));var p,f,b,h,y=null;o&&(y=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"removeMFA",role:"menuitem",href:"#",onClick:this.handleResetMfa},g.a.createElement(O.c,{id:"admin.user_item.resetMfa",defaultMessage:"Remove MFA"})))),e.auth_service?this.props.experimentalEnableAuthenticationTransfer&&(p=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"switchEmailPassword",role:"menuitem",href:"#",onClick:this.handleResetPassword},g.a.createElement(O.c,{id:"admin.user_item.switchToEmail",defaultMessage:"Switch to Email/Password"})))):p=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"resetPassword",role:"menuitem",href:"#",onClick:this.handleResetPassword},g.a.createElement(O.c,{id:"admin.user_item.resetPwd",defaultMessage:"Reset Password"}))),e.auth_service||(f=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"resetEmail",role:"menuitem",href:"#",onClick:this.handleResetEmail},g.a.createElement(O.c,{id:"admin.user_item.resetEmail",defaultMessage:"Update Email"})))),s&&(b=g.a.createElement(Sm.a,{permissions:[Ir.Permissions.REVOKE_USER_ACCESS_TOKEN]},g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"revokeSessions",role:"menuItem",href:"#",onClick:this.handleShowRevokeSessionsModal},g.a.createElement(O.c,{id:"admin.user_item.revokeSessions",defaultMessage:"Revoke Sessions"}))))),this.props.enableUserAccessTokens&&(h=g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"manageTokens",role:"menuitem",href:"#",onClick:this.handleManageTokens},g.a.createElement(O.c,{id:"admin.user_item.manageTokens",defaultMessage:"Manage Tokens"}))));var v=null;if(this.props.user.id===a.id){var E=g.a.createElement(O.c,{id:"admin.user_item.confirmDemoteRoleTitle",defaultMessage:"Confirm demotion from System Admin role"}),_=g.a.createElement("div",null,g.a.createElement(O.c,{id:"admin.user_item.confirmDemoteDescription",defaultMessage:"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you'll need to re-assign a System Admin by accessing the Mattermost server through a terminal and running the following command."}),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement(O.c,{id:"admin.user_item.confirmDemotionCmd",defaultMessage:"platform roles system_admin {username}",values:{username:a.username}})),S=g.a.createElement(O.c,{id:"admin.user_item.confirmDemotion",defaultMessage:"Confirm Demotion"});v=g.a.createElement(Ie.a,{show:this.state.showDemoteModal,title:E,message:_,confirmButtonText:S,onConfirm:this.handleDemoteSubmit,onCancel:this.handleDemoteCancel})}var T=this.renderDeactivateMemberModal(),w=this.renderRevokeSessionsModal();return g.a.createElement("div",{className:"dropdown member-drop text-right"},g.a.createElement("a",{id:"memberDropdown",href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},g.a.createElement("span",null,t," "),g.a.createElement("span",{className:"caret"})),this.renderAccessToken(),g.a.createElement("ul",{className:"dropdown-menu member-menu",role:"menu"},u,m,g.a.createElement("li",{role:"presentation"},g.a.createElement("a",{id:"manageRoles",role:"menuitem",href:"#",onClick:this.handleManageRoles},g.a.createElement(O.c,{id:"admin.user_item.manageRoles",defaultMessage:"Manage Roles"}))),d,h,y,p,f,b),v,T,w)}}]),t}();xm(Mm,"propTypes",{user:b.a.object.isRequired,mfaEnabled:b.a.bool.isRequired,enableUserAccessTokens:b.a.bool.isRequired,experimentalEnableAuthenticationTransfer:b.a.bool.isRequired,doPasswordReset:b.a.func.isRequired,doEmailReset:b.a.func.isRequired,doManageTeams:b.a.func.isRequired,doManageRoles:b.a.func.isRequired,doManageTokens:b.a.func.isRequired,onError:b.a.func.isRequired,currentUser:b.a.object.isRequired,teamUrl:b.a.string});var km=Object(n.connect)(function(e){return{currentUser:Object(m.getCurrentUser)(e),teamUrl:Object(li.getCurrentRelativeTeamUrl)(e)}})(Mm);function Cm(e){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Am(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nm(e){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rm(e,t){return(Rm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Im=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lm(Dm(Dm(a=function(e,t){return!t||"object"!==Cm(t)&&"function"!=typeof t?Dm(e):t}(this,Nm(t).call(this,e)))),"nextPage",function(){a.setState({page:a.state.page+1}),a.props.nextPage(a.state.page+1)}),Lm(Dm(Dm(a)),"previousPage",function(){a.setState({page:a.state.page-1})}),Lm(Dm(Dm(a)),"search",function(e){a.props.search(e),""!==e&&a.setState({page:0})}),Lm(Dm(Dm(a)),"doManageTeams",function(e){a.setState({showManageTeamsModal:!0,user:e})}),Lm(Dm(Dm(a)),"doManageRoles",function(e){a.setState({showManageRolesModal:!0,user:e})}),Lm(Dm(Dm(a)),"doManageTokens",function(e){a.setState({showManageTokensModal:!0,user:e})}),Lm(Dm(Dm(a)),"doManageTeamsDismiss",function(){a.setState({showManageTeamsModal:!1,user:null})}),Lm(Dm(Dm(a)),"doManageRolesDismiss",function(){a.setState({showManageRolesModal:!1,user:null})}),Lm(Dm(Dm(a)),"doManageTokensDismiss",function(){a.setState({showManageTokensModal:!1,user:null})}),Lm(Dm(Dm(a)),"doPasswordReset",function(e){a.setState({showPasswordModal:!0,user:e})}),Lm(Dm(Dm(a)),"doPasswordResetDismiss",function(){a.setState({showPasswordModal:!1,user:null})}),Lm(Dm(Dm(a)),"doPasswordResetSubmit",function(e){a.props.actions.getUser(e.id),a.setState({showPasswordModal:!1,user:null})}),Lm(Dm(Dm(a)),"doEmailReset",function(e){a.setState({showEmailModal:!0,user:e})}),Lm(Dm(Dm(a)),"doEmailResetDismiss",function(){a.setState({showEmailModal:!1,user:null})}),Lm(Dm(Dm(a)),"doEmailResetSubmit",function(e){a.props.actions.getUser(e.id),a.setState({showEmailModal:!1,user:null})}),a.state={page:0,showManageTeamsModal:!1,showManageRolesModal:!1,showManageTokensModal:!1,showPasswordModal:!1,showEmailModal:!1,user:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rm(e,t)}(t,g.a.Component),function(e,t,a){t&&Am(e.prototype,t),a&&Am(e,a)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.teamId!==this.props.teamId&&this.setState({page:0})}},{key:"getInfoForUser",value:function(e){var t,a=[];e.auth_service?(t=e.auth_service===A.e.LDAP_SERVICE||e.auth_service===A.e.SAML_SERVICE?e.auth_service.toUpperCase():P.toTitleCase(e.auth_service),a.push(g.a.createElement(j.a,{key:"admin.user_item.authServiceNotEmail",id:"admin.user_item.authServiceNotEmail",defaultMessage:"**Sign-in Method:** {service}",values:{service:t}}))):a.push(g.a.createElement(j.a,{key:"admin.user_item.authServiceEmail",id:"admin.user_item.authServiceEmail",defaultMessage:"**Sign-in Method:** Email"}));return this.props.mfaEnabled&&(a.push(", "),e.mfa_active?a.push(g.a.createElement(j.a,{key:"admin.user_item.mfaYes",id:"admin.user_item.mfaYes",defaultMessage:"**MFA**: Yes"})):a.push(g.a.createElement(j.a,{key:"admin.user_item.mfaNo",id:"admin.user_item.mfaNo",defaultMessage:"**MFA**: No"}))),a}},{key:"renderCount",value:function(e,t,a,n,i){return t?i?g.a.createElement(O.c,{id:"system_users_list.countSearch",defaultMessage:"{count, number} {count, plural, one {user} other {users}} of {total, number} total",values:{count:e,total:t}}):0!==a||n!==t?g.a.createElement(O.c,{id:"system_users_list.countPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {user} other {users}} of {total, number} total",values:{count:e,startCount:a+1,endCount:n,total:t}}):g.a.createElement(O.c,{id:"system_users_list.count",defaultMessage:"{count, number} {count, plural, one {user} other {users}}",values:{count:e}}):null}},{key:"render",value:function(){var e={};if(this.props.users){var t=!0,a=!1,n=void 0;try{for(var i,r=this.props.users[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;e[s.id]=this.getInfoForUser(s)}}catch(e){a=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}}return g.a.createElement("div",null,g.a.createElement(dm.a,Object.assign({},this.props,{renderCount:this.renderCount,extraInfo:e,actions:[km],actionProps:{mfaEnabled:this.props.mfaEnabled,enableUserAccessTokens:this.props.enableUserAccessTokens,experimentalEnableAuthenticationTransfer:this.props.experimentalEnableAuthenticationTransfer,doPasswordReset:this.doPasswordReset,doEmailReset:this.doEmailReset,doManageTeams:this.doManageTeams,doManageRoles:this.doManageRoles,doManageTokens:this.doManageTokens},nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.props.term,onTermChange:this.props.onTermChange,rowComponentType:_m})),g.a.createElement(Au,{user:this.state.user,show:this.state.showManageTeamsModal,onModalDismissed:this.doManageTeamsDismiss}),g.a.createElement(iu,{user:this.state.user,show:this.state.showManageRolesModal,onModalDismissed:this.doManageRolesDismiss}),g.a.createElement(Ju,{user:this.state.user,show:this.state.showManageTokensModal,onModalDismissed:this.doManageTokensDismiss}),g.a.createElement(nm,{user:this.state.user,show:this.state.showPasswordModal,onModalSubmit:this.doPasswordResetSubmit,onModalDismissed:this.doPasswordResetDismiss}),g.a.createElement(mm,{user:this.state.user,show:this.state.showEmailModal,onModalSubmit:this.doEmailResetSubmit,onModalDismissed:this.doEmailResetDismiss}))}}]),t}();Lm(Im,"propTypes",{users:b.a.arrayOf(b.a.object),usersPerPage:b.a.number,total:b.a.number,nextPage:b.a.func,search:b.a.func.isRequired,focusOnMount:b.a.bool,renderFilterRow:b.a.func,teamId:b.a.string.isRequired,term:b.a.string.isRequired,onTermChange:b.a.func.isRequired,mfaEnabled:b.a.bool.isRequired,enableUserAccessTokens:b.a.bool.isRequired,experimentalEnableAuthenticationTransfer:b.a.bool.isRequired,actions:b.a.shape({getUser:b.a.func.isRequired}).isRequired});var Um="",Bm="no_team",Fm=26;var qm=Object(n.connect)(function(e,t){return{users:function(e,t,a,n){if(t)return[];if(n){var i=[];if(0===(i=a?Object(m.searchProfilesInTeam)(e,a,n):Object(m.searchProfiles)(e,n)).length&&n.length===Fm){var r=Object(m.getUser)(e,n);r&&(i=[r])}return i}return a===Um?Object(m.getProfiles)(e):a===Bm?Object(m.getProfilesWithoutTeam)(e):Object(m.getProfilesInTeam)(e,a)}(e,t.loading,t.teamId,t.term)}},function(e){return{actions:Object(i.bindActionCreators)({getUser:Dr.getUser},e)}})(Im);function zm(e){return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gm(e,t,a,n,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function Ym(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vm(e){return(Vm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hm(e,t){return(Hm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Jm=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xm(Wm(Wm(a=function(e,t){return!t||"object"!==zm(t)&&"function"!=typeof t?Wm(e):t}(this,Vm(t).call(this,e)))),"getUserByTokenOrId",function(){var e=function(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function s(e){Gm(r,n,i,s,o,"next",e)}function o(e){Gm(r,n,i,s,o,"throw",e)}s(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.enableUserAccessTokens){e.next=9;break}return e.next=3,a.props.actions.getUserAccessToken(t);case 3:if(n=e.sent,!(i=n.data)){e.next=9;break}return a.setState({term:i.user_id}),a.getUserById(i.user_id),e.abrupt("return");case 9:a.getUserById(t);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),a.loadDataForTeam=a.loadDataForTeam.bind(Wm(Wm(a))),a.loadComplete=a.loadComplete.bind(Wm(Wm(a))),a.handleTeamChange=a.handleTeamChange.bind(Wm(Wm(a))),a.handleTermChange=a.handleTermChange.bind(Wm(Wm(a))),a.nextPage=a.nextPage.bind(Wm(Wm(a))),a.doSearch=a.doSearch.bind(Wm(Wm(a))),a.search=a.search.bind(Wm(Wm(a))),a.getUserById=a.getUserById.bind(Wm(Wm(a))),a.renderFilterRow=a.renderFilterRow.bind(Wm(Wm(a))),a.state={loading:!0,searching:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hm(e,t)}(t,g.a.Component),function(e,t,a){t&&Ym(e.prototype,t),a&&Ym(e,a)}(t,[{key:"componentDidMount",value:function(){this.loadDataForTeam(this.props.teamId),this.props.actions.getTeams(0,1e3).then(T.u)}},{key:"componentWillUnmount",value:function(){this.props.actions.setSystemUsersSearch("","")}},{key:"loadDataForTeam",value:function(e){this.props.searchTerm?this.search(this.props.searchTerm,e):e===A.t.ALL_USERS?(Object(Wc.p)(0,A.e.PROFILE_CHUNK_SIZE,this.loadComplete),Object(d.p)()):e===A.t.NO_TEAM?Object(Wc.t)(0,A.e.PROFILE_CHUNK_SIZE,this.loadComplete):(Object(Wc.q)(0,A.e.PROFILE_CHUNK_SIZE,e,this.loadComplete),this.props.actions.getTeamStats(e))}},{key:"loadComplete",value:function(){this.setState({loading:!1})}},{key:"handleTeamChange",value:function(e){var t=e.target.value;this.loadDataForTeam(t),this.props.actions.setSystemUsersSearch(this.props.searchTerm,t)}},{key:"handleTermChange",value:function(e){this.props.actions.setSystemUsersSearch(e,this.props.teamId)}},{key:"nextPage",value:function(e){this.props.teamId===A.t.ALL_USERS?Object(Wc.p)(e+1,50,this.loadComplete):this.props.teamId===A.t.NO_TEAM?Object(Wc.t)(e+1,50,this.loadComplete):Object(Wc.q)(e+1,50,this.props.teamId,this.loadComplete)}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.teamId;if(""===e)return this.setState({loading:!1}),void(this.searchTimeoutId="");this.doSearch(t,e)}},{key:"doSearch",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];clearTimeout(this.searchTimeoutId),this.setState({loading:!0});var i=Xm({},A.A.ALLOW_INACTIVE,!0);e===A.t.NO_TEAM&&(i[A.A.WITHOUT_TEAM]=!0),this.searchTimeoutId=setTimeout(function(){Object(Wc.D)(t,e,i,function(e){0===e.length&&26===t.length?a.getUserByTokenOrId(t):a.setState({loading:!1})},function(){a.setState({loading:!1})})},n?0:A.e.SEARCH_TIMEOUT_MILLISECONDS)}},{key:"getUserById",value:function(e){var t=this;this.props.users[e]?this.setState({loading:!1}):this.props.actions.getUser(e).then(function(){t.setState({loading:!1})})}},{key:"renderFilterRow",value:function(e){var t=this.props.teams.map(function(e){return g.a.createElement("option",{key:e.id,value:e.id},e.display_name)});return g.a.createElement("div",{className:"system-users__filter-row"},g.a.createElement("div",{className:"system-users__filter"},g.a.createElement("input",{id:"searchUsers",ref:"filter",className:"form-control filter-textbox",placeholder:P.localizeMessage("filtered_user_list.search","Search users"),onInput:e})),g.a.createElement("label",null,g.a.createElement("span",{className:"system-users__team-filter-label"},g.a.createElement(O.c,{id:"filtered_user_list.show",defaultMessage:"Filter:"})),g.a.createElement("select",{className:"form-control system-users__team-filter",onChange:this.handleTeamChange,value:this.props.teamId},g.a.createElement("option",{value:A.t.ALL_USERS},P.localizeMessage("admin.system_users.allUsers","All Users")),g.a.createElement("option",{value:A.t.NO_TEAM},P.localizeMessage("admin.system_users.noTeams","No Teams")),t)))}},{key:"render",value:function(){return g.a.createElement("div",{className:"wrapper--fixed"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.system_users.title",defaultMessage:"{siteName} Users",values:{siteName:this.props.siteName}})),g.a.createElement("div",{className:"more-modal__list member-list-holder"},g.a.createElement(qm,{loading:this.state.loading,renderFilterRow:this.renderFilterRow,search:this.search,nextPage:this.nextPage,usersPerPage:50,total:this.props.totalUsers,teams:this.props.teams,teamId:this.props.teamId,term:this.props.searchTerm,onTermChange:this.handleTermChange,mfaEnabled:this.props.mfaEnabled,enableUserAccessTokens:this.props.enableUserAccessTokens,experimentalEnableAuthenticationTransfer:this.props.experimentalEnableAuthenticationTransfer})))}}]),t}();function Km(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Xm(Jm,"propTypes",{teams:b.a.arrayOf(b.a.object).isRequired,siteName:b.a.string,mfaEnabled:b.a.bool.isRequired,enableUserAccessTokens:b.a.bool.isRequired,experimentalEnableAuthenticationTransfer:b.a.bool.isRequired,totalUsers:b.a.number.isRequired,searchTerm:b.a.string.isRequired,teamId:b.a.string.isRequired,users:b.a.object.isRequired,actions:b.a.shape({getTeams:b.a.func.isRequired,getTeamStats:b.a.func.isRequired,getUser:b.a.func.isRequired,getUserAccessToken:b.a.func.isRequired,setSystemUsersSearch:b.a.func.isRequired}).isRequired});var Qm=Object(n.connect)(function(e){var t=Object(c.getLicense)(e),a=Object(c.getConfig)(e),n=a.SiteName,i=t&&"true"===t.IsLicensed&&"true"===t.MFA&&"true"===a.EnableMultifactorAuthentication,r="true"===a.EnableUserAccessTokens,s="true"===a.ExperimentalEnableAuthenticationTransfer,o=e.views.search.systemUsersSearch,l=0,u="",d="";if(o)if(u=o.term||"",(d=o.team||"")&&d!==A.t.ALL_USERS)l=d===A.t.NO_TEAM?0:(e.entities.teams.stats[d]||{total_member_count:0}).total_member_count;else{var p,f=e.entities.admin.analytics||(Km(p={},Ir.Stats.TOTAL_USERS,0),Km(p,Ir.Stats.TOTAL_INACTIVE_USERS,0),p);l=f[Ir.Stats.TOTAL_USERS]+f[Ir.Stats.TOTAL_INACTIVE_USERS]}return{teams:Object(li.getTeamsList)(e),siteName:n,mfaEnabled:i,totalUsers:l,searchTerm:u,teamId:d,enableUserAccessTokens:r,users:Object(m.getUsers)(e),experimentalEnableAuthenticationTransfer:s}},function(e){return{actions:Object(i.bindActionCreators)({getTeams:Rr.getTeams,getTeamStats:Rr.getTeamStats,getUser:Dr.getUser,getUserAccessToken:Dr.getUserAccessToken,setSystemUsersSearch:mc.b},e)}})(Jm);function Zm(e){return(Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ed(e){return(ed=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function td(e,t){return(td=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var nd=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==Zm(t)&&"function"!=typeof t?ad(e):t}(this,ed(t).call(this,e))).nextPage=a.nextPage.bind(ad(ad(a))),a.previousPage=a.previousPage.bind(ad(ad(a))),a.state={nextDisabled:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&td(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&$m(e.prototype,t),a&&$m(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this.refs.logPanel;e.scrollTop=e.scrollHeight,e.focus()}},{key:"componentDidUpdate",value:function(){var e=this.refs.logPanel;e.scrollTop=e.scrollHeight,e.focus()}},{key:"nextPage",value:function(e){var t=this;e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout(function(){return t.setState({nextDisabled:!1})},500),this.props.nextPage()}},{key:"previousPage",value:function(e){e.preventDefault(),this.props.previousPage()}},{key:"render",value:function(){var e,t,a=null;this.props.logs.length>=this.props.perPage&&(e=g.a.createElement("button",{className:"btn btn-default filter-control filter-control__next pull-right",onClick:this.nextPage,disabled:this.state.nextDisabled},g.a.createElement(O.c,{id:"admin.logs.next",defaultMessage:"Next"}),g.a.createElement("i",{className:"fa fa-chevron-right margin-left",title:Object(P.localizeMessage)("generic_icons.next","Next Icon")}))),this.props.page>0&&(t=g.a.createElement("button",{className:"btn btn-default filter-control filter-control__prev",onClick:this.previousPage},g.a.createElement("i",{className:"fa fa-angle-left",title:Object(P.localizeMessage)("generic_icons.previous","Previous Icon")}),g.a.createElement(O.c,{id:"admin.logs.prev",defaultMessage:"Previous"}))),a=[];for(var n=0;n<this.props.logs.length;n++){var i={whiteSpace:"nowrap",fontFamily:"monospace"};this.props.logs[n].indexOf("[EROR]")>0&&(i.color="red"),a.push(g.a.createElement("br",{key:"br_"+n})),a.push(g.a.createElement("span",{key:"log_"+n,style:i},this.props.logs[n]))}return g.a.createElement("div",null,g.a.createElement("div",{tabIndex:"-1",ref:"logPanel",className:"log__panel"},a),g.a.createElement("div",{className:"padding-top padding-bottom x2 filter-controls"},t,e))}}]),t}();function id(e){return(id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rd(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sd(e){return(sd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function od(e,t){return(od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(nd,"propTypes",{logs:b.a.arrayOf(b.a.string).isRequired,page:b.a.number.isRequired,perPage:b.a.number.isRequired,nextPage:b.a.func.isRequired,previousPage:b.a.func.isRequired});var ud=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cd(ld(ld(a=function(e,t){return!t||"object"!==id(t)&&"function"!=typeof t?ld(e):t}(this,sd(t).call(this,e)))),"nextPage",function(){a.setState({page:a.state.page+1})}),cd(ld(ld(a)),"previousPage",function(){a.setState({page:a.state.page-1})}),cd(ld(ld(a)),"reload",function(){a.setState({loadingLogs:!0}),a.props.actions.getLogs(a.state.page,a.state.perPage).then(function(){return a.setState({loadingLogs:!1})})}),a.state={loadingLogs:!0,page:0,perPage:1e3},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&od(e,t)}(t,g.a.Component),function(e,t,a){t&&rd(e.prototype,t),a&&rd(e,a)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getLogs(this.state.page,this.state.perPage).then(function(){return e.setState({loadingLogs:!1})})}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var a=this;this.state.page!==t.page&&this.props.actions.getLogs(t.page,t.perPage).then(function(){return a.setState({loadingLogs:!1})})}},{key:"render",value:function(){var e=null;return e=this.state.loadingLogs?g.a.createElement(ee.a,null):g.a.createElement(nd,Object.assign({},this.props,{nextPage:this.nextPage,previousPage:this.previousPage,page:this.state.page,perPage:this.state.perPage})),g.a.createElement("div",{className:"wrapper--admin"},g.a.createElement("h3",{className:"admin-console-header"},g.a.createElement(O.c,{id:"admin.logs.title",defaultMessage:"Server Logs"})),g.a.createElement("div",{className:"banner"},g.a.createElement("div",{className:"banner__content"},g.a.createElement(O.c,{id:"admin.logs.bannerDesc",defaultMessage:"To look up users by User ID or Token ID, go to Reporting > Users and paste the ID into the search filter."}))),g.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.reload},g.a.createElement(O.c,{id:"admin.logs.reload",defaultMessage:"Reload"})),e)}}]),t}();cd(ud,"propTypes",{logs:b.a.arrayOf(b.a.string).isRequired,nextPage:b.a.func,actions:b.a.shape({getLogs:b.a.func.isRequired}).isRequired});var md=Object(n.connect)(function(e){return{logs:o.getLogs(e)}},function(e){return{actions:Object(i.bindActionCreators)({getLogs:r.getLogs},e)}})(ud);function dd(e){return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pd(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fd(e,t){return!t||"object"!==dd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bd(e){return(bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hd(e,t){return(hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fd(this,bd(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hd(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&pd(e.prototype,t),a&&pd(e,a)}(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.status,i=a.primaryClass,r=a.disabled,s=a.onClick;switch(n){case A.z.LOADING:e=g.a.createElement("i",{className:"fa fa-refresh icon--rotate",title:P.localizeMessage("generic_icons.loading","Loading Icon")}),t=P.localizeMessage("admin.team.uploading","Uploading..");break;case A.z.COMPLETE:e=g.a.createElement("i",{className:"fa fa-check",title:P.localizeMessage("generic_icons.success","Success Icon")}),t=P.localizeMessage("admin.team.uploaded","Uploaded!");break;default:t=P.localizeMessage("admin.team.upload","Upload")}return g.a.createElement("button",{className:i,disabled:r,onClick:s,id:"upload-button"},e," ",t)}}]),t}();function yd(e){return(yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ed(e){return(Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _d(e,t){return(_d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(gd,"propTypes",{status:b.a.string,primaryClass:b.a.string,disabled:b.a.bool,onClick:b.a.func});var Td=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==yd(t)&&"function"!=typeof t?Sd(e):t}(this,Ed(t).call(this,e))).handleImageChange=a.handleImageChange.bind(Sd(Sd(a))),a.handleImageSubmit=a.handleImageSubmit.bind(Sd(Sd(a))),a.state={brandImage:null,brandImageExists:!1,brandImageTimestamp:Date.now(),error:"",status:A.z.DEFAULT},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_d(e,t)}(t,g.a.PureComponent),function(e,t,a){t&&vd(e.prototype,t),a&&vd(e,a)}(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;fetch(w.Client4.getBrandImageUrl(this.state.brandImageTimestamp)).then(function(t){200===t.status?e.setState({brandImageExists:!0}):e.setState({brandImageExists:!1})})}},{key:"componentDidUpdate",value:function(){if(this.refs.image){var e=new FileReader,t=this.refs.image;e.onload=function(e){yn()(t).attr("src",e.target.result)},e.readAsDataURL(this.state.brandImage)}}},{key:"handleImageChange",value:function(){var e=yn()(this.refs.fileInput);e.prop("files").length>0&&this.setState({brandImage:e.prop("files")[0],status:A.z.DEFAULT})}},{key:"handleImageSubmit",value:function(e){var t=this;e.preventDefault(),this.state.brandImage&&this.state.status!==A.z.LOADING&&(this.setState({error:"",status:A.z.LOADING}),Object(d.D)(this.state.brandImage,function(){t.setState({brandImageExists:!0,brandImage:null,brandImageTimestamp:Date.now(),status:A.z.COMPLETE})},function(e){t.setState({error:e.message,status:A.z.DEFAULT})}))}},{key:"render",value:function(){var e="btn";this.state.brandImage&&(e+=" btn-primary");var t="btn";this.props.disabled||(t+=" btn-default");var a=null;return a=this.state.brandImage?g.a.createElement("img",{ref:"image",className:"brand-img",src:""}):this.state.brandImageExists?g.a.createElement("img",{className:"brand-img",src:w.Client4.getBrandImageUrl(this.state.brandImageTimestamp)}):g.a.createElement("p",null,g.a.createElement(O.c,{id:"admin.team.noBrandImage",defaultMessage:"No brand image uploaded"})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4"},g.a.createElement(O.c,{id:"admin.team.brandImageTitle",defaultMessage:"Custom Brand Image:"})),g.a.createElement("div",{className:"col-sm-8"},a),g.a.createElement("div",{className:"col-sm-4"}),g.a.createElement("div",{className:"col-sm-8"},g.a.createElement("div",{className:"file__upload"},g.a.createElement("button",{className:t,disabled:this.props.disabled},g.a.createElement(O.c,{id:"admin.team.chooseImage",defaultMessage:"Choose New Image"})),g.a.createElement("input",{ref:"fileInput",type:"file",accept:".jpg,.png,.bmp",disabled:this.props.disabled,onChange:this.handleImageChange})),g.a.createElement(gd,{primaryClass:e,status:this.state.status,disabled:this.props.disabled||!this.state.brandImage,onClick:this.handleImageSubmit}),g.a.createElement("br",null),g.a.createElement(C.a,{error:this.state.error}),g.a.createElement("p",{className:"help-text no-margin"},g.a.createElement(O.b,{id:"admin.team.uploadDesc",defaultMessage:'Customize your user experience by adding a custom image to your login screen. See examples at <a href="http://docs.mattermost.com/administration/config-settings.html#custom-branding" target="_blank">docs.mattermost.com/administration/config-settings.html#custom-branding</a>.'}))))}}]),t}();function Od(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){wd(e,t,a[t])})}return e}function wd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Td,"propTypes",{disabled:b.a.bool.isRequired});var Pd=Math.pow(1024,2),jd={not:function(e){return function(t,a,n){return!e(t,a,n)}},and:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e,a,n){for(var i=0;i<t.length;i++){if(!(0,t[i])(e,a,n))return!1}return!0}},or:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e,a,n){for(var i=0;i<t.length;i++){if((0,t[i])(e,a,n))return!0}return!1}},stateValueMatch:function(e,t){return function(a,n){return n[e].match(t)}},stateValueEqual:function(e,t){return function(a,n){return n[e]===t}},stateValueTrue:function(e){return function(t,a){return Boolean(a[e])}},stateValueFalse:function(e){return function(t,a){return!a[e]}},hasLicense:function(e,t,a){return"true"===a.IsLicensed},hasLicenseFeature:function(e){return function(t,a,n){return n.IsLicensed&&"true"===n[e]}}},xd={reporting:{system_analytics:{schema:{id:"SystemAnalytics",component:Nr}},team_analytics:{schema:{id:"TeamAnalytics",component:as}},system_users:{schema:{id:"SystemUsers",component:Qm}},server_logs:{schema:{id:"ServerLogs",component:md}}},settings:{general:{configuration:{schema:{id:"ServiceSettings",name:Object(vt.b)("admin.general.configuration"),name_default:"Configuration",settings:[{type:A.e.SettingsTypes.TYPE_BANNER,label:Object(vt.b)("admin.rate.noteDescription"),label_default:"Changing properties in this section will require a server restart before taking effect.",banner_type:"info"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.SiteURL",label:Object(vt.b)("admin.service.siteURL"),label_default:"Site URL:",help_text:Object(vt.b)("admin.service.siteURLDescription"),help_text_default:"The URL that users will use to access Mattermost. Standard ports, such as 80 and 443, can be omitted, but non-standard ports are required. For example: http://example.com:8065. This setting is required.\n \nMattermost may be hosted at a subpath. For example: http://example.com:8065/company/mattermost. A restart is required before the server will work correctly.",help_text_markdown:!0,placeholder:Object(vt.b)("admin.service.siteURLExample"),placeholder_default:'E.g.: "http://example.com:8065"'},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.ListenAddress",label:Object(vt.b)("admin.service.listenAddress"),label_default:"Listen Address:",placeholder:Object(vt.b)("admin.service.listenExample"),placeholder_default:'E.g.: ":8065"',help_text:Object(vt.b)("admin.service.listenDescription"),help_text_default:'The address and port to which to bind and listen. Specifying ":8065" will bind to all network interfaces. Specifying "127.0.0.1:8065" will only bind to the network interface having that IP address. If you choose a port of a lower level (called "system ports" or "well-known ports", in the range of 0-1023), you must have permissions to bind to that port. On Linux you can use: "sudo setcap cap_net_bind_service=+ep ./bin/mattermost" to allow Mattermost to bind to well-known ports.'},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.Forward80To443",label:Object(vt.b)("admin.service.forward80To443"),label_default:"Forward port 80 to 443:",help_text:Object(vt.b)("admin.service.forward80To443Description"),help_text_default:"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.",disabled_help_text:Object(vt.b)("admin.service.forward80To443Description.disabled"),disabled_help_text_default:"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.\n \nThis setting cannot be enabled until your server is [listening](#ListenAddress) on port 443.",disabled_help_text_markdown:!0,isDisabled:jd.not(jd.stateValueMatch("ServiceSettings.ListenAddress",/:443$/))},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.ConnectionSecurity",label:Object(vt.b)("admin.connectionSecurityTitle"),label_default:"Connection Security:",help_text:Zt,options:[{value:"",display_name:Object(vt.b)("admin.connectionSecurityNone"),display_name_default:"None"},{value:"TLS",display_name:Object(vt.b)("admin.connectionSecurityTls"),display_name_default:"TLS (Recommended)"}]},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.TLSCertFile",label:Object(vt.b)("admin.service.tlsCertFile"),label_default:"TLS Certificate File:",help_text:Object(vt.b)("admin.service.tlsCertFileDescription"),help_text_default:"The certificate file to use.",isDisabled:jd.stateValueTrue("ServiceSettings.UseLetsEncrypt")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.TLSKeyFile",label:Object(vt.b)("admin.service.tlsKeyFile"),label_default:"TLS Key File:",help_text:Object(vt.b)("admin.service.tlsKeyFileDescription"),help_text_default:"The private key file to use.",isDisabled:jd.stateValueTrue("ServiceSettings.UseLetsEncrypt")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.UseLetsEncrypt",label:Object(vt.b)("admin.service.useLetsEncrypt"),label_default:"Use Let's Encrypt:",help_text:Object(vt.b)("admin.service.useLetsEncryptDescription"),help_text_default:"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.",disabled_help_text:Object(vt.b)("admin.service.useLetsEncryptDescription.disabled"),disabled_help_text_default:"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.\n \nThis setting cannot be enabled unless the [Forward port 80 to 443](#Forward80To443) setting is set to true.",disabled_help_text_markdown:!0,isDisabled:jd.stateValueFalse("ServiceSettings.Forward80To443")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.LetsEncryptCertificateCacheFile",label:Object(vt.b)("admin.service.letsEncryptCertificateCacheFile"),label_default:"Let's Encrypt Certificate Cache File:",help_text:Object(vt.b)("admin.service.letsEncryptCertificateCacheFileDescription"),help_text_default:"Certificates retrieved and other data about the Let's Encrypt service will be stored in this file.",isDisabled:jd.stateValueFalse("ServiceSettings.UseLetsEncrypt")},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.ReadTimeout",label:Object(vt.b)("admin.service.readTimeout"),label_default:"Read Timeout:",help_text:Object(vt.b)("admin.service.readTimeoutDescription"),help_text_default:"Maximum time allowed from when the connection is accepted to when the request body is fully read."},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.WriteTimeout",label:Object(vt.b)("admin.service.writeTimeout"),label_default:"Write Timeout:",help_text:Object(vt.b)("admin.service.writeTimeoutDescription"),help_text_default:"If using HTTP (insecure), this is the maximum time allowed from the end of reading the request headers until the response is written. If using HTTPS, it is the total time from when the connection is accepted until the response is written."},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.WebserverMode",label:Object(vt.b)("admin.webserverModeTitle"),label_default:"Webserver Mode:",help_text:$t,options:[{value:"gzip",display_name:Object(vt.b)("admin.webserverModeGzip"),display_name_default:"gzip"},{value:"uncompressed",display_name:Object(vt.b)("admin.webserverModeUncompressed"),display_name_default:"Uncompressed"},{value:"disabled",display_name:Object(vt.b)("admin.webserverModeDisabled"),display_name_default:"Disabled"}]},{type:A.e.SettingsTypes.TYPE_BUTTON,action:d.v,key:"ReloadConfigButton",label:Object(vt.b)("admin.reload.button"),label_default:"Reload Configuration From Disk",help_text:Object(vt.b)("admin.reload.reloadDescription"),help_text_default:'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {featureName} feature to load the new settings while the server is running. The administrator should then use the {recycleDatabaseConnections} feature to recycle the database connections based on the new settings.',help_text_values:{featureName:g.a.createElement("b",null,g.a.createElement(O.c,{id:"admin.reload.reloadDescription.featureName",defaultMessage:"Reload Configuration from Disk"})),recycleDatabaseConnections:g.a.createElement("a",{href:"../advanced/database"},g.a.createElement("b",null,g.a.createElement(O.c,{id:"admin.reload.reloadDescription.recycleDatabaseConnections",defaultMessage:"Database > Recycle Database Connections"})))},error_message:Object(vt.b)("admin.reload.reloadFail"),error_message_default:"Reload unsuccessful: {error}"},{type:A.e.SettingsTypes.TYPE_BUTTON,key:"PurgeButton",action:d.r,label:Object(vt.b)("admin.purge.button"),label_default:"Purge All Caches",help_text:Object(vt.b)("admin.purge.purgeDescription"),help_text_default:"This will purge all the in-memory caches for things like sessions, accounts, channels, etc. Deployments using High Availability will attempt to purge all the servers in the cluster.  Purging the caches may adversely impact performance.",error_message:Object(vt.b)("admin.purge.purgeFail"),error_message_default:"Purging unsuccessful: {error}"}]}},localization:{schema:{id:"LocalizationSettings",name:Object(vt.b)("admin.general.localization"),name_default:"Localization",settings:[{type:A.e.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.DefaultServerLocale",label:Object(vt.b)("admin.general.localization.serverLocaleTitle"),label_default:"Default Server Language:",help_text:Object(vt.b)("admin.general.localization.serverLocaleDescription"),help_text_default:"Default language for system messages. Changing this will require a server restart before taking effect."},{type:A.e.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.DefaultClientLocale",label:Object(vt.b)("admin.general.localization.clientLocaleTitle"),label_default:"Default Client Language:",help_text:Object(vt.b)("admin.general.localization.clientLocaleDescription"),help_text_default:"Default language for newly created users and pages where the user hasn't logged in."},{type:A.e.SettingsTypes.TYPE_LANGUAGE,key:"LocalizationSettings.AvailableLocales",label:Object(vt.b)("admin.general.localization.availableLocalesTitle"),label_default:"Available Languages:",help_text:Object(vt.b)("admin.general.localization.availableLocalesDescription"),help_text_markdown:!0,help_text_default:"Set which languages are available for users in Account Settings (leave this field blank to have all supported languages available). If you're manually adding new languages, the **Default Client Language** must be added before saving this setting.\n \nWould like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.",multiple:!0,no_result:Object(vt.b)("admin.general.localization.availableLocalesNoResults"),no_result_default:"No results found",not_present:Object(vt.b)("admin.general.localization.availableLocalesNotPresent"),not_present_default:"The default client language must be included in the available list"}]}},users_and_teams:{schema:{id:"UserAndTeamsSettings",name:Object(vt.b)("admin.general.usersAndTeams"),name_default:"Users and Teams",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableUserCreation",label:Object(vt.b)("admin.team.userCreationTitle"),label_default:"Enable Account Creation: ",help_text:Object(vt.b)("admin.team.userCreationDescription"),help_text_default:"When false, the ability to create accounts is disabled. The create account button displays error when pressed."},{type:A.e.SettingsTypes.TYPE_PERMISSION,key:"TeamSettings.EnableTeamCreation",label:Object(vt.b)("admin.team.teamCreationTitle"),label_default:"Enable Team Creation: ",help_text:Object(vt.b)("admin.team.teamCreationDescription"),help_text_default:"When false, only System Administrators can create teams.",permissions_mapping_name:"enableTeamCreation",isHidden:jd.hasLicense},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.MaxUsersPerTeam",label:Object(vt.b)("admin.team.maxUsersTitle"),label_default:"Max Users Per Team:",help_text:Object(vt.b)("admin.team.maxUsersDescription"),help_text_default:"Maximum total number of users per team, including both active and inactive users.",placeholder:Object(vt.b)("admin.team.maxUsersExample"),placeholder_default:'E.g.: "25"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.MaxChannelsPerTeam",label:Object(vt.b)("admin.team.maxChannelsTitle"),label_default:"Max Channels Per Team:",help_text:Object(vt.b)("admin.team.maxChannelsDescription"),help_text_default:"Maximum total number of channels per team, including both active and archived channels.",placeholder:Object(vt.b)("admin.team.maxChannelsExample"),placeholder_default:'E.g.: "100"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"TeamSettings.MaxNotificationsPerChannel",label:Object(vt.b)("admin.team.maxNotificationsPerChannelTitle"),label_default:"Max Notifications Per Channel:",help_text:Object(vt.b)("admin.team.maxNotificationsPerChannelDescription"),help_text_default:"Maximum total number of users in a channel before users typing messages, @all, @here, and @channel no longer send notifications because of performance.",placeholder:Object(vt.b)("admin.team.maxNotificationsPerChannelExample"),placeholder_default:'E.g.: "1000"'},{type:A.e.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableConfirmNotificationsToChannel",label:Object(vt.b)("admin.team.enableConfirmNotificationsToChannelTitle"),label_default:"Show @channel and @all confirmation dialog: ",help_text:Object(vt.b)("admin.team.enableConfirmNotificationsToChannelDescription"),help_text_default:"When true, users will be prompted to confirm when posting @channel and @all in channels with over five members. When false, no confirmation is required."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"TeamSettings.RestrictCreationToDomains",label:Object(vt.b)("admin.team.restrictTitle"),label_default:"Restrict account creation to specified email domains:",help_text:Object(vt.b)("admin.team.restrictDescription"),help_text_default:'Teams and user accounts can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").',placeholder:Object(vt.b)("admin.team.restrictExample"),placeholder_default:'E.g.: "corp.mattermost.com, mattermost.org"'},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"TeamSettings.RestrictDirectMessage",label:Object(vt.b)("admin.team.restrictDirectMessage"),label_default:"Enable users to open Direct Message channels with:",help_text:Object(vt.b)("admin.team.restrictDirectMessageDesc"),help_text_default:'"Any user on the Mattermost server" enables users to open a Direct Message channel with any user on the server, even if they are not on any teams together. "Any member of the team" limits the ability in the Direct Messages "More" menu to only open Direct Message channels with users who are in the same team.\n \nNote: This setting only affects the UI, not permissions on the server.',options:[{value:"any",display_name:Object(vt.b)("admin.team.restrict_direct_message_any"),display_name_default:"Any user on the Mattermost server"},{value:"team",display_name:Object(vt.b)("admin.team.restrict_direct_message_team"),display_name_default:"Any member of the team"}]},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"TeamSettings.TeammateNameDisplay",label:Object(vt.b)("admin.team.teammateNameDisplay"),label_default:"Teammate Name Display:",help_text:Object(vt.b)("admin.team.teammateNameDisplayDesc"),help_text_default:"Set how to display users' names in posts and the Direct Messages list.",options:[{value:A.e.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,display_name:Object(vt.b)("admin.team.showUsername"),display_name_default:"Show username (default)"},{value:A.e.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,display_name:Object(vt.b)("admin.team.showNickname"),display_name_default:"Show nickname if one exists, otherwise show first and last name"},{value:A.e.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,display_name:Object(vt.b)("admin.team.showFullname"),display_name_default:"Show first and last name"}]},{type:A.e.SettingsTypes.TYPE_PERMISSION,key:"TeamSettings.EditOthersPosts",label:Object(vt.b)("admin.team.editOthersPostsTitle"),label_default:"Allow Team Administrators to edit others posts:",help_text:Object(vt.b)("admin.team.editOthersPostsDesc"),help_text_default:"When true, Team Administrators and System Administrators can edit other user's posts.  When false, only System Administrators can edit other user's posts.",permissions_mapping_name:"editOthersPosts",isHidden:jd.hasLicense},{type:A.e.SettingsTypes.TYPE_BOOL,key:"TeamSettings.ExperimentalViewArchivedChannels",label:Object(vt.b)("admin.viewArchivedChannelsTitle"),label_default:"Allow users to view archived channels: ",help_text:Object(vt.b)("admin.viewArchivedChannelsHelpText"),help_text_default:"(Experimental) When true, allows users to share permalinks and search for content of channels that have been archived. Users can only view the content in channels of which they were a member before the channel was archived."}]}},privacy:{schema:{id:"PrivacySettings",name:Object(vt.b)("admin.general.privacy"),name_default:"Privacy",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"PrivacySettings.ShowEmailAddress",label:Object(vt.b)("admin.privacy.showEmailTitle"),label_default:"Show Email Address:",help_text:Object(vt.b)("admin.privacy.showEmailDescription"),help_text_default:"When false, hides the email address of members from everyone except System Administrators."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"PrivacySettings.ShowFullName",label:Object(vt.b)("admin.privacy.showFullNameTitle"),label_default:"Show Full Name:",help_text:Object(vt.b)("admin.privacy.showFullNameDescription"),help_text_default:"When false, hides the full name of members from everyone except System Administrators. Username is shown in place of full name."}]}},compliance:{schema:{id:"ComplianceSettings",name:Object(vt.b)("admin.compliance.title"),name_default:"Compliance Settings",settings:[{type:A.e.SettingsTypes.TYPE_BANNER,label:Object(vt.b)("admin.compliance.newComplianceExportBanner"),label_markdown:!0,label_default:"This feature is replaced by a new [Compliance Export]({siteURL}/admin_console/compliance/message_export) feature, and will be removed in a future release. We recommend migrating to the new system.",label_values:{siteURL:Object(la.e)()},isHidden:jd.not(jd.hasLicense),banner_type:"info"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ComplianceSettings.Enable",label:Object(vt.b)("admin.compliance.enableTitle"),label_default:"Enable Compliance Reporting:",help_text:Object(vt.b)("admin.compliance.enableDesc"),help_text_default:"When true, Mattermost allows compliance reporting from the **Compliance and Auditing** tab. See [documentation](!https://docs.mattermost.com/administration/compliance.html) to learn more.",help_text_markdown:!0,isHidden:jd.not(jd.hasLicense)},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ComplianceSettings.Directory",label:Object(vt.b)("admin.compliance.directoryTitle"),label_default:"Compliance Report Directory:",help_text:Object(vt.b)("admin.compliance.directoryDescription"),help_text_default:"Directory to which compliance reports are written. If blank, will be set to ./data/.",placeholder:Object(vt.b)("admin.compliance.directoryExample"),placeholder_default:'E.g.: "./data/"',isDisabled:jd.stateValueFalse("ComplianceSettings.Enable"),isHidden:jd.not(jd.hasLicense)},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ComplianceSettings.EnableDaily",label:Object(vt.b)("admin.compliance.enableDailyTitle"),label_default:"Enable Daily Report:",help_text:Object(vt.b)("admin.compliance.enableDailyDesc"),help_text_default:"When true, Mattermost will generate a daily compliance report.",isDisabled:jd.stateValueFalse("ComplianceSettings.Enable"),isHidden:jd.not(jd.hasLicense)}]}},logging:{schema:{id:"LogSettings",name:Object(vt.b)("admin.general.log"),name_default:"Logging",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableConsole",label:Object(vt.b)("admin.log.consoleTitle"),label_default:"Output logs to console: ",help_text:Object(vt.b)("admin.log.consoleDescription"),help_text_default:"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout). Changing this setting requires a server restart before taking effect."},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"LogSettings.ConsoleLevel",label:Object(vt.b)("admin.log.levelTitle"),label_default:"Console Log Level:",help_text:Object(vt.b)("admin.log.levelDescription"),help_text_default:"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.",options:ea,isDisabled:jd.stateValueFalse("LogSettings.EnableConsole")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.ConsoleJson",label:Object(vt.b)("admin.log.consoleJsonTitle"),label_default:"Output console logs as JSON:",help_text:Object(vt.b)("admin.log.jsonDescription"),help_text_default:"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.",isDisabled:jd.stateValueFalse("LogSettings.EnableConsole")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableFile",label:Object(vt.b)("admin.log.fileTitle"),label_default:"Output logs to file: ",help_text:Object(vt.b)("admin.log.fileDescription"),help_text_default:"Typically set to true in production. When true, logged events are written to the mattermost.log file in the directory specified in the File Log Directory field. The logs are rotated at 10,000 lines and archived to a file in the same directory, and given a name with a datestamp and serial number. For example, mattermost.2017-03-31.001. Changing this setting requires a server restart before taking effect."},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"LogSettings.FileLevel",label:Object(vt.b)("admin.log.fileLevelTitle"),label_default:"File Log Level:",help_text:Object(vt.b)("admin.log.fileLevelDescription"),help_text_default:"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.",options:ea,isDisabled:jd.stateValueFalse("LogSettings.EnableFile")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.FileJson",label:Object(vt.b)("admin.log.fileJsonTitle"),label_default:"Output file logs as JSON:",help_text:Object(vt.b)("admin.log.jsonDescription"),help_text_default:"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.",isDisabled:jd.stateValueFalse("LogSettings.EnableFile")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LogSettings.FileLocation",label:Object(vt.b)("admin.log.locationTitle"),label_default:"File Log Directory:",help_text:Object(vt.b)("admin.log.locationDescription"),help_text_default:"The location of the log files. If blank, they are stored in the ./logs directory. The path that you set must exist and Mattermost must have write permissions in it. Changing this setting requires a server restart before taking effect.",placeholder:Object(vt.b)("admin.log.locationPlaceholder"),placeholder_default:"Enter your file location",isDisabled:jd.stateValueFalse("LogSettings.EnableFile")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableWebhookDebugging",label:Object(vt.b)("admin.log.enableWebhookDebugging"),label_default:"Enable Webhook Debugging:",help_text:Object(vt.b)("admin.log.enableWebhookDebuggingDescription"),help_text_default:'When true, sends webhook debug messages to the server logs. To also output the request body of incoming webhooks, set {boldedLogLevel} to "DEBUG".',help_text_values:{boldedLogLevel:g.a.createElement("strong",null,g.a.createElement(O.c,{id:"admin.log.logLevel",defaultMessage:"Log Level"}))}},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LogSettings.EnableDiagnostics",label:Object(vt.b)("admin.log.enableDiagnostics"),label_default:"Enable Diagnostics and Error Reporting:",help_text:Object(vt.b)("admin.log.enableDiagnosticsDescription"),help_text_default:"Enable this feature to improve the quality and performance of Mattermost by sending error reporting and diagnostic information to Mattermost, Inc. Read our [privacy policy](!https://about.mattermost.com/default-privacy-policy/) to learn more.",help_text_markdown:!0,onConfigSave:function(e,t){return t&&t!==e&&Object(Ms.d)("ui","diagnostics_disabled"),e}}]}}},permissions:{schemes:{schema:{id:"PermissionSchemes",component:Ro}},systemScheme:{schema:{id:"PermissionSystemScheme",component:uc}},teamScheme:{schema:{id:"PermissionSystemScheme",component:Hc}}},authentication:{gitlab:{schema:{id:"GitLabSettings",name:Object(vt.b)("admin.authentication.gitlab"),name_default:"GitLab",onConfigLoad:function(e){var t={};return t["GitLabSettings.Url"]=e.GitLabSettings.UserApiEndpoint.replace("/api/v4/user",""),t},onConfigSave:function(e){var t=Od({},e);return t.GitLabSettings.UserApiEndpoint=e.GitLabSettings.Url.replace(/\/$/,"")+"/api/v4/user",t},settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"GitLabSettings.Enable",label:Object(vt.b)("admin.gitlab.enableTitle"),label_default:"Enable authentication with GitLab: ",help_text:Object(vt.b)("admin.gitlab.enableDescription"),help_text_default:'When true, Mattermost allows team creation and account signup using GitLab OAuth.\n \n1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Id",label:Object(vt.b)("admin.gitlab.clientIdTitle"),label_default:"Application ID:",help_text:Object(vt.b)("admin.gitlab.clientIdDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(vt.b)("admin.gitlab.clientIdExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:jd.stateValueFalse("GitLabSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Secret",label:Object(vt.b)("admin.gitlab.clientSecretTitle"),label_default:"Application Secret Key:",help_text:Object(vt.b)("admin.gitlab.clientSecretDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(vt.b)("admin.gitlab.clientSecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:jd.stateValueFalse("GitLabSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Url",label:Object(vt.b)("admin.gitlab.siteUrl"),label_default:"GitLab Site URL:",help_text:Object(vt.b)("admin.gitlab.siteUrlDescription"),help_text_default:"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.",placeholder:Object(vt.b)("admin.gitlab.siteUrlExample"),placeholder_default:"E.g.: https://",isDisabled:jd.stateValueFalse("GitLabSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.UserApiEndpoint",label:Object(vt.b)("admin.gitlab.userTitle"),label_default:"User API Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/api/v4/user":""},isDisabled:!0},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.AuthEndpoint",label:Object(vt.b)("admin.gitlab.authTitle"),label_default:"Auth Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/authorize":""},isDisabled:!0},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.TokenEndpoint",label:Object(vt.b)("admin.gitlab.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/token":""},isDisabled:!0}]}},oauth:{schema:{id:"OAuthSettings",name:Object(vt.b)("admin.authentication.oauth"),name_default:"OAuth 2.0",onConfigLoad:function(e){var t={};return e.GitLabSettings&&e.GitLabSettings.Enable&&(t.oauthType=A.e.GITLAB_SERVICE),e.Office365Settings&&e.Office365Settings.Enable&&(t.oauthType=A.e.OFFICE365_SERVICE),e.GoogleSettings&&e.GoogleSettings.Enable&&(t.oauthType=A.e.GOOGLE_SERVICE),t["GitLabSettings.Url"]=e.GitLabSettings.UserApiEndpoint.replace("/api/v4/user",""),t},onConfigSave:function(e){var t=Od({},e);return t.GitLabSettings=e.GitLabSettings||{},t.Office365Settings=e.Office365Settings||{},t.GoogleSettings=e.GoogleSettings||{},t.GitLabSettings.Enable=!1,t.Office365Settings.Enable=!1,t.GoogleSettings.Enable=!1,t.GitLabSettings.UserApiEndpoint=e.GitLabSettings.Url.replace(/\/$/,"")+"/api/v4/user",e.oauthType===A.e.GITLAB_SERVICE&&(t.GitLabSettings.Enable=!0),e.oauthType===A.e.OFFICE365_SERVICE&&(t.Office365Settings.Enable=!0),e.oauthType===A.e.GOOGLE_SERVICE&&(t.GoogleSettings.Enable=!0),delete t.oauthType,t},settings:[{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"oauthType",label:Object(vt.b)("admin.oauth.select"),label_default:"Select OAuth 2.0 Service Provider:",options:[{value:"off",display_name:Object(vt.b)("admin.oauth.off"),display_name_default:"Do not allow sign-in via an OAuth 2.0 provider."},{value:A.e.GITLAB_SERVICE,display_name:Object(vt.b)("admin.oauth.gitlab"),display_name_default:"GitLab",help_text:Object(vt.b)("admin.gitlab.EnableMarkdownDesc"),help_text_default:'1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',help_text_markdown:!0},{value:A.e.GOOGLE_SERVICE,display_name:Object(vt.b)("admin.oauth.google"),display_name_default:"Google Apps",isHidden:jd.not(jd.hasLicenseFeature("GoogleOAuth")),help_text:Object(vt.b)("admin.google.EnableMarkdownDesc"),help_text_default:'1. [Log in](!https://accounts.google.com/login) to your Google account.\n2. Go to [https://console.developers.google.com](!https://console.developers.google.com), click **Credentials** in the left hand sidebar and enter "Mattermost - your-company-name" as the **Project Name**, then click **Create**.\n3. Click the **OAuth consent screen** header and enter "Mattermost" as the **Product name shown to users**, then click **Save**.\n4. Under the **Credentials** header, click **Create credentials**, choose **OAuth client ID** and select **Web Application**.\n5. Under **Restrictions** and **Authorized redirect URIs** enter **your-mattermost-url/signup/google/complete** (example: http://localhost:8065/signup/google/complete). Click **Create**.\n6. Paste the **Client ID** and **Client Secret** to the fields below, then click **Save**.\n7. Finally, go to [Google+ API](!https://console.developers.google.com/apis/api/plus/overview") and click *Enable*. This might take a few minutes to propagate through Google`s systems.',help_text_markdown:!0},{value:A.e.OFFICE365_SERVICE,display_name:Object(vt.b)("admin.oauth.office365"),display_name_default:"Office 365 (Beta)",isHidden:jd.not(jd.hasLicenseFeature("Office365OAuth")),help_text:Object(vt.b)("admin.office365.EnableMarkdownDesc"),help_text_default:'1. [Log in](!https://login.microsoftonline.com/) to your Microsoft or Office 365 account. Make sure it`s the account on the same [tenant](!https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#Anchor_0) that you would like users to log in with.\n2. Go to [https://apps.dev.microsoft.com](!https://apps.dev.microsoft.com), click **Go to app list** > **Add an app** and use "Mattermost - your-company-name" as the **Application Name**.\n3. Under **Application Secrets**, click **Generate New Password** and paste it to the **Application Secret Password** field below.\n4. Under **Platforms**, click **Add Platform**, choose **Web** and enter **your-mattermost-url/signup/office365/complete** (example: http://localhost:8065/signup/office365/complete) under **Redirect URIs**. Also uncheck **Allow Implicit Flow**.\n5. Finally, click **Save** and then paste the **Application ID** below.',help_text_markdown:!0}]},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Id",label:Object(vt.b)("admin.gitlab.clientIdTitle"),label_default:"Application ID:",help_text:Object(vt.b)("admin.gitlab.clientIdDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(vt.b)("admin.gitlab.clientIdExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Secret",label:Object(vt.b)("admin.gitlab.clientSecretTitle"),label_default:"Application Secret Key:",help_text:Object(vt.b)("admin.gitlab.clientSecretDescription"),help_text_default:"Obtain this value via the instructions above for logging into GitLab.",placeholder:Object(vt.b)("admin.gitlab.clientSecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.Url",label:Object(vt.b)("admin.gitlab.siteUrl"),label_default:"GitLab Site URL:",help_text:Object(vt.b)("admin.gitlab.siteUrlDescription"),help_text_default:"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.",placeholder:Object(vt.b)("admin.gitlab.siteUrlExample"),placeholder_default:"E.g.: https://",isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.UserApiEndpoint",label:Object(vt.b)("admin.gitlab.userTitle"),label_default:"User API Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/api/v4/user":""},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.AuthEndpoint",label:Object(vt.b)("admin.gitlab.authTitle"),label_default:"Auth Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/authorize":""},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GitLabSettings.TokenEndpoint",label:Object(vt.b)("admin.gitlab.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:function(e,t,a){return a["GitLabSettings.Url"]?a["GitLabSettings.Url"].replace(/\/$/,"")+"/oauth/token":""},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","gitlab"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.Id",label:Object(vt.b)("admin.google.clientIdTitle"),label_default:"Client ID:",help_text:Object(vt.b)("admin.google.clientIdDescription"),help_text_default:"The Client ID you received when registering your application with Google.",placeholder:Object(vt.b)("admin.google.clientIdExample"),placeholder_default:'E.g.: "7602141235235-url0fhs1mayfasbmop5qlfns8dh4.apps.googleusercontent.com"',isHidden:jd.not(jd.stateValueEqual("oauthType","google"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.Secret",label:Object(vt.b)("admin.google.clientSecretTitle"),label_default:"Client Secret:",help_text:Object(vt.b)("admin.google.clientSecretDescription"),help_text_default:"The Client Secret you received when registering your application with Google.",placeholder:Object(vt.b)("admin.google.clientSecretExample"),placeholder_default:'E.g.: "H8sz0Az-dDs2p15-7QzD231"',isHidden:jd.not(jd.stateValueEqual("oauthType","google"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.UserApiEndpoint",label:Object(vt.b)("admin.google.userTitle"),label_default:"User API Endpoint:",dynamic_value:function(){return"https://www.googleapis.com/plus/v1/people/me"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","google"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.AuthEndpoint",label:Object(vt.b)("admin.google.authTitle"),label_default:"Auth Endpoint:",dynamic_value:function(){return"https://accounts.google.com/o/oauth2/v2/auth"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","google"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"GoogleSettings.TokenEndpoint",label:Object(vt.b)("admin.google.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:function(){return"https://www.googleapis.com/oauth2/v4/token"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","google"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"Office365Settings.Id",label:Object(vt.b)("admin.office365.clientIdTitle"),label_default:"Application ID:",help_text:Object(vt.b)("admin.office365.clientIdDescription"),help_text_default:"The Application/Client ID you received when registering your application with Microsoft.",placeholder:Object(vt.b)("admin.office365.clientIdExample"),placeholder_default:'E.g.: "adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq"',isHidden:jd.not(jd.stateValueEqual("oauthType","office365"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"Office365Settings.Secret",label:Object(vt.b)("admin.office365.clientSecretTitle"),label_default:"Application Secret Password:",help_text:Object(vt.b)("admin.office365.clientSecretDescription"),help_text_default:"The Application Secret Password you generated when registering your application with Microsoft.",placeholder:Object(vt.b)("admin.office365.clientSecretExample"),placeholder_default:'E.g.: "shAieM47sNBfgl20f8ci294"',isHidden:jd.not(jd.stateValueEqual("oauthType","office365"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"Office365Settings.UserApiEndpoint",label:Object(vt.b)("admin.office365.userTitle"),label_default:"User API Endpoint:",dynamic_value:function(){return"https://graph.microsoft.com/v1.0/me"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","office365"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"Office365Settings.AuthEndpoint",label:Object(vt.b)("admin.office365.authTitle"),label_default:"Auth Endpoint:",dynamic_value:function(){return"https://login.microsoftonline.com/common/oauth2/v2.0/authorize"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","office365"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"Office365Settings.TokenEndpoint",label:Object(vt.b)("admin.office365.tokenTitle"),label_default:"Token Endpoint:",dynamic_value:function(){return"https://login.microsoftonline.com/common/oauth2/v2.0/token"},isDisabled:!0,isHidden:jd.not(jd.stateValueEqual("oauthType","office365"))}]}},email:{schema:{id:"EmailSettings",name:Object(vt.b)("admin.authentication.email"),name_default:"Email Authentication",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignUpWithEmail",label:Object(vt.b)("admin.email.allowSignupTitle"),label_default:"Enable account creation with email:",help_text:Object(vt.b)("admin.email.allowSignupDescription"),help_text_default:"When true, Mattermost allows account creation using email and password. This value should be false only when you want to limit sign up to a single sign-on service like AD/LDAP, SAML or GitLab."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignInWithEmail",label:Object(vt.b)("admin.email.allowEmailSignInTitle"),label_default:"Enable sign-in with email:",help_text:Object(vt.b)("admin.email.allowEmailSignInDescription"),help_text_default:"When true, Mattermost allows users to sign in using their email and password."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"EmailSettings.EnableSignInWithUsername",label:Object(vt.b)("admin.email.allowUsernameSignInTitle"),label_default:"Enable sign-in with username:",help_text:Object(vt.b)("admin.email.allowUsernameSignInDescription"),help_text_default:"When true, users with email login can sign in using their username and password. This setting does not affect AD/LDAP login."}]}},ldap:{schema:{id:"LdapSettings",name:Object(vt.b)("admin.authentication.ldap"),name_default:"AD/LDAP",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"LdapSettings.Enable",label:Object(vt.b)("admin.ldap.enableTitle"),label_default:"Enable sign-in with AD/LDAP:",help_text:Object(vt.b)("admin.ldap.enableDesc"),help_text_default:"When true, Mattermost allows login using AD/LDAP"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LdapSettings.EnableSync",label:Object(vt.b)("admin.ldap.enableSyncTitle"),label_default:"Enable Synchronization with AD/LDAP:",help_text:Object(vt.b)("admin.ldap.enableSyncDesc"),help_text_default:"When true, Mattermost periodically synchronizes users from AD/LDAP. When false, user attributes are updated from AD/LDAP during user login only."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LdapServer",label:Object(vt.b)("admin.ldap.serverTitle"),label_default:"AD/LDAP Server:",help_text:Object(vt.b)("admin.ldap.serverDesc"),help_text_default:"The domain or IP address of AD/LDAP server.",placeholder:Object(vt.b)("admin.ldap.serverEx"),placeholder_default:'E.g.: "10.0.0.23"',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.LdapPort",label:Object(vt.b)("admin.ldap.portTitle"),label_default:"AD/LDAP Port:",help_text:Object(vt.b)("admin.ldap.portDesc"),help_text_default:"The port Mattermost will use to connect to the AD/LDAP server. Default is 389.",placeholder:Object(vt.b)("admin.ldap.portEx"),placeholder_default:'E.g.: "389"',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"LdapSettings.ConnectionSecurity",label:Object(vt.b)("admin.connectionSecurityTitle"),label_default:"Connection Security:",help_text:Qt,options:[{value:"",display_name:Object(vt.b)("admin.connectionSecurityNone"),display_name_default:"None"},{value:"TLS",display_name:Object(vt.b)("admin.connectionSecurityTls"),display_name_default:"TLS (Recommended)"},{value:"STARTTLS",display_name:Object(vt.b)("admin.connectionSecurityStart"),display_name_default:"STARTTLS"}],isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_BOOL,key:"LdapSettings.SkipCertificateVerification",label:Object(vt.b)("admin.ldap.skipCertificateVerification"),label_default:"Skip Certificate Verification:",help_text:Object(vt.b)("admin.ldap.skipCertificateVerificationDesc"),help_text_default:"Skips the certificate verification step for TLS or STARTTLS connections. Not recommended for production environments where TLS is required. For testing only.",isDisabled:jd.stateValueFalse("LdapSettings.ConnectionSecurity")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BaseDN",label:Object(vt.b)("admin.ldap.baseTitle"),label_default:"BaseDN:",help_text:Object(vt.b)("admin.ldap.baseDesc"),help_text_default:"The Base DN is the Distinguished Name of the location where Mattermost should start its search for users in the AD/LDAP tree.",placeholder:Object(vt.b)("admin.ldap.baseEx"),placeholder_default:'E.g.: "ou=Unit Name,dc=corp,dc=example,dc=com"',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BindUsername",label:Object(vt.b)("admin.ldap.bindUserTitle"),label_default:"Bind Username:",help_text:Object(vt.b)("admin.ldap.bindUserDesc"),help_text_default:"The username used to perform the AD/LDAP search. This should typically be an account created specifically for use with Mattermost. It should have access limited to read the portion of the AD/LDAP tree specified in the BaseDN field.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.BindPassword",label:Object(vt.b)("admin.ldap.bindPwdTitle"),label_default:"Bind Password:",help_text:Object(vt.b)("admin.ldap.bindPwdDesc"),help_text_default:'Password of the user given in "Bind Username".',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.UserFilter",label:Object(vt.b)("admin.ldap.userFilterTitle"),label_default:"User Filter:",help_text:Object(vt.b)("admin.ldap.userFilterDisc"),help_text_default:"(Optional) Enter an AD/LDAP Filter to use when searching for user objects. Only the users selected by the query will be able to access Mattermost. For Active Directory, the query to filter out disabled users is (&(objectCategory=Person)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))).",placeholder:Object(vt.b)("admin.ldap.userFilterEx"),placeholder_default:'Ex. "(objectClass=user)"',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.FirstNameAttribute",label:Object(vt.b)("admin.ldap.firstnameAttrTitle"),label_default:"First Name Attribute:",placeholder:Object(vt.b)("admin.ldap.firstnameAttrEx"),placeholder_default:'E.g.: "givenName"',help_text:Object(vt.b)("admin.ldap.firstnameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the first name of users in Mattermost. When set, users cannot edit their first name, since it is synchronized with the LDAP server. When left blank, users can set their first name in Account Settings.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LastNameAttribute",label:Object(vt.b)("admin.ldap.lastnameAttrTitle"),label_default:"Last Name Attribute:",placeholder:Object(vt.b)("admin.ldap.lastnameAttrEx"),placeholder_default:'E.g.: "sn"',help_text:Object(vt.b)("admin.ldap.lastnameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the last name of users in Mattermost. When set, users cannot edit their last name, since it is synchronized with the LDAP server. When left blank, users can set their last name in Account Settings.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.NicknameAttribute",label:Object(vt.b)("admin.ldap.nicknameAttrTitle"),label_default:"Nickname Attribute:",placeholder:Object(vt.b)("admin.ldap.nicknameAttrEx"),placeholder_default:'E.g.: "nickname"',help_text:Object(vt.b)("admin.ldap.nicknameAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the nickname of users in Mattermost. When set, users cannot edit their nickname, since it is synchronized with the LDAP server. When left blank, users can set their nickname in Account Settings.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.PositionAttribute",label:Object(vt.b)("admin.ldap.positionAttrTitle"),label_default:"Position Attribute:",placeholder:Object(vt.b)("admin.ldap.positionAttrEx"),placeholder_default:'E.g.: "title"',help_text:Object(vt.b)("admin.ldap.positionAttrDesc"),help_text_default:"(Optional) The attribute in the AD/LDAP server used to populate the position field in Mattermost. When set, users cannot edit their position, since it is synchronized with the LDAP server. When left blank, users can set their position in Account Settings.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.EmailAttribute",label:Object(vt.b)("admin.ldap.emailAttrTitle"),label_default:"Email Attribute:",placeholder:Object(vt.b)("admin.ldap.emailAttrEx"),placeholder_default:'E.g.: "mail" or "userPrincipalName"',help_text:Object(vt.b)("admin.ldap.emailAttrDesc"),help_text_default:"The attribute in the AD/LDAP server used to populate the email address field in Mattermost.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.UsernameAttribute",label:Object(vt.b)("admin.ldap.usernameAttrTitle"),label_default:"Username Attribute:",placeholder:Object(vt.b)("admin.ldap.usernameAttrEx"),placeholder_default:'E.g.: "sAMAccountName"',help_text:Object(vt.b)("admin.ldap.usernameAttrDesc"),help_text_default:"The attribute in the AD/LDAP server used to populate the username field in Mattermost. This may be the same as the Login ID Attribute.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.IdAttribute",label:Object(vt.b)("admin.ldap.idAttrTitle"),label_default:"ID Attribute: ",placeholder:Object(vt.b)("admin.ldap.idAttrEx"),placeholder_default:'E.g.: "objectGUID"',help_text:Object(vt.b)("admin.ldap.idAttrDesc"),help_text_markdown:!0,help_text_default:"The attribute in the AD/LDAP server used as a unique identifier in Mattermost. It should be an AD/LDAP attribute with a value that does not change. If a user's ID Attribute changes, it will create a new Mattermost account unassociated with their old one.\n \nIf you need to change this field after users have already logged in, use the [mattermost ldap idmigrate](!https://about.mattermost.com/default-mattermost-ldap-idmigrate) CLI tool.",isDisabled:jd.and(jd.stateValueEqual("LdapSettings.Enable",!1),jd.stateValueEqual("LdapSettings.EnableSync",!1))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginIdAttribute",label:Object(vt.b)("admin.ldap.loginAttrTitle"),label_default:"Login ID Attribute: ",placeholder:Object(vt.b)("admin.ldap.loginIdAttrEx"),placeholder_default:'E.g.: "sAMAccountName"',help_text:Object(vt.b)("admin.ldap.loginAttrDesc"),help_text_markdown:!0,help_text_default:'The attribute in the AD/LDAP server used to log in to Mattermost. Normally this attribute is the same as the "Username Attribute" field above.\n \nIf your team typically uses domain/username to log in to other services with AD/LDAP, you may enter domain/username in this field to maintain consistency between sites.',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"LdapSettings.LoginFieldName",label:Object(vt.b)("admin.ldap.loginNameTitle"),label_default:"Sign-in Field Default Text:",placeholder:Object(vt.b)("admin.ldap.loginNameEx"),placeholder_default:'E.g.: "AD/LDAP Username"',help_text:Object(vt.b)("admin.ldap.loginNameDesc"),help_text_default:'The placeholder text that appears in the login field on the login page. Defaults to "AD/LDAP Username".',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.SyncIntervalMinutes",label:Object(vt.b)("admin.ldap.syncIntervalTitle"),label_default:"Synchronization Interval (minutes):",help_text:Object(vt.b)("admin.ldap.syncIntervalHelpText"),help_text_default:'AD/LDAP Synchronization updates Mattermost user information to reflect updates on the AD/LDAP server. For example, when a user\'s name changes on the AD/LDAP server, the change updates in Mattermost when synchronization is performed. Accounts removed from or disabled in the AD/LDAP server have their Mattermost accounts set to "Inactive" and have their account sessions revoked. Mattermost performs synchronization on the interval entered. For example, if 60 is entered, Mattermost synchronizes every 60 minutes.',isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.MaxPageSize",label:Object(vt.b)("admin.ldap.maxPageSizeTitle"),label_default:"Maximum Page Size:",placeholder:Object(vt.b)("admin.ldap.maxPageSizeEx"),placeholder_default:'E.g.: "2000"',help_text:Object(vt.b)("admin.ldap.maxPageSizeHelpText"),help_text_default:"The maximum number of users the Mattermost server will request from the AD/LDAP server at one time. 0 is unlimited.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"LdapSettings.QueryTimeout",label:Object(vt.b)("admin.ldap.queryTitle"),label_default:"Query Timeout (seconds):",placeholder:Object(vt.b)("admin.ldap.queryEx"),placeholder_default:'E.g.: "60"',help_text:Object(vt.b)("admin.ldap.queryDesc"),help_text_default:"The timeout value for queries to the AD/LDAP server. Increase if you are getting timeout errors caused by a slow AD/LDAP server.",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_BUTTON,action:d.s,key:"LdapSettings.LdapTest",label:Object(vt.b)("admin.ldap.ldap_test_button"),label_default:"AD/LDAP Test",help_text:Object(vt.b)("admin.ldap.testHelpText"),help_text_markdown:!0,help_text_default:'Tests if the Mattemost server can connect to the AD/LDAP server specified. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',error_message:Object(vt.b)("admin.ldap.testFailure"),error_message_default:"AD/LDAP Test Failure: {error}",success_message:Object(vt.b)("admin.ldap.testSuccess"),success_message_default:"AD/LDAP Test Successful",isDisabled:jd.and(jd.stateValueFalse("LdapSettings.Enable"),jd.stateValueFalse("LdapSettings.EnableSync"))},{type:A.e.SettingsTypes.TYPE_JOBSTABLE,job_type:A.e.JobTypes.LDAP_SYNC,label:Object(vt.b)("admin.ldap.sync_button"),label_default:"AD/LDAP Synchronize Now",help_text:Object(vt.b)("admin.ldap.syncNowHelpText"),help_text_markdown:!0,help_text_default:'Initiates an AD/LDAP synchronization immediately. See the table below for status of each synchronization. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',isDisabled:jd.stateValueFalse("LdapSettings.EnableSync"),render_job:function(e){var t="0",a="0",n="0",i="0";return e&&e.data&&(e.data.mattermost_users_count&&e.data.mattermost_users_count.length>0&&(t=e.data.mattermost_users_count),e.data.ldap_users_count&&e.data.ldap_users_count.length>0&&(a=e.data.ldap_users_count),e.data.delete_count&&e.data.delete_count.length>0&&(n=e.data.delete_count),e.data.update_count&&e.data.update_count.length>0&&(i=e.data.update_count)),g.a.createElement(O.c,{id:"admin.ldap.jobExtraInfo",defaultMessage:"Scanned {ldapUsers} LDAP users, updated {updateCount}, deactivated {deleteCount}",values:{mattermostUsers:t,ldapUsers:a,deleteCount:n,updateCount:i}})}}]}},saml:{schema:{id:"SamlSettings",name:Object(vt.b)("admin.authentication.saml"),name_default:"SAML 2.0",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Enable",label:Object(vt.b)("admin.saml.enableTitle"),label_default:"Enable Login With SAML 2.0:",help_text:Object(vt.b)("admin.saml.enableDescription"),help_text_default:"When true, Mattermost allows login using SAML 2.0. Please see [documentation](!http://docs.mattermost.com/deployment/sso-saml.html) to learn more about configuring SAML for Mattermost.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"SamlSettings.EnableSyncWithLdap",label:Object(vt.b)("admin.saml.enableSyncWithLdapTitle"),label_default:"Enable Synchronizing SAML Accounts With AD/LDAP:",help_text:Object(vt.b)("admin.saml.enableSyncWithLdapDescription"),help_text_default:"When true, Mattermost periodically synchronizes SAML user attributes, including user deactivation and removal, from AD/LDAP. Enable and configure synchronization settings at **Authentication > AD/LDAP**. When false, user attributes are updated from SAML during user login. See [documentation](!https://about.mattermost.com/default-saml-ldap-sync) to learn more.",help_text_markdown:!0,isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"SamlSettings.EnableSyncWithLdapIncludeAuth",label:Object(vt.b)("admin.saml.enableSyncWithLdapIncludeAuthTitle"),label_default:"Enable Synchronizing SAML Accounts With AD/LDAP:",help_text:Object(vt.b)("admin.saml.enableSyncWithLdapIncludeAuthDescription"),help_text_default:"When true, Mattermost will override the SAML ID attribute with the AD/LDAP ID attribute if configured or override the SAML Email attribute with the AD/LDAP Email attribute if SAML ID attribute is not present.  This will allow you automatically migrate users from Email binding to ID binding to prevent creation of new users when an email address changes for a user. Moving from true to false, will remove the override from happening.\n \n**Note:** SAML IDs must match the LDAP IDs to prevent disabling of user accounts.  Please review [documentation](!https://docs.mattermost.com/deployment/sso-saml-ldapsync.html) for more information.",help_text_markdown:!0,isDisabled:jd.or(jd.stateValueFalse("SamlSettings.Enable"),jd.stateValueFalse("SamlSettings.EnableSyncWithLdap"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdpUrl",label:Object(vt.b)("admin.saml.idpUrlTitle"),label_default:"SAML SSO URL:",help_text:Object(vt.b)("admin.saml.idpUrlDesc"),help_text_default:"The URL where Mattermost sends a SAML request to start login sequence.",placeholder:Object(vt.b)("admin.saml.idpUrlEx"),placeholder_default:'E.g.: "https://idp.example.org/SAML2/SSO/Login"',isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdpDescriptorUrl",label:Object(vt.b)("admin.saml.idpDescriptorUrlTitle"),label_default:"Identity Provider Issuer URL:",help_text:Object(vt.b)("admin.saml.idpDescriptorUrlDesc"),help_text_default:"The issuer URL for the Identity Provider you use for SAML requests.",placeholder:Object(vt.b)("admin.saml.idpDescriptorUrlEx"),placeholder_default:'E.g.: "https://idp.example.org/SAML2/issuer"',isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.IdpCertificateFile",label:Object(vt.b)("admin.saml.idpCertificateFileTitle"),label_default:"Identity Provider Public Certificate:",help_text:Object(vt.b)("admin.saml.idpCertificateFileDesc"),help_text_default:"The public authentication certificate issued by your Identity Provider.",remove_help_text:Object(vt.b)("admin.saml.idpCertificateFileRemoveDesc"),remove_help_text_default:"Remove the public authentication certificate issued by your Identity Provider.",remove_button_text:Object(vt.b)("admin.saml.remove.idp_certificate"),remove_button_text_default:"Remove Identity Provider Certificate",removing_text:Object(vt.b)("admin.saml.removing.certificate"),removing_text_default:"Removing Certificate...",uploading_text:Object(vt.b)("admin.saml.uploading.certificate"),uploading_text_default:"Uploading Certificate...",isDisabled:jd.stateValueFalse("SamlSettings.Enable"),fileType:".crt,.cer,.cert,.pem",upload_action:d.E,remove_action:d.w},{type:A.e.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Verify",label:Object(vt.b)("admin.saml.verifyTitle"),label_default:"Verify Signature:",help_text:Object(vt.b)("admin.saml.verifyDescription"),help_text_default:"When false, Mattermost will not verify that the signature sent from a SAML Response matches the Service Provider Login URL. Not recommended for production environments. For testing only.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.AssertionConsumerServiceURL",label:Object(vt.b)("admin.saml.assertionConsumerServiceURLTitle"),label_default:"Service Provider Login URL:",help_text:Object(vt.b)("admin.saml.assertionConsumerServiceURLPopulatedDesc"),help_text_default:"This field is also known as the Assertion Consumer Service URL.",placeholder:Object(vt.b)("admin.saml.assertionConsumerServiceURLEx"),placeholder_default:'E.g.: "https://<your-mattermost-url>/login/sso/saml"',isDisabled:jd.or(jd.stateValueFalse("SamlSettings.Enable"),jd.stateValueFalse("SamlSettings.Verify")),onConfigLoad:function(e,t){var a=t.ServiceSettings.SiteURL;if(a.length>0&&0===e.length){var n="/"===a[a.length-1]?"":"/";return"".concat(a).concat(n,"login/sso/saml")}return e}},{type:A.e.SettingsTypes.TYPE_BOOL,key:"SamlSettings.Encrypt",label:Object(vt.b)("admin.saml.encryptTitle"),label_default:"Enable Encryption:",help_text:Object(vt.b)("admin.saml.encryptDescription"),help_text_default:"When false, Mattermost will not decrypt SAML Assertions encrypted with your Service Provider Public Certificate. Not recommended for production environments. For testing only.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.PrivateKeyFile",label:Object(vt.b)("admin.saml.privateKeyFileTitle"),label_default:"Service Provider Private Key:",help_text:Object(vt.b)("admin.saml.privateKeyFileFileDesc"),help_text_default:"The private key used to decrypt SAML Assertions from the Identity Provider.",remove_help_text:Object(vt.b)("admin.saml.privateKeyFileFileRemoveDesc"),remove_help_text_default:"Remove the private key used to decrypt SAML Assertions from the Identity Provider.",remove_button_text:Object(vt.b)("admin.saml.remove.privKey"),remove_button_text_default:"Remove Service Provider Private Key",removing_text:Object(vt.b)("admin.saml.removing.privKey"),removing_text_default:"Removing Private Key...",uploading_text:Object(vt.b)("admin.saml.uploading.privateKey"),uploading_text_default:"Uploading Private Key...",isDisabled:jd.or(jd.stateValueFalse("SamlSettings.Enable"),jd.stateValueFalse("SamlSettings.Encrypt")),fileType:".key",upload_action:d.G,remove_action:d.y},{type:A.e.SettingsTypes.TYPE_FILE_UPLOAD,key:"SamlSettings.PublicCertificateFile",label:Object(vt.b)("admin.saml.publicCertificateFileTitle"),label_default:"Service Provider Public Certificate:",help_text:Object(vt.b)("admin.saml.publicCertificateFileDesc"),help_text_default:"The certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.",remove_help_text:Object(vt.b)("admin.saml.publicCertificateFileRemoveDesc"),remove_help_text_default:"Remove the certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.",remove_button_text:Object(vt.b)("admin.saml.remove.sp_certificate"),remove_button_text_default:"Remove Service Provider Certificate",removing_text:Object(vt.b)("admin.saml.removing.certificate"),removing_text_default:"Removing Certificate...",uploading_text:Object(vt.b)("admin.saml.uploading.certificate"),uploading_text_default:"Uploading Certificate...",isDisabled:jd.or(jd.stateValueFalse("SamlSettings.Enable"),jd.stateValueFalse("SamlSettings.Encrypt")),fileType:".crt,.cer",upload_action:d.H,remove_action:d.z},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.EmailAttribute",label:Object(vt.b)("admin.saml.emailAttrTitle"),label_default:"Email Attribute:",placeholder:Object(vt.b)("admin.saml.emailAttrEx"),placeholder_default:'E.g.: "Email" or "PrimaryEmail"',help_text:Object(vt.b)("admin.saml.emailAttrDesc"),help_text_default:"The attribute in the SAML Assertion that will be used to populate the email addresses of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.UsernameAttribute",label:Object(vt.b)("admin.saml.usernameAttrTitle"),label_default:"Username Attribute:",placeholder:Object(vt.b)("admin.saml.usernameAttrEx"),placeholder_default:'E.g.: "Username"',help_text:Object(vt.b)("admin.saml.usernameAttrDesc"),help_text_default:"The attribute in the SAML Assertion that will be used to populate the username field in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.IdAttribute",label:Object(vt.b)("admin.saml.idAttrTitle"),label_default:"Id Attribute:",placeholder:Object(vt.b)("admin.saml.idAttrEx"),placeholder_default:'E.g.: "Id"',help_text:Object(vt.b)("admin.saml.idAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to bind users from SAML to users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.FirstNameAttribute",label:Object(vt.b)("admin.saml.firstnameAttrTitle"),label_default:"First Name Attribute:",placeholder:Object(vt.b)("admin.saml.firstnameAttrEx"),placeholder_default:'E.g.: "FirstName"',help_text:Object(vt.b)("admin.saml.firstnameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the first name of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LastNameAttribute",label:Object(vt.b)("admin.saml.lastnameAttrTitle"),label_default:"Last Name Attribute:",placeholder:Object(vt.b)("admin.saml.lastnameAttrEx"),placeholder_default:'E.g.: "LastName"',help_text:Object(vt.b)("admin.saml.lastnameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the last name of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.NicknameAttribute",label:Object(vt.b)("admin.saml.nicknameAttrTitle"),label_default:"Nickname Attribute:",placeholder:Object(vt.b)("admin.saml.nicknameAttrEx"),placeholder_default:'E.g.: "Nickname"',help_text:Object(vt.b)("admin.saml.nicknameAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the nickname of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.PositionAttribute",label:Object(vt.b)("admin.saml.positionAttrTitle"),label_default:"Position Attribute:",placeholder:Object(vt.b)("admin.saml.positionAttrEx"),placeholder_default:'E.g.: "Role"',help_text:Object(vt.b)("admin.saml.positionAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the position of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LocaleAttribute",label:Object(vt.b)("admin.saml.localeAttrTitle"),label_default:"Preferred Language Attribute:",placeholder:Object(vt.b)("admin.saml.localeAttrEx"),placeholder_default:'E.g.: "Locale" or "PrimaryLanguage"',help_text:Object(vt.b)("admin.saml.localeAttrDesc"),help_text_default:"(Optional) The attribute in the SAML Assertion that will be used to populate the language of users in Mattermost.",isDisabled:jd.stateValueFalse("SamlSettings.Enable")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SamlSettings.LoginButtonText",label:Object(vt.b)("admin.saml.loginButtonTextTitle"),label_default:"Login Button Text:",placeholder:Object(vt.b)("admin.saml.loginButtonTextEx"),placeholder_default:'E.g.: "With OKTA"',help_text:Object(vt.b)("admin.saml.loginButtonTextDesc"),help_text_default:'(Optional) The text that appears in the login button on the login page. Defaults to "With SAML".',isDisabled:jd.stateValueFalse("SamlSettings.Enable")}]}},mfa:{schema:{id:"ServiceSettings",name:Object(vt.b)("admin.mfa.title"),name_default:"Multi-factor Authentication",settings:[{type:A.e.SettingsTypes.TYPE_BANNER,label:Object(vt.b)("admin.mfa.bannerDesc"),label_default:"[Multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is available for accounts with AD/LDAP or email login. If other login methods are used, MFA should be configured with the authentication provider.",label_markdown:!0,banner_type:"info"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableMultifactorAuthentication",label:Object(vt.b)("admin.service.mfaTitle"),label_default:"Enable Multi-factor Authentication:",help_text:Object(vt.b)("admin.service.mfaDesc"),help_text_default:"When true, users with AD/LDAP or email login can add multi-factor authentication to their account using Google Authenticator."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnforceMultifactorAuthentication",label:Object(vt.b)("admin.service.enforceMfaTitle"),label_default:"Enforce Multi-factor Authentication:",help_text:Object(vt.b)("admin.service.enforceMfaDesc"),help_text_markdown:!0,help_text_default:"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is required for login. New users will be required to configure MFA on signup. Logged in users without MFA configured are redirected to the MFA setup page until configuration is complete.\n \nIf your system has users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.",isDisabled:jd.stateValueFalse("ServiceSettings.EnableMultifactorAuthentication")}]}}},security:{signup:{schema:{id:"SignupSettings",name:Object(vt.b)("admin.security.signup"),name_default:"Signup",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"EmailSettings.RequireEmailVerification",label:Object(vt.b)("admin.email.requireVerificationTitle"),label_default:"Require Email Verification: ",help_text:Object(vt.b)("admin.email.requireVerificationDescription"),help_text_default:"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development.",disabled_help_text:Object(vt.b)("admin.security.requireEmailVerification.disabled"),disabled_help_text_default:"Email verification cannot be changed while sending emails is disabled.",isDisabled:function(e){return!e.EmailSettings.SendEmailNotifications}},{type:A.e.SettingsTypes.TYPE_GENERATED,key:"EmailSettings.InviteSalt",label:Object(vt.b)("admin.email.inviteSaltTitle"),label_default:"Email Invite Salt:",help_text:Object(vt.b)("admin.email.inviteSaltDescription"),help_text_default:'32-character salt added to signing of email invites. Randomly generated on install. Click "Regenerate" to create new salt.',disabled_help_text:Object(vt.b)("admin.security.inviteSalt.disabled"),disabled_help_text_default:"Invite salt cannot be changed while sending emails is disabled.",isDisabled:function(e){return!e.EmailSettings.SendEmailNotifications}},{type:A.e.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableOpenServer",label:Object(vt.b)("admin.team.openServerTitle"),label_default:"Enable Open Server: ",help_text:Object(vt.b)("admin.team.openServerDescription"),help_text_default:"When true, anyone can signup for a user account on this server without the need to be invited."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableEmailInvitations",label:Object(vt.b)("admin.team.emailInvitationsTitle"),label_default:"Enable Email Invitations: ",help_text:Object(vt.b)("admin.team.emailInvitationsDescription"),help_text_default:"When true users can invite others to the system using email."}]}},public_links:{schema:{id:"PublicLinkSettings",name:Object(vt.b)("admin.security.public_links"),name_default:"Public Links",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnablePublicLink",label:Object(vt.b)("admin.image.shareTitle"),label_default:"Enable Public File Links: ",help_text:Object(vt.b)("admin.image.shareDescription"),help_text_default:"Allow users to share public links to files and images."},{type:A.e.SettingsTypes.TYPE_GENERATED,key:"FileSettings.PublicLinkSalt",label:Object(vt.b)("admin.image.publicLinkTitle"),label_default:"Public Link Salt:",help_text:Object(vt.b)("admin.image.publicLinkDescription"),help_text_default:'32-character salt added to signing of public image links. Randomly generated on install. Click "Regenerate" to create new salt.'}]}},sessions:{schema:{id:"SessionsSettings",name:Object(vt.b)("admin.security.session"),name_default:"Sessions",settings:[{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthWebInDays",label:Object(vt.b)("admin.service.webSessionDays"),label_default:"Session Length AD/LDAP and Email (days):",help_text:Object(vt.b)("admin.service.webSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.",placeholder:Object(vt.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthMobileInDays",label:Object(vt.b)("admin.service.mobileSessionDays"),label_default:"Session Length Mobile (days):",help_text:Object(vt.b)("admin.service.mobileSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.",placeholder:Object(vt.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionLengthSSOInDays",label:Object(vt.b)("admin.service.ssoSessionDays"),label_default:"Session Length SSO (days):",help_text:Object(vt.b)("admin.service.ssoSessionDaysDesc"),help_text_default:"The number of days from the last time a user entered their credentials to the expiry of the users session. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Mattermost if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.",placeholder:Object(vt.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionCacheInMinutes",label:Object(vt.b)("admin.service.sessionCache"),label_default:"Session Cache (minutes):",help_text:Object(vt.b)("admin.service.sessionCacheDesc"),help_text_default:"The number of minutes to cache a session in memory.",placeholder:Object(vt.b)("admin.service.sessionDaysEx"),placeholder_default:'E.g.: "30"'},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"ServiceSettings.SessionIdleTimeoutInMinutes",label:Object(vt.b)("admin.service.sessionIdleTimeout"),label_default:"Session Idle Timeout (minutes):",help_text:Object(vt.b)("admin.service.sessionIdleTimeoutDesc"),help_text_default:"The number of minutes from the last time a user was active on the system to the expiry of the user's session. Once expired, the user will need to log in to continue. Minimum is 5 minutes, and 0 is unlimited.\n \nApplies to the desktop app and browsers. For mobile apps, use an EMM provider to lock the app when not in use. In High Availability mode, enable IP hash load balancing for reliable timeout measurement.",help_text_markdown:!0,placeholder:Object(vt.b)("admin.service.sessionIdleTimeoutEx"),placeholder_default:'E.g.: "60"',isHidden:jd.not(jd.hasLicenseFeature("Compliance")),onConfigSave:function(e){return 0!==e&&e<5?5:e}}]}},connections:{schema:{id:"ConnectionSettings",name:Object(vt.b)("admin.security.connection"),name_default:"Connections",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.AllowCorsFrom",label:Object(vt.b)("admin.service.corsTitle"),label_default:"Enable cross-origin requests from:",placeholder:Object(vt.b)("admin.service.corsEx"),placeholder_default:"http://example.com",help_text:Object(vt.b)("admin.service.corsDescription"),help_text_default:'Enable HTTP Cross origin request from a specific domain. Use "*" if you want to allow CORS from any domain or leave it blank to disable it. Should not be set to "*" in production.'},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.CorsExposedHeaders",label:Object(vt.b)("admin.service.corsExposedHeadersTitle"),label_default:"CORS Exposed Headers:",placeholder:Object(vt.b)("admin.service.corsHeadersEx"),placeholder_default:"X-My-Header",help_text:Object(vt.b)("admin.service.corsExposedHeadersDescription"),help_text_default:"Whitelist of headers that will be accessible to the requester."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.CorsAllowCredentials",label:Object(vt.b)("admin.service.corsAllowCredentialsLabel"),label_default:"CORS Allow Credentials:",help_text:Object(vt.b)("admin.service.corsAllowCredentialsDescription"),help_text_default:"When true, requests that pass validation will include the Access-Control-Allow-Credentials header."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.CorsDebug",label:Object(vt.b)("admin.service.CorsDebugLabel"),label_default:"CORS Debug:",help_text:Object(vt.b)("admin.service.corsDebugDescription"),help_text_default:'When true, prints messages to the logs to help when developing an integration that uses CORS. These messages will include the structured key value pair "source":"cors".'},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableInsecureOutgoingConnections",label:Object(vt.b)("admin.service.insecureTlsTitle"),label_default:"Enable Insecure Outgoing Connections: ",help_text:Object(vt.b)("admin.service.insecureTlsDesc"),help_text_default:"When true, any outgoing HTTPS requests will accept unverified, self-signed certificates. For example, outgoing webhooks to a server with a self-signed TLS certificate, using any domain, will be allowed. Note that this makes these connections susceptible to man-in-the-middle attacks."}]}},clientVersions:{schema:{id:"ClientVersionsSettings",name:Object(vt.b)("admin.security.client_versions"),name_default:"Client Versions",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.AndroidLatestVersion",label:Object(vt.b)("admin.client_versions.androidLatestVersion"),label_default:"Latest Android Version",help_text:Object(vt.b)("admin.client_versions.androidLatestVersionHelp"),help_text_default:"The latest released Android version",placeholder:Object(vt.b)("admin.client_versions.androidLatestVersion"),placeholder_default:"Latest Android Version"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.AndroidMinVersion",label:Object(vt.b)("admin.client_versions.androidMinVersion"),label_default:"Minimum Android Version",help_text:Object(vt.b)("admin.client_versions.androidMinVersionHelp"),help_text_default:"The minimum compliant Android version",placeholder:Object(vt.b)("admin.client_versions.androidMinVersion"),placeholder_default:"Minimum Android Version"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.DesktopLatestVersion",label:Object(vt.b)("admin.client_versions.desktopLatestVersion"),label_default:"Latest Desktop Version",help_text:Object(vt.b)("admin.client_versions.desktopLatestVersionHelp"),help_text_default:"The latest released Desktop version",placeholder:Object(vt.b)("admin.client_versions.desktopLatestVersion"),placeholder_default:"Latest Desktop Version"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.DesktopMinVersion",label:Object(vt.b)("admin.client_versions.desktopMinVersion"),label_default:"Minimum Desktop Version",help_text:Object(vt.b)("admin.client_versions.desktopMinVersionHelp"),help_text_default:"The minimum compliant Desktop version",placeholder:Object(vt.b)("admin.client_versions.desktopMinVersion"),placeholder_default:"Minimum Desktop Version"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.IosLatestVersion",label:Object(vt.b)("admin.client_versions.iosLatestVersion"),label_default:"Latest iOS Version",help_text:Object(vt.b)("admin.client_versions.iosLatestVersionHelp"),help_text_default:"The latest released iOS version",placeholder:Object(vt.b)("admin.client_versions.iosLatestVersion"),placeholder_default:"Latest iOS Version"},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ClientRequirements.IosMinVersion",label:Object(vt.b)("admin.client_versions.iosMinVersion"),label_default:"Minimum iOS Version",help_text:Object(vt.b)("admin.client_versions.iosMinVersionHelp"),help_text_default:"The minimum compliant iOS version",placeholder:Object(vt.b)("admin.client_versions.iosMinVersion"),placeholder_default:"Minimum iOS Version"}]}}},notifications:{},integrations:{custom_integrations:{schema:{id:"CustomIntegrationSettings",name:Object(vt.b)("admin.integrations.custom"),name_default:"Custom Integrations",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableIncomingWebhooks",label:Object(vt.b)("admin.service.webhooksTitle"),label_default:"Enable Incoming Webhooks: ",help_text:Object(vt.b)("admin.service.webhooksDescription"),help_text_default:"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag. See [documentation](!http://docs.mattermost.com/developer/webhooks-incoming.html) to learn more.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableOutgoingWebhooks",label:Object(vt.b)("admin.service.outWebhooksTitle"),label_default:"Enable Outgoing Webhooks: ",help_text:Object(vt.b)("admin.service.outWebhooksDesc"),help_text_default:"When true, outgoing webhooks will be allowed. See [documentation](!http://docs.mattermost.com/developer/webhooks-outgoing.html) to learn more.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableCommands",label:Object(vt.b)("admin.service.cmdsTitle"),label_default:"Enable Custom Slash Commands: ",help_text:Object(vt.b)("admin.service.cmdsDesc"),help_text_default:"When true, custom slash commands will be allowed. See [documentation](!http://docs.mattermost.com/developer/slash-commands.html) to learn more.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableOAuthServiceProvider",label:Object(vt.b)("admin.oauth.providerTitle"),label_default:"Enable OAuth 2.0 Service Provider: ",help_text:Object(vt.b)("admin.oauth.providerDescription"),help_text_default:"When true, Mattermost can act as an OAuth 2.0 service provider allowing Mattermost to authorize API requests from external applications. See [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) to learn more.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_PERMISSION,key:"ServiceSettings.EnableOnlyAdminIntegrations",label:Object(vt.b)("admin.service.integrationAdmin"),label_default:"Restrict managing integrations to Admins:",help_text:Object(vt.b)("admin.service.integrationAdminDesc"),help_text_default:"When true, webhooks and slash commands can only be created, edited and viewed by Team and System Admins, and OAuth 2.0 applications by System Admins. Integrations are available to all users after they have been created by the Admin.",permissions_mapping_name:"enableOnlyAdminIntegrations",isHidden:jd.hasLicense},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnablePostUsernameOverride",label:Object(vt.b)("admin.service.overrideTitle"),label_default:"Enable integrations to override usernames:",help_text:Object(vt.b)("admin.service.overrideDescription"),help_text_default:"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the username they are posting as. Note: Combined with allowing integrations to override profile picture icons, users may be able to perform phishing attacks by attempting to impersonate other users.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnablePostIconOverride",label:Object(vt.b)("admin.service.iconTitle"),label_default:"Enable integrations to override profile picture icons:",help_text:Object(vt.b)("admin.service.iconDescription"),help_text_default:"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the profile picture they post with. Note: Combined with allowing integrations to override usernames, users may be able to perform phishing attacks by attempting to impersonate other users.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableUserAccessTokens",label:Object(vt.b)("admin.service.userAccessTokensTitle"),label_default:"Enable User Access Tokens: ",help_text:Object(vt.b)("admin.service.userAccessTokensDescription"),help_text_default:"When true, users can create [user access tokens](!https://about.mattermost.com/default-user-access-tokens) for integrations in **Account Settings > Security**. They can be used to authenticate against the API and give full access to the account.\n\n To manage who can create personal access tokens or to search users by token ID, go to the **System Console > Users** page.",help_text_markdown:!0}]}},external:{schema:{id:"ExternalServiceSettings",name:Object(vt.b)("admin.integrations.external"),name_default:"External Services",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GoogleDeveloperKey",label:Object(vt.b)("admin.service.googleTitle"),label_default:"Google API Key:",placeholder:Object(vt.b)("admin.service.googleExample"),placeholder_default:'E.g.: "7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV"',help_text:Object(vt.b)("admin.service.googleDescription"),help_text_default:"Set this key to enable the display of titles for embedded YouTube video previews. Without the key, YouTube previews will still be created based on hyperlinks appearing in messages or comments but they will not show the video title. View a [Google Developers Tutorial](!https://www.youtube.com/watch?v=Im69kzhpR3I) for instructions on how to obtain a key and add YouTube Data API v3 as a service to your key.",help_text_markdown:!0}]}}},plugins:{configuration:{schema:{id:"PluginSettings",name:Object(vt.b)("admin.plugins.settings.title"),name_default:"Configuration",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"PluginSettings.Enable",label:Object(vt.b)("admin.plugins.settings.enable"),label_default:"Enable Plugins: ",help_text:Object(vt.b)("admin.plugins.settings.enableDesc"),help_text_default:"When true, enables plugins on your Mattermost server. Use plugins to integrate with third-party systems, extend functionality or customize the user interface of your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugins) to learn more.",help_text_markdown:!0}]}},management:{schema:{id:"PluginManagementSettings",component:ys}},custom:{schema:{id:"CustomPluginSettings",component:xs}}},files:{storage:{schema:{id:"FileSettings",name:Object(vt.b)("admin.files.storage"),name_default:"Storage",settings:[{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"FileSettings.DriverName",label:Object(vt.b)("admin.image.storeTitle"),label_default:"File Storage System:",help_text:Object(vt.b)("admin.image.storeDescription"),help_text_default:'Storage system where files and image attachments are saved.\n \nSelecting "Amazon S3" enables fields to enter your Amazon credentials and bucket details.\n \nSelecting "Local File System" enables the field to specify a local file directory.',help_text_markdown:!0,options:[{value:"local",display_name:Object(vt.b)("admin.image.storeLocal"),display_name_default:"Local File System"},{value:"amazons3",display_name:Object(vt.b)("admin.image.storeAmazonS3"),display_name_default:"Amazon S3"}]},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.Directory",label:Object(vt.b)("admin.image.localTitle"),label_default:"Local Storage Directory:",help_text:Object(vt.b)("admin.image.localDescription"),help_text_default:"Directory to which files and images are written. If blank, defaults to ./data/.",placeholder:Object(vt.b)("admin.image.localExample"),placeholder_default:'E.g.: "./data/"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","local"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Bucket",label:Object(vt.b)("admin.image.amazonS3BucketTitle"),label_default:"Amazon S3 Bucket:",help_text:Object(vt.b)("admin.image.amazonS3BucketDescription"),help_text_default:"Name you selected for your S3 bucket in AWS.",placeholder:Object(vt.b)("admin.image.amazonS3BucketExample"),placeholder_default:'E.g.: "mattermost-media"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Region",label:Object(vt.b)("admin.image.amazonS3RegionTitle"),label_default:"Amazon S3 Region:",help_text:Object(vt.b)("admin.image.amazonS3RegionDescription"),help_text_default:'AWS region you selected when creating your S3 bucket. If no region is set, Mattermost attempts to get the appropriate region from AWS, or sets it to "us-east-1" if none found.',placeholder:Object(vt.b)("admin.image.amazonS3RegionExample"),placeholder_default:'E.g.: "us-east-1"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3AccessKeyId",label:Object(vt.b)("admin.image.amazonS3IdTitle"),label_default:"Amazon S3 Access Key ID:",help_text:Object(vt.b)("admin.image.amazonS3IdDescription"),help_text_markdown:!0,help_text_default:"(Optional) Only required if you do not want to authenticate to S3 using an [IAM role](!https://about.mattermost.com/default-iam-role). Enter the Access Key ID provided by your Amazon EC2 administrator.",placeholder:Object(vt.b)("admin.image.amazonS3IdExample"),placeholder_default:'E.g.: "AKIADTOVBGERKLCBV"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3Endpoint",label:Object(vt.b)("admin.image.amazonS3EndpointTitle"),label_default:"Amazon S3 Endpoint:",help_text:Object(vt.b)("admin.image.amazonS3EndpointDescription"),help_text_default:'Hostname of your S3 Compatible Storage provider. Defaults to "s3.amazonaws.com".',placeholder:Object(vt.b)("admin.image.amazonS3EndpointExample"),placeholder_default:'E.g.: "s3.amazonaws.com"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_TEXT,key:"FileSettings.AmazonS3SecretAccessKey",label:Object(vt.b)("admin.image.amazonS3SecretTitle"),label_default:"Amazon S3 Secret Access Key:",help_text:Object(vt.b)("admin.image.amazonS3SecretDescription"),help_text_default:"(Optional) The secret access key associated with your Amazon S3 Access Key ID.",placeholder:Object(vt.b)("admin.image.amazonS3SecretExample"),placeholder_default:'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3SSL",label:Object(vt.b)("admin.image.amazonS3SSLTitle"),label_default:"Enable Secure Amazon S3 Connections:",help_text:Object(vt.b)("admin.image.amazonS3SSLDescription"),help_text_default:"When false, allow insecure connections to Amazon S3. Defaults to secure connections only.",isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3SSE",label:Object(vt.b)("admin.image.amazonS3SSETitle"),label_default:"Enable Server-Side Encryption for Amazon S3:",help_text:Object(vt.b)("admin.image.amazonS3SSEDescription"),help_text_markdown:!0,help_text_default:"When true, encrypt files in Amazon S3 using server-side encryption with Amazon S3-managed keys. See [documentation](!https://about.mattermost.com/default-server-side-encryption) to learn more.",isHidden:jd.not(jd.hasLicense),isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.AmazonS3Trace",label:Object(vt.b)("admin.image.amazonS3TraceTitle"),label_default:"Enable Amazon S3 Debugging:",help_text:Object(vt.b)("admin.image.amazonS3TraceDescription"),help_text_default:"(Development Mode) When true, log additional debugging information to the system logs.",isDisabled:jd.not(jd.stateValueEqual("FileSettings.DriverName","amazons3"))},{type:A.e.SettingsTypes.TYPE_BUTTON,action:d.C,key:"TestS3Connection",label:Object(vt.b)("admin.s3.connectionS3Test"),label_default:"Test Connection",loading:Object(vt.b)("admin.s3.testing"),loading_default:"Testing...",error_message:Object(vt.b)("admin.s3.s3Fail"),error_message_default:"Connection unsuccessful: {error}",success_message:Object(vt.b)("admin.s3.s3Success"),success_message_default:"Connection was successful"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableFileAttachments",label:Object(vt.b)("admin.file.enableFileAttachments"),label_default:"Allow File Sharing:",help_text:Object(vt.b)("admin.file.enableFileAttachmentsDesc"),help_text_default:"When false, disables file sharing on the server. All file and image uploads on messages are forbidden across clients and devices, including mobile."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableMobileUpload",label:Object(vt.b)("admin.file.enableMobileUploadTitle"),label_default:"Allow File Uploads on Mobile:",help_text:Object(vt.b)("admin.file.enableMobileUploadDesc"),help_text_default:"When false, disables file uploads on mobile apps. If Allow File Sharing is set to true, users can still upload files from a mobile web browser.",isHidden:jd.not(jd.hasLicense)},{type:A.e.SettingsTypes.TYPE_BOOL,key:"FileSettings.EnableMobileDownload",label:Object(vt.b)("admin.file.enableMobileDownloadTitle"),label_default:"Allow File Downloads on Mobile:",help_text:Object(vt.b)("admin.file.enableMobileDownloadDesc"),help_text_default:"When false, disables file downloads on mobile apps. Users can still download files from a mobile web browser.",isHidden:jd.not(jd.hasLicense)},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"FileSettings.MaxFileSize",label:Object(vt.b)("admin.image.maxFileSizeTitle"),label_default:"Maximum File Size:",help_text:Object(vt.b)("admin.image.maxFileSizeDescription"),help_text_default:"Maximum file size for message attachments in megabytes. Caution: Verify server memory can support your setting choice. Large file sizes increase the risk of server crashes and failed uploads due to network interruptions.",placeholder:Object(vt.b)("admin.image.maxFileSizeExample"),placeholder_default:"50",onConfigLoad:function(e){return e/Pd},onConfigSave:function(e){return e*Pd}},{type:A.e.SettingsTypes.TYPE_DROPDOWN,key:"ServiceSettings.ImageProxyType",label:Object(vt.b)("admin.image.proxyType"),label_default:"Image Proxy Type:",help_text:Object(vt.b)("admin.image.proxyTypeDescription"),help_text_default:"Configure an image proxy to load all Markdown images through a proxy. The image proxy prevents users from making insecure image requests, provides caching for increased performance, and automates image adjustments such as resizing. See [documentation](!https://about.mattermost.com/default-image-proxy-documentation) to learn more.",help_text_markdown:!0,options:[{value:"",display_name:Object(vt.b)("admin.image.proxyTypeNone"),display_name_default:"None"},{value:"atmos/camo",display_name:Object(vt.b)("atmos/camo"),display_name_default:"atmos/camo"}]},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.ImageProxyURL",label:Object(vt.b)("admin.image.proxyURL"),label_default:"Image Proxy URL:",help_text:Object(vt.b)("admin.image.proxyURLDescription"),help_text_default:"URL of your image proxy server.",isDisabled:jd.stateValueFalse("ServiceSettings.ImageProxyType")},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.ImageProxyOptions",label:Object(vt.b)("admin.image.proxyOptions"),label_default:"Image Proxy Options:",help_text:Object(vt.b)("admin.image.proxyOptionsDescription"),help_text_default:"Additional options such as the URL signing key. Refer to your image proxy documentation to learn more about what options are supported.",isDisabled:jd.stateValueFalse("ServiceSettings.ImageProxyType")}]}}},customization:{customBrand:{schema:{id:"CustomBrandSettings",name:Object(vt.b)("admin.customization.customBrand"),name_default:"Custom Branding",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"TeamSettings.SiteName",label:Object(vt.b)("admin.team.siteNameTitle"),label_default:"Site Name:",help_text:Object(vt.b)("admin.team.siteNameDescription"),help_text_default:"Name of service shown in login screens and UI.",placeholder:Object(vt.b)("admin.team.siteNameExample"),placeholder_default:'E.g.: "Mattermost"',max_length:A.e.MAX_SITENAME_LENGTH},{type:A.e.SettingsTypes.TYPE_TEXT,key:"TeamSettings.CustomDescriptionText",label:Object(vt.b)("admin.team.brandDescriptionTitle"),label_default:"Site Description: ",help_text:Object(vt.b)("admin.team.brandDescriptionHelp"),help_text_default:'Description of service shown in login screens and UI. When not specified, "All team communication in one place, searchable and accessible anywhere" is displayed.',placeholder:Object(vt.b)("web.root.signup_info"),placeholder_default:"All team communication in one place, searchable and accessible anywhere"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"TeamSettings.EnableCustomBrand",label:Object(vt.b)("admin.team.brandTitle"),label_default:"Enable Custom Branding: ",help_text:Object(vt.b)("admin.team.brandDesc"),help_text_default:"Enable custom branding to show an image of your choice, uploaded below, and some help text, written below, on the login page."},{type:A.e.SettingsTypes.TYPE_CUSTOM,component:Td,isDisabled:jd.stateValueFalse("TeamSettings.EnableCustomBrand"),key:"CustomBrandImage"},{type:A.e.SettingsTypes.TYPE_LONG_TEXT,key:"TeamSettings.CustomBrandText",label:Object(vt.b)("admin.team.brandTextTitle"),label_default:"Custom Brand Text:",help_text:Object(vt.b)("admin.team.brandTextDescription"),help_text_default:"Text that will appear below your custom brand image on your login screen. Supports Markdown-formatted text. Maximum 500 characters allowed.",isDisabled:jd.stateValueFalse("TeamSettings.EnableCustomBrand"),max_length:A.e.MAX_CUSTOM_BRAND_TEXT_LENGTH}]}},emoji:{schema:{id:"EmojiSettings",name:Object(vt.b)("admin.customization.emoji"),name_default:"Emoji",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableEmojiPicker",label:Object(vt.b)("admin.customization.enableEmojiPickerTitle"),label_default:"Enable Emoji Picker:",help_text:Object(vt.b)("admin.customization.enableEmojiPickerDesc"),help_text_default:"The emoji picker allows users to select emoji to add as reactions or use in messages. Enabling the emoji picker with a large number of custom emoji may slow down performance."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableCustomEmoji",label:Object(vt.b)("admin.customization.enableCustomEmojiTitle"),label_default:"Enable Custom Emoji:",help_text:Object(vt.b)("admin.customization.enableCustomEmojiDesc"),help_text_default:'Enable users to create custom emoji for use in messages. When enabled, Custom Emoji settings can be accessed by switching to a team and clicking the three dots above the channel sidebar, and selecting "Custom Emoji".'}]}},gif:{schema:{id:"EmojiSettings",name:Object(vt.b)("admin.customization.gif"),name_default:"GIF (Beta)",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableGifPicker",label:Object(vt.b)("admin.customization.enableGifPickerTitle"),label_default:"Enable GIF Picker:",help_text:Object(vt.b)("admin.customization.enableGifPickerDesc"),help_text_default:"Allow users to select GIFs from the emoji picker via a Gfycat integration."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GfycatApiKey",label:Object(vt.b)("admin.customization.gfycatApiKey"),label_default:"Gfycat API Key:",help_text:Object(vt.b)("admin.customization.gfycatApiKeyDescription"),help_text_default:"Request an API key at [https://developers.gfycat.com/signup/#](!https://developers.gfycat.com/signup/#). Enter the client ID you receive via email to this field. When blank, uses the default API key provided by Gfycat.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.GfycatApiSecret",label:Object(vt.b)("admin.customization.gfycatApiSecret"),label_default:"Gfycat API Secret:",help_text:Object(vt.b)("admin.customization.gfycatApiSecretDescription"),help_text_default:"The API secret generated by Gfycat for your API key. When blank, uses the default API secret provided by Gfycat."}]}},announcement:{schema:{id:"AnnouncementSettings",name:Object(vt.b)("admin.customization.announcement"),name_default:"Announcement Banner",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"AnnouncementSettings.EnableBanner",label:Object(vt.b)("admin.customization.announcement.enableBannerTitle"),label_default:"Enable Announcement Banner:",help_text:Object(vt.b)("admin.customization.announcement.enableBannerDesc"),help_text_default:"Enable an announcement banner across all teams."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"AnnouncementSettings.BannerText",label:Object(vt.b)("admin.customization.announcement.bannerTextTitle"),label_default:"Banner Text:",help_text:Object(vt.b)("admin.customization.announcement.bannerTextDesc"),help_text_default:"Text that will appear in the announcement banner.",isDisabled:jd.stateValueFalse("AnnouncementSettings.EnableBanner")},{type:A.e.SettingsTypes.TYPE_COLOR,key:"AnnouncementSettings.BannerColor",label:Object(vt.b)("admin.customization.announcement.bannerColorTitle"),label_default:"Banner Color:",isDisabled:jd.stateValueFalse("AnnouncementSettings.EnableBanner")},{type:A.e.SettingsTypes.TYPE_COLOR,key:"AnnouncementSettings.BannerTextColor",label:Object(vt.b)("admin.customization.announcement.bannerTextColorTitle"),label_default:"Banner Text Color:",isDisabled:jd.stateValueFalse("AnnouncementSettings.EnableBanner")},{type:A.e.SettingsTypes.TYPE_BOOL,key:"AnnouncementSettings.AllowBannerDismissal",label:Object(vt.b)("admin.customization.announcement.allowBannerDismissalTitle"),label_default:"Allow Banner Dismissal:",help_text:Object(vt.b)("admin.customization.announcement.allowBannerDismissalDesc"),help_text_default:"When true, users can dismiss the banner until its next update. When false, the banner is permanently visible until it is turned off by the System Admin.",isDisabled:jd.stateValueFalse("AnnouncementSettings.EnableBanner")}]}},posts:{schema:{id:"PostSettings",name:Object(vt.b)("admin.customization.posts"),name_default:"Posts",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableLinkPreviews",label:Object(vt.b)("admin.customization.enableLinkPreviewsTitle"),label_default:"Enable Link Previews:",help_text:Object(vt.b)("admin.customization.enableLinkPreviewsDesc"),help_text_default:"Display a preview of website content below messages, when available. Users can disable these previews from Account Settings > Display > Website Link Previews. This setting only applies to websites with OpenGraph metadata and not for image links or YouTube previews."},{type:A.e.SettingsTypes.TYPE_CUSTOM,component:io,key:"DisplaySettings.CustomUrlSchemes"}]}},legal_and_support:{schema:{id:"LegalAndSupportSettings",name:Object(vt.b)("admin.customization.support"),name_default:"Legal and Support",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.TermsOfServiceLink",label:Object(vt.b)("admin.support.termsTitle"),label_default:"Terms of Service link:",help_text:Object(vt.b)("admin.support.termsDesc"),help_text_default:'Link to the terms under which users may use your online service. By default, this includes the "Mattermost Conditions of Use (End Users)" explaining the terms under which Mattermost software is provided to end users. If you change the default link to add your own terms for using the service you provide, your new terms must include a link to the default terms so end users are aware of the Mattermost Conditions of Use (End User) for Mattermost software.'},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.PrivacyPolicyLink",label:Object(vt.b)("admin.support.privacyTitle"),label_default:"Privacy Policy link:",help_text:Object(vt.b)("admin.support.privacyDesc"),help_text_default:"The URL for the Privacy link on the login and sign-up pages. If this field is empty, the Privacy link is hidden from users."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.AboutLink",label:Object(vt.b)("admin.support.aboutTitle"),label_default:"About link:",help_text:Object(vt.b)("admin.support.aboutDesc"),help_text_default:"The URL for the About link on the Mattermost login and sign-up pages. If this field is empty, the About link is hidden from users."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.HelpLink",label:Object(vt.b)("admin.support.helpTitle"),label_default:"Help link:",help_text:Object(vt.b)("admin.support.helpDesc"),help_text_default:"The URL for the Help link on the Mattermost login page, sign-up pages, and Main Menu. If this field is empty, the Help link is hidden from users."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.ReportAProblemLink",label:Object(vt.b)("admin.support.problemTitle"),label_default:"Report a Problem link:",help_text:Object(vt.b)("admin.support.problemDesc"),help_text_default:"The URL for the Report a Problem link in the Main Menu. If this field is empty, the link is removed from the Main Menu."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"SupportSettings.SupportEmail",label:Object(vt.b)("admin.support.emailTitle"),label_default:"Support Email:",help_text:Object(vt.b)("admin.support.emailHelp"),help_text_default:"Email address displayed on email notifications and during tutorial for end users to ask support questions."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"SupportSettings.CustomTermsOfServiceEnabled",label:"admin.support.enableTermsOfServiceTitle",label_default:"Enable Custom Terms of Service (Beta)",help_text:"admin.support.termsOfServiceHelp",help_text_default:"When true, new users must accept the terms of service before accessing any Mattermost teams on desktop, web or mobile. Existing users must accept them after login or a page refresh.\n \nUsers on mobile do not have to accept the terms of service with mobile support scheduled for an upcoming release.",help_text_markdown:!0,isHidden:jd.not(jd.hasLicenseFeature("CustomTermsOfService"))},{type:A.e.SettingsTypes.TYPE_LONG_TEXT,key:"SupportSettings.CustomTermsOfServiceText",label:"admin.support.termsOfServiceTextTitle",label_default:"Custom Terms of Service Text (Beta)",isDisabled:jd.stateValueFalse("SupportSettings.CustomTermsOfServiceEnabled"),isHidden:jd.not(jd.hasLicenseFeature("CustomTermsOfService")),help_text:"admin.support.termsOfServiceTextHelp",help_text_default:"Text that will appear in your custom Terms of Service. Supports Markdown-formatted text."}]}},native_app_links:{schema:{id:"LegalAndSupportSettings",name:Object(vt.b)("admin.customization.nativeAppLinks"),name_default:"Mattermost App Links",settings:[{type:A.e.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.AppDownloadLink",label:Object(vt.b)("admin.customization.appDownloadLinkTitle"),label_default:"Mattermost Apps Download Page Link:",help_text:Object(vt.b)("admin.customization.appDownloadLinkDesc"),help_text_default:'Add a link to a download page for the Mattermost apps. When a link is present, an option to "Download Mattermost Apps" will be added in the Main Menu so users can find the download page. Leave this field blank to hide the option from the Main Menu.'},{type:A.e.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.AndroidAppDownloadLink",label:Object(vt.b)("admin.customization.androidAppDownloadLinkTitle"),label_default:"Android App Download Link:",help_text:Object(vt.b)("admin.customization.androidAppDownloadLinkDesc"),help_text_default:"Add a link to download the Android app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"NativeAppSettings.IosAppDownloadLink",label:Object(vt.b)("admin.customization.iosAppDownloadLinkTitle"),label_default:"iOS App Download Link:",help_text:Object(vt.b)("admin.customization.iosAppDownloadLinkDesc"),help_text_default:"Add a link to download the iOS app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing."}]}}},compliance:{},advanced:{rate:{schema:{id:"ServiceSettings",name:Object(vt.b)("admin.rate.title"),name_default:"Rate Limit Settings",settings:[{type:A.e.SettingsTypes.TYPE_BANNER,label:Object(vt.b)("admin.rate.noteDescription"),label_default:"Changing properties other than Site URL in this section will require a server restart before taking effect.",banner_type:"info"},{type:A.e.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.Enable",label:Object(vt.b)("admin.rate.enableLimiterTitle"),label_default:"Enable Rate Limiting:",help_text:Object(vt.b)("admin.rate.enableLimiterDescription"),help_text_default:"When true, APIs are throttled at rates specified below."},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.PerSec",label:Object(vt.b)("admin.rate.queriesTitle"),label_default:"Maximum Queries per Second:",placeholder:Object(vt.b)("admin.rate.queriesExample"),placeholder_default:'E.g.: "10"',help_text:Object(vt.b)("admin.rate.queriesDescription"),help_text_default:"Throttles API at this number of requests per second.",isDisabled:jd.stateValueEqual("RateLimitSettings.Enable",!1)},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.MaxBurst",label:Object(vt.b)("admin.rate.maxBurst"),label_default:"Maximum Burst Size:",placeholder:Object(vt.b)("admin.rate.maxBurstExample"),placeholder_default:'E.g.: "100"',help_text:Object(vt.b)("admin.rate.maxBurstDescription"),help_text_default:"Maximum number of requests allowed beyond the per second query limit.",isDisabled:jd.stateValueEqual("RateLimitSettings.Enable",!1)},{type:A.e.SettingsTypes.TYPE_NUMBER,key:"RateLimitSettings.MemoryStoreSize",label:Object(vt.b)("admin.rate.memoryTitle"),label_default:"Memory Store Size:",placeholder:Object(vt.b)("admin.rate.memoryExample"),placeholder_default:'E.g.: "10000"',help_text:Object(vt.b)("admin.rate.memoryDescription"),help_text_default:'Maximum number of users sessions connected to the system as determined by "Vary rate limit by remote address" and "Vary rate limit by HTTP header".',isDisabled:jd.stateValueEqual("RateLimitSettings.Enable",!1)},{type:A.e.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.VaryByRemoteAddr",label:Object(vt.b)("admin.rate.remoteTitle"),label_default:"Vary rate limit by remote address:",help_text:Object(vt.b)("admin.rate.remoteDescription"),help_text_default:"When true, rate limit API access by IP address.",isDisabled:jd.stateValueEqual("RateLimitSettings.Enable",!1)},{type:A.e.SettingsTypes.TYPE_BOOL,key:"RateLimitSettings.VaryByUser",label:Object(vt.b)("admin.rate.varyByUser"),label_default:"Vary rate limit by user:",help_text:Object(vt.b)("admin.rate.varyByUserDescription"),help_text_default:"When true, rate limit API access by user athentication token.",isDisabled:jd.stateValueEqual("RateLimitSettings.Enable",!1)},{type:A.e.SettingsTypes.TYPE_TEXT,key:"RateLimitSettings.VaryByHeader",label:Object(vt.b)("admin.rate.httpHeaderTitle"),label_default:"Vary rate limit by HTTP header:",placeholder:Object(vt.b)("admin.rate.httpHeaderExample"),placeholder_default:'E.g.: "X-Real-IP", "X-Forwarded-For"',help_text:Object(vt.b)("admin.rate.httpHeaderDescription"),help_text_default:'When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to "X-Real-IP", when configuring AmazonELB set to "X-Forwarded-For").',isDisabled:jd.or(jd.stateValueEqual("RateLimitSettings.Enable",!1),jd.stateValueEqual("RateLimitSettings.VaryByRemoteAddr",!0))}]}},developer:{schema:{id:"ServiceSettings",name:Object(vt.b)("admin.developer.title"),name_default:"Developer Settings",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableTesting",label:Object(vt.b)("admin.service.testingTitle"),label_default:"Enable Testing Commands:",help_text:Object(vt.b)("admin.service.testingDescription"),help_text_default:"When true, /test slash command is enabled to load test accounts, data and text formatting. Changing this requires a server restart before taking effect."},{type:A.e.SettingsTypes.TYPE_BOOL,key:"ServiceSettings.EnableDeveloper",label:Object(vt.b)("admin.service.developerTitle"),label_default:"Enable Developer Mode: ",help_text:Object(vt.b)("admin.service.developerDesc"),help_text_default:"When true, JavaScript errors are shown in a purple bar at the top of the user interface. Not recommended for use in production."},{type:A.e.SettingsTypes.TYPE_TEXT,key:"ServiceSettings.AllowedUntrustedInternalConnections",label:Object(vt.b)("admin.service.internalConnectionsTitle"),label_default:"Allow untrusted internal connections to: ",placeholder:Object(vt.b)("admin.service.internalConnectionsEx"),placeholder_default:"webhooks.internal.example.com 127.0.0.1 10.0.16.0/28",help_text:Object(vt.b)("admin.service.internalConnectionsDesc"),help_text_default:"In testing environments, such as when developing integrations locally on a development machine, use this setting to specify domains, IP addresses, or CIDR notations to allow internal connections. Separate two or more domains with spaces. **Not recommended for use in production**, since this can allow a user to extract confidential data from your server or internal network.\n \nBy default, user-supplied URLs such as those used for Open Graph metadata, webhooks, or slash commands will not be allowed to connect to reserved IP addresses including loopback or link-local addresses used for internal networks. Push notification and OAuth 2.0 server URLs are trusted and not affected by this setting.",help_text_markdown:!0}]}},metrics:{schema:{id:"MetricsSettings",name:Object(vt.b)("admin.advance.metrics"),name_default:"Performance Monitoring",settings:[{type:A.e.SettingsTypes.TYPE_BOOL,key:"MetricsSettings.Enable",label:Object(vt.b)("admin.metrics.enableTitle"),label_default:"Enable Performance Monitoring:",help_text:Object(vt.b)("admin.metrics.enableDescription"),help_text_default:"When true, Mattermost will enable performance monitoring collection and profiling. Please see [documentation](!http://docs.mattermost.com/deployment/metrics.html) to learn more about configuring performance monitoring for Mattermost.",help_text_markdown:!0},{type:A.e.SettingsTypes.TYPE_TEXT,key:"MetricsSettings.ListenAddress",label:Object(vt.b)("admin.metrics.listenAddressTitle"),label_default:"Listen Address:",placeholder:Object(vt.b)("admin.metrics.listenAddressEx"),placeholder_default:'E.g.: ":8067"',help_text:Object(vt.b)("admin.metrics.listenAddressDesc"),help_text_default:"The address the server will listen on to expose performance metrics."}]}}}},other:{license:{schema:{id:"LicenseSettings",component:po}},audits:{schema:{id:"Audits",component:Ks}}}};function Md(e){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Dd(e,t,a[t])})}return e}function Cd(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ad(e,t){return!t||"object"!==Md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ld(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}Object(vt.b)("admin.field_names.allowBannerDismissal"),Object(vt.b)("admin.field_names.bannerColor"),Object(vt.b)("admin.field_names.bannerText"),Object(vt.b)("admin.field_names.bannerTextColor"),Object(vt.b)("admin.field_names.enableBanner"),Object(vt.b)("admin.field_names.enableCommands"),Object(vt.b)("admin.field_names.enableConfirmNotificationsToChannel"),Object(vt.b)("admin.field_names.enableIncomingWebhooks"),Object(vt.b)("admin.field_names.enableOAuthServiceProvider"),Object(vt.b)("admin.field_names.enableOutgoingWebhooks"),Object(vt.b)("admin.field_names.enablePostIconOverride"),Object(vt.b)("admin.field_names.enablePostUsernameOverride"),Object(vt.b)("admin.field_names.enableUserAccessTokens"),Object(vt.b)("admin.field_names.enableUserCreation"),Object(vt.b)("admin.field_names.maxChannelsPerTeam"),Object(vt.b)("admin.field_names.maxNotificationsPerChannel"),Object(vt.b)("admin.field_names.maxUsersPerTeam"),Object(vt.b)("admin.field_names.postEditTimeLimit"),Object(vt.b)("admin.field_names.restrictCreationToDomains"),Object(vt.b)("admin.field_names.restrictDirectMessage"),Object(vt.b)("admin.field_names.teammateNameDisplay");var Id=function(e){var t=e.component,a=e.extraProps,n=Ld(e,["component","extraProps"]);return g.a.createElement(y.a,Object.assign({},n,{render:function(e){return g.a.createElement(t,Object.assign({},a,e))}}))},Ud=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ad(this,Nd(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,g.a.Component),function(e,t,a){t&&Cd(e.prototype,t),a&&Cd(e,a)}(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getConfig(),this.props.actions.getEnvironmentConfig(),this.props.actions.loadRolesIfNeeded(["channel_user","team_user","system_user","channel_admin","team_admin","system_admin"]),Object(T.u)()}},{key:"mainRolesLoaded",value:function(e){return e&&e.channel_admin&&e.channel_user&&e.team_admin&&e.team_user&&e.system_admin&&e.system_user}},{key:"render",value:function(){var e=this,t=this.props,a=t.license,n=t.config,i=t.environmentConfig,r=t.showNavigationPrompt,s=this.props.actions,o=s.setNavigationBlocked,l=s.cancelNavigation,c=s.confirmNavigation;if(!this.props.isCurrentUserSystemAdmin)return g.a.createElement(v.a,{to:"/"});if(!this.mainRolesLoaded(this.props.roles))return null;if(0===Object.keys(n).length)return g.a.createElement("div",null);if(n&&0===Object.keys(n).length&&"Object"===n.constructor)return g.a.createElement("div",{className:"admin-console__wrapper"},g.a.createElement(_.a,null),g.a.createElement("div",{className:"admin-console"}));var u=g.a.createElement(ei,{show:r,onConfirm:c,onCancel:l}),m={license:a,config:n,environmentConfig:i,setNavigationBlocked:o};return g.a.createElement("div",{className:"admin-console__wrapper"},g.a.createElement(_.a,null),g.a.createElement(S.a,null),g.a.createElement($i,null),g.a.createElement("div",{className:"admin-console"},g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(this.props.match.url,"/system_analytics"),component:zn,extraProps:kd({},m,{schema:xd.reporting.system_analytics.schema})}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/general"),render:function(t){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(t.match.url,"/configuration"),component:zn,extraProps:kd({},m,{schema:xd.settings.general.configuration.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/localization"),component:zn,extraProps:kd({},m,{schema:xd.settings.general.localization.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/users_and_teams"),component:zn,extraProps:kd({},m,{roles:e.props.roles,editRole:e.props.actions.editRole,schema:xd.settings.general.users_and_teams.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/privacy"),component:zn,extraProps:kd({},m,{schema:xd.settings.general.privacy.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/compliance"),component:zn,extraProps:kd({},m,{schema:xd.settings.general.compliance.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/logging"),component:zn,extraProps:kd({},m,{schema:xd.settings.general.logging.schema})}),g.a.createElement(v.a,{to:"".concat(t.match.url,"/configuration")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/permissions"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/schemes"),component:zn,extraProps:kd({},m,{schema:xd.settings.permissions.schemes.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/system-scheme"),component:zn,extraProps:kd({},m,{schema:xd.settings.permissions.systemScheme.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/team-override-scheme/:scheme_id"),component:zn,extraProps:kd({},m,{schema:xd.settings.permissions.teamScheme.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/team-override-scheme"),component:zn,extraProps:kd({},m,{schema:xd.settings.permissions.teamScheme.schema})}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/authentication"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/authentication_email"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.email.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/gitlab"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.gitlab.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/oauth"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.oauth.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/ldap"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.ldap.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/saml"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.saml.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/mfa"),component:zn,extraProps:kd({},m,{schema:xd.settings.authentication.mfa.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/authentication_email")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/security"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/sign_up"),component:zn,extraProps:kd({},m,{schema:xd.settings.security.signup.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/password"),component:ka,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/public_links"),component:zn,extraProps:kd({},m,{schema:xd.settings.security.public_links.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/sessions"),component:zn,extraProps:kd({},m,{schema:xd.settings.security.sessions.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/connections"),component:zn,extraProps:kd({},m,{schema:xd.settings.security.connections.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/client_versions"),component:zn,extraProps:kd({},m,{schema:xd.settings.security.clientVersions.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/sign_up")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/notifications"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/notifications_email"),component:oa,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/push"),component:Xn,extraProps:m}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/notifications_email")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/integrations"),render:function(t){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(t.match.url,"/custom"),component:zn,extraProps:kd({},m,{roles:e.props.roles,editRole:e.props.actions.editRole,schema:xd.settings.integrations.custom_integrations.schema})}),g.a.createElement(Id,{path:"".concat(t.match.url,"/external"),component:zn,extraProps:kd({},m,{schema:xd.settings.integrations.external.schema})}),g.a.createElement(v.a,{to:"".concat(t.match.url,"/custom")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/plugins"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/configuration"),component:zn,extraProps:kd({},m,{schema:xd.settings.plugins.configuration.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/management"),component:zn,extraProps:kd({},m,{schema:xd.settings.plugins.management.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/custom/:plugin_id"),component:zn,extraProps:kd({},m,{schema:xd.settings.plugins.custom.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/configuration")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/files"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/storage"),component:zn,extraProps:kd({},m,{schema:xd.settings.files.storage.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/storage")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/customization"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/custom_brand"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.customBrand.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/announcement"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.announcement.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/emoji"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.emoji.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/gif"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.gif.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/posts"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.posts.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/legal_and_support"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.legal_and_support.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/native_app_links"),component:zn,extraProps:kd({},m,{schema:xd.settings.customization.native_app_links.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/custom_brand")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/compliance"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/data_retention"),component:yt,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/message_export"),component:Oa,extraProps:m}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/data_retention")}))}}),g.a.createElement(y.a,{path:"".concat(this.props.match.url,"/advanced"),render:function(e){return g.a.createElement(E.a,null,g.a.createElement(Id,{path:"".concat(e.match.url,"/rate"),component:zn,extraProps:kd({},m,{schema:xd.settings.advanced.rate.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/database"),component:At,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/elasticsearch"),component:Ut,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/developer"),component:zn,extraProps:kd({},m,{schema:xd.settings.advanced.developer.schema})}),g.a.createElement(Id,{path:"".concat(e.match.url,"/cluster"),component:De,extraProps:m}),g.a.createElement(Id,{path:"".concat(e.match.url,"/metrics"),component:zn,extraProps:kd({},m,{schema:xd.settings.advanced.metrics.schema})}),g.a.createElement(v.a,{to:"".concat(e.match.url,"/rate")}))}}),g.a.createElement(Id,{path:"".concat(this.props.match.url,"/users"),component:zn,extraProps:kd({},m,{schema:xd.reporting.system_users.schema})}),g.a.createElement(Id,{path:"".concat(this.props.match.url,"/team_analytics"),component:zn,extraProps:kd({},m,{schema:xd.reporting.team_analytics.schema})}),g.a.createElement(Id,{path:"".concat(this.props.match.url,"/license"),component:zn,extraProps:kd({},m,{schema:xd.other.license.schema})}),g.a.createElement(Id,{path:"".concat(this.props.match.url,"/audits"),component:zn,extraProps:kd({},m,{schema:xd.other.audits.schema})}),g.a.createElement(Id,{path:"".concat(this.props.match.url,"/logs"),component:zn,extraProps:kd({},m,{schema:xd.reporting.server_logs.schema})}),g.a.createElement(v.a,{to:"".concat(this.props.match.url,"/system_analytics")}))),u)}}]),t}();Dd(Ud,"propTypes",{config:b.a.object.isRequired,environmentConfig:b.a.object,license:b.a.object.isRequired,roles:b.a.object.isRequired,match:b.a.shape({url:b.a.string.isRequired}).isRequired,showNavigationPrompt:b.a.bool.isRequired,isCurrentUserSystemAdmin:b.a.bool.isRequired,actions:b.a.shape({getConfig:b.a.func.isRequired,getEnvironmentConfig:b.a.func.isRequired,setNavigationBlocked:b.a.func.isRequired,confirmNavigation:b.a.func.isRequired,cancelNavigation:b.a.func.isRequired,loadRolesIfNeeded:b.a.func.isRequired,editRole:b.a.func.isRequired}).isRequired});t.default=Object(l.a)(Object(n.connect)(function(e){return{config:o.getConfig(e),environmentConfig:o.getEnvironmentConfig(e),license:Object(c.getLicense)(e),navigationBlocked:Object(p.a)(e),showNavigationPrompt:Object(p.c)(e),isCurrentUserSystemAdmin:Object(m.isCurrentUserSystemAdmin)(e),roles:Object(u.getRoles)(e)}},function(e){return{actions:Object(i.bindActionCreators)({getConfig:r.getConfig,getEnvironmentConfig:r.getEnvironmentConfig,setNavigationBlocked:d.B,deferNavigation:d.g,cancelNavigation:d.e,confirmNavigation:d.f,loadRolesIfNeeded:s.loadRolesIfNeeded,editRole:s.editRole},e)}})(Ud))},844:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return c});a(99),a(96),a(93),a(237),a(140),a(142),a(73),a(72),a(97),a(147),a(249),a(20),a(25),a(24);var n=a(12),i=regeneratorRuntime.mark(u);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o={enableTeamCreation:{true:[{roleName:"system_user",permission:n.Permissions.CREATE_TEAM,shouldHave:!0}],false:[{roleName:"system_user",permission:n.Permissions.CREATE_TEAM,shouldHave:!1}]},editOthersPosts:{true:[{roleName:"system_admin",permission:n.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0},{roleName:"team_admin",permission:n.Permissions.EDIT_OTHERS_POSTS,shouldHave:!0}],false:[{roleName:"team_admin",permission:n.Permissions.EDIT_OTHERS_POSTS,shouldHave:!1},{roleName:"system_admin",permission:n.Permissions.EDIT_OTHERS_POSTS,shouldHave:!1}]},enableOnlyAdminIntegrations:{true:[{roleName:"team_user",permission:n.Permissions.MANAGE_WEBHOOKS,shouldHave:!1},{roleName:"team_user",permission:n.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!1},{roleName:"system_user",permission:n.Permissions.MANAGE_OAUTH,shouldHave:!1}],false:[{roleName:"team_user",permission:n.Permissions.MANAGE_WEBHOOKS,shouldHave:!0},{roleName:"team_user",permission:n.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!0},{roleName:"system_user",permission:n.Permissions.MANAGE_OAUTH,shouldHave:!0}]}};function l(e,t){var a=JSON.parse(JSON.stringify(t));return function(e){var t=function(){var e=[];return Object.values(o).forEach(function(t){Object.values(t).forEach(function(t){var a=t.map(function(e){return e.roleName});e=e.concat(a)})}),r(new Set(e.map(function(e){return e})))}();Object.keys(e).forEach(function(a){t.includes(a)||delete e[a]})}(a),Object.keys(o).forEach(function(t){var n=e[t];n&&function(e,t,a){var n=o[e][t];if(void 0===n)throw new Error("Value '".concat(t,"' not present in MAPPING for key '").concat(e,"'."));n.forEach(function(e){var t=a[e.roleName];e.shouldHave?function(e,t){t.permissions.includes(e)||t.permissions.push(e)}(e.permission,t):function(e,t){var a=t.permissions.indexOf(e);-1!==a&&t.permissions.splice(a,1)}(e.permission,t)})}(t,n,a)}),Object.entries(a).forEach(function(e){var n=s(e,2),i=n[0],o=n[1],l=new Set(t[i].permissions),c=new Set(o.permissions),u=r(c).filter(function(e){return!l.has(e)});l.size===c.size&&0===u.length&&delete a[i]}),a}function c(e,t){var a=!0,n=!1,i=void 0;try{for(var r,s=u(o[e],t)[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var l=r.value;if(l.allConditionsAreMet)return l.value}}catch(e){n=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}throw new Error("No matching mapping value found for key '".concat(e,"' with the given roles."))}function u(e,t){var a,n,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=regeneratorRuntime.keys(e);case 1:if((i.t1=i.t0()).done){i.next=10;break}if(a=i.t1.value,!e.hasOwnProperty(a)){i.next=8;break}return n=e[a],r=n.some(function(e){var a=t[e.roleName];return e.shouldHave&&!a.permissions.includes(e.permission)||!e.shouldHave&&a.permissions.includes(e.permission)}),i.next=8,{value:a,allConditionsAreMet:!r};case 8:i.next=1;break;case 10:case"end":return i.stop()}},i,this)}},850:function(e,t,a){"use strict";var n=a(134),i=a(538),r=a(547),s=(a(235),a(233),a(5)),o=a.n(s),l=a(10),c=a.n(l),u=a(536),m=a(535),d=a(19),p=Object(u.g)({sessionRevoked:{id:Object(d.b)("audit_table.sessionRevoked"),defaultMessage:"The session with id {sessionId} was revoked"},channelCreated:{id:Object(d.b)("audit_table.channelCreated"),defaultMessage:"Created the {channelName} channel"},establishedDM:{id:Object(d.b)("audit_table.establishedDM"),defaultMessage:"Established a direct message channel with {username}"},nameUpdated:{id:Object(d.b)("audit_table.nameUpdated"),defaultMessage:"Updated the {channelName} channel name"},headerUpdated:{id:Object(d.b)("audit_table.headerUpdated"),defaultMessage:"Updated the {channelName} channel header"},channelDeleted:{id:Object(d.b)("audit_table.channelDeleted"),defaultMessage:"Archived the channel with the URL {url}"},userAdded:{id:Object(d.b)("audit_table.userAdded"),defaultMessage:"Added {username} to the {channelName} channel"},userRemoved:{id:Object(d.b)("audit_table.userRemoved"),defaultMessage:"Removed {username} to the {channelName} channel"},attemptedRegisterApp:{id:Object(d.b)("audit_table.attemptedRegisterApp"),defaultMessage:"Attempted to register a new OAuth Application with ID {id}"},attemptedAllowOAuthAccess:{id:Object(d.b)("audit_table.attemptedAllowOAuthAccess"),defaultMessage:"Attempted to allow a new OAuth service access"},successfullOAuthAccess:{id:Object(d.b)("audit_table.successfullOAuthAccess"),defaultMessage:"Successfully gave a new OAuth service access"},failedOAuthAccess:{id:Object(d.b)("audit_table.failedOAuthAccess"),defaultMessage:"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback"},attemptedOAuthToken:{id:Object(d.b)("audit_table.attemptedOAuthToken"),defaultMessage:"Attempted to get an OAuth access token"},successfullOAuthToken:{id:Object(d.b)("audit_table.successfullOAuthToken"),defaultMessage:"Successfully added a new OAuth service"},oauthTokenFailed:{id:Object(d.b)("audit_table.oauthTokenFailed"),defaultMessage:"Failed to get an OAuth access token - {token}"},attemptedLogin:{id:Object(d.b)("audit_table.attemptedLogin"),defaultMessage:"Attempted to login"},authenticated:{id:Object(d.b)("audit_table.authenticated"),defauleMessage:"Successfully authenticated"},successfullLogin:{id:Object(d.b)("audit_table.successfullLogin"),defaultMessage:"Successfully logged in"},failedLogin:{id:Object(d.b)("audit_table.failedLogin"),defaultMessage:"FAILED login attempt"},updatePicture:{id:Object(d.b)("audit_table.updatePicture"),defaultMessage:"Updated your profile picture"},updateGeneral:{id:Object(d.b)("audit_table.updateGeneral"),defaultMessage:"Updated the general settings of your account"},attemptedPassword:{id:Object(d.b)("audit_table.attemptedPassword"),defaultMessage:"Attempted to change password"},successfullPassword:{id:Object(d.b)("audit_table.successfullPassword"),defaultMessage:"Successfully changed password"},failedPassword:{id:Object(d.b)("audit_table.failedPassword"),defaultMessage:"Failed to change password - tried to update user password who was logged in through OAuth"},updatedRol:{id:Object(d.b)("audit_table.updatedRol"),defaultMessage:"Updated user role(s) to "},member:{id:Object(d.b)("audit_table.member"),defaultMessage:"member"},accountActive:{id:Object(d.b)("audit_table.accountActive"),defaultMessage:"Account activated"},accountInactive:{id:Object(d.b)("audit_table.accountInactive"),defaultMessage:"Account deactivated"},by:{id:Object(d.b)("audit_table.by"),defaultMessage:" by {username}"},byAdmin:{id:Object(d.b)("audit_table.byAdmin"),defaultMessage:" by an admin"},sentEmail:{id:Object(d.b)("audit_table.sentEmail"),defaultMessage:"Sent an email to {email} to reset your password"},attemptedReset:{id:Object(d.b)("audit_table.attemptedReset"),defaultMessage:"Attempted to reset password"},successfullReset:{id:Object(d.b)("audit_table.successfullReset"),defaultMessage:"Successfully reset password"},updateGlobalNotifications:{id:Object(d.b)("audit_table.updateGlobalNotifications"),defaultMessage:"Updated your global notification settings"},attemptedWebhookCreate:{id:Object(d.b)("audit_table.attemptedWebhookCreate"),defaultMessage:"Attempted to create a webhook"},succcessfullWebhookCreate:{id:Object(d.b)("audit_table.successfullWebhookCreate"),defaultMessage:"Successfully created a webhook"},failedWebhookCreate:{id:Object(d.b)("audit_table.failedWebhookCreate"),defaultMessage:"Failed to create a webhook - bad channel permissions"},attemptedWebhookDelete:{id:Object(d.b)("audit_table.attemptedWebhookDelete"),defaultMessage:"Attempted to delete a webhook"},successfullWebhookDelete:{id:Object(d.b)("audit_table.successfullWebhookDelete"),defaultMessage:"Successfully deleted a webhook"},failedWebhookDelete:{id:Object(d.b)("audit_table.failedWebhookDelete"),defaultMessage:"Failed to delete a webhook - inappropriate conditions"},logout:{id:Object(d.b)("audit_table.logout"),defaultMessage:"Logged out of your account"},verified:{id:Object(d.b)("audit_table.verified"),defaultMessage:"Successfully verified your email address"},revokedAll:{id:Object(d.b)("audit_table.revokedAll"),defaultMessage:"Revoked all current sessions for the team"},loginAttempt:{id:Object(d.b)("audit_table.loginAttempt"),defaultMessage:" (Login attempt)"},loginFailure:{id:Object(d.b)("audit_table.loginFailure"),defaultMessage:" (Login failure)"},attemptedLicenseAdd:{id:Object(d.b)("audit_table.attemptedLicenseAdd"),defaultMessage:"Attempted to add new license"},successfullLicenseAdd:{id:Object(d.b)("audit_table.successfullLicenseAdd"),defaultMessage:"Successfully added new license"},failedExpiredLicenseAdd:{id:Object(d.b)("audit_table.failedExpiredLicenseAdd"),defaultMessage:"Failed to add a new license as it has either expired or not yet been started"},failedInvalidLicenseAdd:{id:Object(d.b)("audit_table.failedInvalidLicenseAdd"),defaultMessage:"Failed to add an invalid license"},licenseRemoved:{id:Object(d.b)("audit_table.licenseRemoved"),defaultMessage:"Successfully removed a license"}});function f(e){for(var t,a,n,i=[],r=e.intl.formatMessage,s=0;s<e.audits.length;s++){var o=e.audits[s],l=h(o,r,e.currentUser,e.getByName,e.getUser),m=void 0;if(e.showUserId){var d=e.getUser(l.userId),p=d?d.email:l.userId;m=c.a.createElement("td",{className:"word-break--all"},p)}var f=void 0;e.showIp&&(f=c.a.createElement("td",{className:"whitespace--nowrap word-break--all"},l.ip));var b=void 0;e.showSession&&(b=c.a.createElement("td",{className:"whitespace--nowrap word-break--all"},l.sessionId));var g="";-1!==l.desc.toLowerCase().indexOf("fail")&&(g=" color--error"),i[s]=c.a.createElement("tr",{key:o.id},c.a.createElement("td",{className:"whitespace--nowrap word-break--all"},l.timestamp),m,c.a.createElement("td",{className:"word-break--all"+g},l.desc),f,b)}return e.showUserId&&(t=c.a.createElement("th",null,c.a.createElement(u.c,{id:"audit_table.userId",defaultMessage:"User ID"}))),e.showIp&&(a=c.a.createElement("th",null,c.a.createElement(u.c,{id:"audit_table.ip",defaultMessage:"IP Address"}))),e.showSession&&(n=c.a.createElement("th",null,c.a.createElement(u.c,{id:"audit_table.session",defaultMessage:"Session ID"}))),c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement(u.c,{id:"audit_table.timestamp",defaultMessage:"Timestamp"})),t,c.a.createElement("th",null,c.a.createElement(u.c,{id:"audit_table.action",defaultMessage:"Action"})),a,n)),c.a.createElement("tbody",null,i))}f.propTypes={intl:u.i.isRequired,audits:o.a.array.isRequired,showUserId:o.a.bool,showIp:o.a.bool,showSession:o.a.bool,currentUser:o.a.object.isRequired,getUser:o.a.func.isRequired,getByName:o.a.func.isRequired};var b=Object(u.h)(f);function h(e,t,a,n,i){var r=e.action.replace(/\/api\/v[1-9]/,""),s="";if(0===r.indexOf("/channels")){var o,l=e.extra_info.split(" "),d=l[0].split("="),f="",b="";switch(d.indexOf("name")>=0&&(b=(o=n(f=d[d.indexOf("name")+1]))?o.display_name:f),r){case"/channels/create":s=t(p.channelCreated,{channelName:b});break;case"/channels/create_direct":s=t(p.establishedDM,{username:Object(m.getDirectTeammate)(o.id).username});break;case"/channels/update":s=t(p.nameUpdated,{channelName:b});break;case"/channels/update_desc":case"/channels/update_header":s=t(p.headerUpdated,{channelName:b});break;default:var h=[],g="";if(l[1]&&(h=l[1].split("=")).indexOf("user_id")>=0){var y=i(h[h.indexOf("user_id")+1]);y&&(g=y.username)}/\/channels\/[A-Za-z0-9]+\/delete/.test(r)?s=t(p.channelDeleted,{url:f}):/\/channels\/[A-Za-z0-9]+\/add/.test(r)?s=t(p.userAdded,{username:g,channelName:b}):/\/channels\/[A-Za-z0-9]+\/remove/.test(r)&&(s=t(p.userRemoved,{username:g,channelName:b}))}}else if(0===r.indexOf("/oauth")){var v=e.extra_info.split(" ");switch(r){case"/oauth/register":var E=v[0].split("=");"client_id"===E[0]&&(s=t(p.attemptedRegisterApp,{id:E[1]}));break;case"/oauth/allow":"attempt"===v[0]?s=t(p.attemptedAllowOAuthAccess):"success"===v[0]?s=t(p.successfullOAuthAccess):"fail - redirect_uri did not match registered callback"===v[0]&&(s=t(p.failedOAuthAccess));break;case"/oauth/access_token":if("attempt"===v[0])s=t(p.attemptedOAuthToken);else if("success"===v[0])s=t(p.successfullOAuthToken);else{var _=v[0].split("-");"fail"===_[0].trim()&&_[1]&&(s=t(_,{token:_[1].trim()}))}}}else if(0===r.indexOf("/users")){var S=e.extra_info.split(" ");switch(r){case"/users/login":"attempt"===S[0]?s=t(p.attemptedLogin):"success"===S[0]?s=t(p.successfullLogin):"authenticated"===S[0]?s=t(p.authenticated):S[0]&&(s=t(p.failedLogin));break;case"/users/revoke_session":s=t(p.sessionRevoked,{sessionId:S[0].split("=")[1]});break;case"/users/newimage":s=t(p.updatePicture);break;case"/users/update":s=t(p.updateGeneral);break;case"/users/newpassword":"attempted"===S[0]?s=t(p.attemptedPassword):"completed"===S[0]?s=t(p.successfullPassword):"failed - tried to update user password who was logged in through oauth"===S[0]&&(s=t(p.failedPassword));break;case"/users/update_roles":var T=S[0].split("=")[1];s=t(p.updatedRol),T.trim()?s+=T:s+=t(p.member);break;case"/users/update_active":var O=S[0].split("=")[0],w=S[0].split("=")[1];if("active"===O){"true"===w?s=t(p.accountActive):"false"===w&&(s=t(p.accountInactive));var P=S[1].split("=");if("session_user"===P[0]){var j=i(P[1]),x=a;x&&j&&Object(m.isSystemAdmin)(x.roles)?s+=t(p.by,{username:j.username}):x&&j&&(s+=t(p.byAdmin))}}else"session_id"===O&&(s=t(p.sessionRevoked,{sessionId:w}));break;case"/users/send_password_reset":s=t(p.sentEmail,{email:S[0].split("=")[1]});break;case"/users/reset_password":"attempt"===S[0]?s=t(p.attemptedReset):"success"===S[0]&&(s=t(p.successfullReset));break;case"/users/update_notify":s=t(p.updateGlobalNotifications)}}else if(0===r.indexOf("/hooks")){var M=e.extra_info;switch(r){case"/hooks/incoming/create":"attempt"===M?s=t(p.attemptedWebhookCreate):"success"===M?s=t(p.succcessfullWebhookCreate):"fail - bad channel permissions"===M&&(s=t(p.failedWebhookCreate));break;case"/hooks/incoming/delete":"attempt"===M?s=t(p.attemptedWebhookDelete):"success"===M?s=t(p.successfullWebhookDelete):"fail - inappropriate conditions"===M&&(s=t(p.failedWebhookDelete))}}else if(0===r.indexOf("/license")){var k=e.extra_info;switch(r){case"/license/add":"attempt"===k?s=t(p.attemptedLicenseAdd):"success"===k?s=t(p.successfullLicenseAdd):"failed - expired or non-started license"===k?s=t(p.failedExpiredLicenseAdd):"failed - invalid license"===k&&(s=t(p.failedInvalidLicenseAdd));break;case"/license/remove":s=t(p.licenseRemoved)}}else if(0===r.indexOf("/admin/download_compliance_report"))s=Object(m.toTitleCase)(e.extra_info);else switch(r){case"/logout":s=t(p.logout);break;case"/verify_email":s=t(p.verified)}if(!s)if(e.extra_info.indexOf("revoked_all=")>=0)s=t(p.revokedAll);else{var C="";r&&-1!==r.lastIndexOf("/")&&(C=r.substring(r.lastIndexOf("/")+1).replace("_"," "),C=Object(m.toTitleCase)(C));var A="";e.extra_info&&-1!==(A=e.extra_info).indexOf("=")&&(A=A.substring(A.indexOf("=")+1)),s=C+" "+A}var N=new Date(e.create_at),R={};return R.timestamp=c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(u.a,{value:N,day:"2-digit",month:"short",year:"numeric"})),c.a.createElement("div",null,c.a.createElement(u.d,{value:N,hour:"2-digit",minute:"2-digit"}))),R.userId=e.user_id,R.desc=s,R.ip=e.ip_address,R.sessionId=e.session_id,R}t.a=Object(n.connect)(function(e){return{currentUser:Object(i.getCurrentUser)(e),getUser:function(t){return Object(i.getUser)(e,t)},getByName:function(t){return Object(r.getChannelByName)(e,t)}}})(b)}}]);
//# sourceMappingURL=13.3277213734fedd6288d7.js.map