(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1886:function(e,t,r){"use strict";r.r(t);var a=r(134),n=r(47),i=(r(73),r(72),r(234),r(136),r(5)),o=r.n(i),s=r(10),c=r.n(s),l=r(736),m=r(669),u=r(536),f=r(76),d=r(549),g=r(553),p=r(639),v=r(550),y=r(555),h=r(137),b=r(759),E=r(583),S=r(535),O=r(0);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(L(L(r=function(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?L(e):t}(this,k(t).call(this,e)))),"getTermsOfService",function(){r.setState({customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0}),Object(g.l)(function(e){r.setState({customTermsOfServiceId:e.id,customTermsOfServiceText:e.text,loading:!1})},function(){d.p("/login?extra=".concat(O.e.GET_TERMS_ERROR))})}),P(L(L(r)),"handleLogoutClick",function(e){e.preventDefault(),d.p("/login")}),P(L(L(r)),"handleAcceptTerms",function(){r.setState({loadingAgree:!0,serverError:null}),r.registerUserAction(!0,function(){var e=new URLSearchParams(r.props.location.search).get("redirect_to");e&&e.match(/^\/([^/]|$)/)?h.a.push(e):d.t()})}),P(L(L(r)),"handleRejectTerms",function(){r.setState({loadingDisagree:!0,serverError:null}),r.registerUserAction(!1,function(){d.p("/login?extra=".concat(O.e.TERMS_REJECTED))})}),P(L(L(r)),"registerUserAction",function(e,t){Object(g.I)(r.state.customTermsOfServiceId,e,t,function(){r.setState({loadingAgree:!1,loadingDisagree:!1,serverError:c.a.createElement(u.c,{id:"terms_of_service.api_error",defaultMessage:"Unable to complete the request. If this issue persists, contact your System Administrator."})})})}),r.state={customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0,loadingAgree:!1,loadingDisagree:!1,serverError:null},r.formattedText=Object(f.memoizeResult)(function(e){return Object(E.e)(e)}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,c.a.PureComponent),function(e,t,r){t&&_(e.prototype,t),r&&_(e,r)}(t,[{key:"componentDidMount",value:function(){this.props.termsEnabled?this.getTermsOfService():d.t()}},{key:"render",value:function(){return this.state.loading?c.a.createElement(y.a,null):c.a.createElement("div",null,c.a.createElement(p.a,null),c.a.createElement("div",{className:"signup-header"},c.a.createElement("a",{href:"#",onClick:this.handleLogoutClick},c.a.createElement("span",{className:"fa fa-chevron-left",title:S.localizeMessage("generic_icons.logout","Logout Icon")}),c.a.createElement(u.c,{id:"web.header.logout",defaultMessage:"Logout"}))),c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("div",{className:"signup-team__container padding--less max-width--more"},c.a.createElement("div",null,c.a.createElement("h2",null,c.a.createElement(u.c,{id:"terms_of_service.title",defaultMessage:"Terms of Service"}))),c.a.createElement("div",{className:"signup__markdown min-height--fill"},Object(b.a)(this.formattedText(this.state.customTermsOfServiceText),!1,{mentions:!1})),c.a.createElement("div",{className:"margin--extra"},c.a.createElement(l.a,null,c.a.createElement(m.a,{bsStyle:"primary",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"acceptTerms",onClick:this.handleAcceptTerms,type:"submit"},this.state.loadingAgree&&c.a.createElement("span",{className:"fa fa-refresh icon--rotate",title:S.localizeMessage("generic_icons.loading","Loading Icon")}),c.a.createElement(u.c,{id:"terms_of_service.agreeButton",defaultMessage:"I Agree"})),c.a.createElement(m.a,{bsStyle:"link",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"rejectTerms",onClick:this.handleRejectTerms,type:"reset"},this.state.loadingDisagree&&c.a.createElement("span",{className:"fa fa-refresh icon--rotate",title:S.localizeMessage("generic_icons.loading","Loading Icon")}),c.a.createElement(u.c,{id:"terms_of_service.disagreeButton",defaultMessage:"I Disagree"}))),Boolean(this.state.serverError)&&c.a.createElement("div",{className:"alert alert-warning margin--extra hidden-xs"},c.a.createElement("i",{className:"fa fa-exclamation-triangle",title:S.localizeMessage("generic_icons.warning","Warning Icon")})," ",this.state.serverError)),c.a.createElement("div",{className:"margin--extra"},c.a.createElement(v.a,{id:"terms_of_service.footnote",defaultMessage:"By choosing 'I Agree', you understand and agree to [Terms of Service]({TermsOfServiceLink}) and [Privacy Policy]({PrivacyPolicyLink}). If you do not agree, you cannot access {siteName}.",values:{siteName:this.props.siteName,TermsOfServiceLink:this.props.termsOfServiceLink,PrivacyPolicyLink:this.props.privacyPolicyLink}})))))}}]),t}();P(j,"propTypes",{customTermsOfServiceId:o.a.string.isRequired,privacyPolicyLink:o.a.string,siteName:o.a.string,termsEnabled:o.a.bool,termsOfServiceLink:o.a.string}),P(j,"defaultProps",{privacyPolicyLink:"https://about.mattermost.com/default-privacy-policy/",siteName:"Mattermost",termsEnabled:!0,termsOfServiceLink:"https://about.mattermost.com/default-terms/"});t.default=Object(a.connect)(function(e){var t=Object(n.getConfig)(e);return{customTermsOfServiceId:t.CustomTermsOfServiceId,privacyPolicyLink:t.PrivacyPolicyLink,siteName:t.SiteName,termsEnabled:"true"===t.EnableCustomTermsOfService,termsOfServiceLink:t.TermsOfServiceLink}})(j)}}]);
//# sourceMappingURL=18.ba5385b24b54db7ff03c.js.map