(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1882:function(e,t,n){"use strict";n.r(t);var r=n(134),o=n(47),a=(n(73),n(72),n(94),n(234),n(5)),c=n.n(a),i=n(10),u=n.n(i),l=n(536),s=n(1901),f=n(851),p=n(549),m=n(535),b=n(580),y=n.n(b),d=n(572),h=n(538),g=(n(233),n(553)),v=n(550);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(S(S(n=function(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?S(e):t}(this,w(t).call(this,e)))),"submit",function(e){e.preventDefault();var t=n.refs.code.value.replace(/\s/g,"");t&&0!==t.length?(n.setState({error:null}),Object(g.a)(t,function(){n.props.history.push("/mfa/confirm")},function(e){"ent.mfa.activate.authenticate.app_error"!==e.id?n.setState({error:e.message}):n.setState({error:m.localizeMessage("mfa.setup.badCode","Invalid code. If this issue persists, contact your System Administrator.")})})):n.setState({error:m.localizeMessage("mfa.setup.codeError","Please enter the code from Google Authenticator.")})}),n.state={secret:"",qrCode:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,u.a.Component),function(e,t,n){t&&O(e.prototype,t),n&&O(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentUser;t&&!t.mfa_active?Object(g.j)(function(t){return e.setState({secret:t.secret,qrCode:t.qr_code})},function(t){return e.setState({serverError:t.message})}):this.props.history.push("/")}},{key:"render",value:function(){var e,t,n="form-group";return this.state.error&&(e=u.a.createElement("div",{className:"form-group has-error"},u.a.createElement("label",{className:"control-label"},this.state.error)),n+=" has-error"),this.props.enforceMultifactorAuthentication&&(t=u.a.createElement("p",null,u.a.createElement(v.a,{id:"mfa.setup.required",defaultMessage:"**Multi-factor authentication is required on {siteName}.**",values:{siteName:this.props.siteName}}))),u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.submit,className:n},t,u.a.createElement("p",null,u.a.createElement(v.a,{id:"mfa.setup.step1",defaultMessage:"**Step 1: **On your phone, download Google Authenticator from [iTunes](!https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8') or [Google Play](!https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en)"})),u.a.createElement("p",null,u.a.createElement(v.a,{id:"mfa.setup.step2",defaultMessage:"**Step 2: **Use Google Authenticator to scan this QR code, or manually type in the secret key"})),u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("img",{style:M.qrCode,src:"data:image/png;base64,"+this.state.qrCode}))),u.a.createElement("br",null),u.a.createElement("div",{className:"form-group"},u.a.createElement("p",{className:"col-sm-12"},u.a.createElement(l.c,{id:"mfa.setup.secret",defaultMessage:"Secret: {secret}",values:{secret:this.state.secret}}))),u.a.createElement("p",null,u.a.createElement(v.a,{id:"mfa.setup.step3",defaultMessage:"**Step 3: **Enter the code generated by Google Authenticator"})),u.a.createElement("p",null,u.a.createElement("input",{ref:"code",className:"form-control",placeholder:m.localizeMessage("mfa.setup.code","MFA Code"),autoFocus:!0})),e,u.a.createElement("button",{type:"submit",className:"btn btn-primary"},u.a.createElement(l.c,{id:"mfa.setup.save",defaultMessage:"Save"}))))}}]),t}();_(P,"propTypes",{currentUser:c.a.object,siteName:c.a.string,enforceMultifactorAuthentication:c.a.bool.isRequired});var M={qrCode:{maxHeight:170}};var k=Object(r.connect)(function(e){var t=Object(o.getConfig)(e),n=t.SiteName,r="true"===t.EnforceMultifactorAuthentication;return{currentUser:Object(h.getCurrentUser)(e),siteName:n,enforceMultifactorAuthentication:r}})(P);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=n(0).D.KeyCodes,x=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return R(T(T(n=function(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?T(e):t}(this,(e=A(t)).call.apply(e,[this].concat(o))))),"submit",function(e){e.preventDefault(),n.props.history.push("/")}),R(T(T(n)),"onKeyPress",function(e){Object(m.isKeyPressed)(e,L.ENTER)&&n.submit(e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,u.a.Component),function(e,t,n){t&&C(e.prototype,t),n&&C(e,n)}(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.onKeyPress)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.onKeyPress)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.submit,onKeyPress:this.onKeyPress,className:"form-group"},u.a.createElement("p",null,u.a.createElement(v.a,{id:"mfa.confirm.complete",defaultMessage:"**Set up complete!**"})),u.a.createElement("p",null,u.a.createElement(l.c,{id:"mfa.confirm.secure",defaultMessage:"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone."})),u.a.createElement("button",{type:"submit",className:"btn btn-primary"},u.a.createElement(l.c,{id:"mfa.confirm.okay",defaultMessage:"Okay"}))))}}]),t}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(I(I(n=function(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?I(e):t}(this,(e=U(t)).call.apply(e,[this].concat(o))))),"handleOnClick",function(e){e.preventDefault(),Object(p.p)("/login")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,u.a.Component),function(e,t,n){t&&K(e.prototype,t),n&&K(e,n)}(t,[{key:"componentDidMount",value:function(){document.body.classList.add("sticky"),document.getElementById("root").classList.add("container-fluid"),this.props.mfa&&this.props.enableMultifactorAuthentication||this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("sticky"),document.getElementById("root").classList.remove("container-fluid")}},{key:"render",value:function(){var e,t=this;return e=this.props.enforceMultifactorAuthentication?u.a.createElement("div",{className:"signup-header"},u.a.createElement("button",{className:"style--none color--link",onClick:this.handleOnClick},u.a.createElement("span",{className:"fa fa-chevron-left",title:Object(m.localizeMessage)("generic_icons.logout","Logout Icon")}),u.a.createElement(l.c,{id:"web.header.logout",defaultMessage:"Logout"}))):u.a.createElement(d.a,null),u.a.createElement("div",{className:"inner-wrap"},u.a.createElement("div",{className:"row content"},u.a.createElement("div",null,e,u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("div",{className:"signup-team__container"},u.a.createElement("h3",null,u.a.createElement(l.c,{id:"mfa.setupTitle",defaultMessage:"Multi-factor Authentication Setup"})),u.a.createElement("img",{className:"signup-team-logo",src:y.a}),u.a.createElement("div",{id:"mfa"},u.a.createElement(s.a,null,u.a.createElement(f.a,{path:"".concat(this.props.match.url,"/setup"),render:function(e){return u.a.createElement(k,Object.assign({state:t.state,updateParent:t.updateParent},e))}}),u.a.createElement(f.a,{path:"".concat(this.props.match.url,"/confirm"),render:function(e){return u.a.createElement(x,Object.assign({state:t.state,updateParent:t.updateParent},e))}}))))))))}}]),t}();z.propTypes={location:c.a.object.isRequired,children:c.a.node,mfa:c.a.bool.isRequired,enableMultifactorAuthentication:c.a.bool.isRequired,enforceMultifactorAuthentication:c.a.bool.isRequired,match:c.a.shape({url:c.a.string.isRequired}).isRequired};t.default=Object(r.connect)(function(e){var t=Object(o.getLicense)(e),n=Object(o.getConfig)(e);return{mfa:"true"===t.MFA,enableMultifactorAuthentication:"true"===n.EnableMultifactorAuthentication,enforceMultifactorAuthentication:"true"===n.EnforceMultifactorAuthentication}})(z)},572:function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(73),n(72);var r=n(5),o=n.n(r),a=n(10),c=n.n(a),i=n(536),u=n(1064),l=n(535);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,c.a.PureComponent),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"signup-header"},c.a.createElement(u.a,{onClick:this.props.onClick,to:this.props.url},c.a.createElement("span",{className:"fa fa-chevron-left",title:Object(l.localizeMessage)("generic_icons.back","Back Icon")}),c.a.createElement(i.c,{id:"web.header.back",defaultMessage:"Back"})))}}]),t}();y(d,"propTypes",{url:o.a.string,onClick:o.a.func}),y(d,"defaultProps",{url:"/"})},580:function(e,t,n){e.exports=n.p+"files/b4b638e8c6672039f00a5f07cfed24d4.png"}}]);
//# sourceMappingURL=28.1da44e7c8884243eb8df.js.map